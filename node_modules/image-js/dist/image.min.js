var _Mathcos=Math.cos,_NumberMIN_VALUE=Number.MIN_VALUE,_Mathsign=Math.sign,_NumberNEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,_NumberPOSITIVE_INFINITY=Number.POSITIVE_INFINITY,_Mathexp=Math.exp,_NumberEPSILON=Number.EPSILON,_Mathsin=Math.sin,_MathPI=Math.PI,_Mathceil=Math.ceil,_Mathlog=Math.log,_StringfromCharCode=String.fromCharCode,_Mathround=Math.round,_Mathabs=Math.abs,_Mathmin=Math.min,_Mathmax=Math.max,_Mathfloor=Math.floor,_Mathsqrt=Math.sqrt,_NumberisFinite=Number.isFinite,_NumberisInteger=Number.isInteger,_Mathpow=Math.pow,_NumberMAX_VALUE=Number.MAX_VALUE;(function(P,I){'object'==typeof exports&&'object'==typeof module?module.exports=I():'function'==typeof define&&define.amd?define([],I):'object'==typeof exports?exports.IJS=I():P.IJS=I()})(this,function(){return function(_){function P(S){if(I[S])return I[S].exports;var R=I[S]={i:S,l:!1,exports:{}};return _[S].call(R.exports,R,R.exports,P),R.l=!0,R.exports}var I={};return P.m=_,P.c=I,P.i=function(S){return S},P.d=function(S,R,L){P.o(S,R)||Object.defineProperty(S,R,{configurable:!1,enumerable:!0,get:L})},P.n=function(S){var R=S&&S.__esModule?function(){return S['default']}:function(){return S};return P.d(R,'a',R),R},P.o=function(S,R){return Object.prototype.hasOwnProperty.call(S,R)},P.p='',P(P.s=155)}([function(_,P,I){'use strict';function S(_e){return _e&&_e.__esModule?_e:{default:_e}}Object.defineProperty(P,'__esModule',{value:!0});var R=I(94),L=I(14),E=I(17),T=I(73),O=S(T),G=I(60),W=S(G),Z=I(256),Q=I(2),J=I(109),$=S(J),ee=I(96),te=I(22),ae=S(te),ie=I(95),ne=I(12),oe=S(ne),le=I(168),se=I(39),de=S(se),he=I(182),ue=I(32),ce={configurable:!0,enumerable:!1,get:void 0},pe=Object.prototype.toString,ge='IJSImage';class fe{constructor(_e,be,xe,ye){if(void 0===_e&&(_e=1),void 0===be&&(be=1),'object'==typeof _e){var we=_e,ke=!0===be;_e=we.width,be=we.height,xe=ke?we.data.slice():we.data,ye={position:we.position,components:we.components,alpha:we.alpha,bitDepth:we.bitDepth,colorModel:we.colorModel,parent:we,meta:we.meta}}if(xe&&!xe.length&&(ye=xe,xe=null),void 0===ye&&(ye={}),this.width=_e,this.height=be,0>=this.width)throw new RangeError('width must be greater than 0');if(0>=this.height)throw new RangeError('height must be greater than 0');Object.defineProperty(this,'parent',{enumerable:!1,writable:!0}),this.parent=ye.parent,this.position=ye.position||[0,0];var ve;if('string'!=typeof ye.kind)ve=(0,R.getKind)(L.RGBA);else if(ve=(0,R.getKind)(ye.kind),!ve)throw new RangeError('invalid image kind: '+ye.kind);var Me=(0,ae.default)({},ve,ye);this.components=Me.components,this.alpha=Me.alpha+0,this.bitDepth=Me.bitDepth,this.colorModel=Me.colorModel,this.meta=ye.meta||{},this.computed=null,this.initialize(),xe||(xe=(0,R.createPixelArray)(this)),this.setData(xe)}get[Symbol.toStringTag](){return ge}static isImage(_e){return`[object ${ge}]`===pe.call(_e)}initialize(){this.size=this.width*this.height,this.sizes=[this.width,this.height],this.channels=this.components+this.alpha,this.maxValue=32===this.bitDepth?_NumberMAX_VALUE:_Mathpow(2,this.bitDepth)-1,this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=32>this.bitDepth,this.borderSizes=[0,0]}setData(_e){var be=(0,R.getTheoreticalPixelArraySize)(this);if(be!==_e.length)throw new RangeError(`incorrect data size. Should be ${be} and found ${_e.length}`);this.data=_e}static load(_e,be){return(0,ie.loadImage)(_e,be)}static fromCanvas(_e){var be=_e.getContext('2d'),xe=be.getImageData(0,0,_e.width,_e.height);return new fe(xe.width,xe.height,xe.data)}static extendMethod(_e,be,xe={}){var ye=xe.inPlace,ke=xe.returnThis,ve=!(ke!==void 0)||ke,Me=xe.partialArgs,Pe=Me===void 0?[]:Me,De=xe.stack,je=De!==void 0&&De;if(ye!==void 0&&ye){if(fe.prototype[_e]=function(...Ce){this.computed=null;var Re=be.apply(this,[...Pe,...Ce]);return ve?this:Re},je){var Ie='string'==typeof je?je:_e;oe.default.prototype[Ie]=ve?function(...Ce){var Re=!0,Ae=!1,Be;try{for(var ze=this[Symbol.iterator](),Le,Ee;!(Re=(Le=ze.next()).done);Re=!0)Ee=Le.value,Ee[_e](...Ce)}catch(Te){Ae=!0,Be=Te}finally{try{!Re&&ze.return&&ze.return()}finally{if(Ae)throw Be}}return this}:function(...Ce){for(var Re=new oe.default(this.length),Ae=0;Ae<this.length;Ae++)Re[Ae]=this[Ae][_e](...Ce);return Re}}}else if(fe.prototype[_e]=function(...Ce){return be.apply(this,[...Pe,...Ce])},je){var Se='string'==typeof je?je:_e;oe.default.prototype[Se]=function(...Ce){for(var Re=new oe.default(this.length),Ae=0;Ae<this.length;Ae++)Re[Ae]=this[Ae][_e](...Ce);return Re}}return fe}static extendProperty(_e,be,xe={}){var ye=xe.partialArgs,we=void 0===ye?[]:ye;return ce.get=function(){if(null===this.computed)this.computed={};else if((0,de.default)(_e,this.computed))return this.computed[_e];var ke=be.apply(this,we);return this.computed[_e]=ke,ke},Object.defineProperty(fe.prototype,_e,ce),fe}static createFrom(_e,be){var xe={width:_e.width,height:_e.height,position:[0,0],components:_e.components,alpha:_e.alpha,colorModel:_e.colorModel,bitDepth:_e.bitDepth,parent:_e};return(0,ae.default)(xe,be),new fe(xe.width,xe.height,xe)}static isTypeSupported(_e,be='write'){if('string'!=typeof _e)throw new TypeError('type argument must be a string');if(_e=(0,ee.getType)(_e),'write'===be)return(0,ee.canWrite)(_e);throw new TypeError('unknown operation: '+be)}getPixelIndex(_e){for(var be=0,xe=0;xe<_e.length;xe++)be+=this.multipliers[xe]*_e[xe];return be}setValueXY(_e,be,xe,ye){return this.data[(be*this.width+_e)*this.channels+xe]=ye,this.computed=null,this}getValueXY(_e,be,xe){return this.data[(be*this.width+_e)*this.channels+xe]}setValue(_e,be,xe){return this.data[_e*this.channels+be]=xe,this.computed=null,this}getValue(_e,be){return this.data[_e*this.channels+be]}setPixelXY(_e,be,xe){return this.setPixel(be*this.width+_e,xe)}getPixelXY(_e,be){return this.getPixel(be*this.width+_e)}setPixel(_e,be){for(var xe=_e*this.channels,ye=0;ye<be.length;ye++)this.data[xe+ye]=be[ye];return this.computed=null,this}getPixel(_e){for(var be=Array(this.channels),xe=_e*this.channels,ye=0;ye<this.channels;ye++)be[ye]=this.data[xe+ye];return be}toDataURL(_e='image/png',be=!1){function xe(ye){var we=(0,he.encode)(ye),ke=(0,ue.encode)(we);return`data:${_e};base64,${ke}`}return _e=(0,ee.getType)(_e),be?new Promise((ye,we)=>{'image/bmp'===_e?ye(xe(this)):this.getCanvas().toDataURL(_e,function(ke,ve){ke?we(ke):ye(ve)})}):'image/bmp'===_e?xe(this):this.getCanvas().toDataURL(_e)}toBase64(_e='image/png',be=!1){if(be)return this.toDataURL(_e,!0).then(function(ye){return ye.substring(ye.indexOf(',')+1)});var xe=this.toDataURL(_e);return xe.substring(xe.indexOf(',')+1)}toBlob(_e='image/png',be=0.8){return(0,le.canvasToBlob)(this.getCanvas({originalData:!0}),_e,be)}getCanvas(_e={}){var be=_e.originalData,ye;void 0!==be&&be?(this.checkProcessable('getInPlaceCanvas',{channels:[4],bitDepth:[8]}),ye=new E.ImageData(this.data,this.width,this.height)):ye=new E.ImageData(this.getRGBAData(),this.width,this.height);var we=new E.Canvas(this.width,this.height),ke=we.getContext('2d');return ke.putImageData(ye,0,0),we}getRGBAData(){this.checkProcessable('getRGBAData',{components:[1,3],bitDepth:[1,8,16]});var _e=this.size,be=new Uint8ClampedArray(4*(this.width*this.height));if(1===this.bitDepth)for(var xe=0,ye;xe<_e;xe++)ye=this.getBit(xe),be[4*xe]=255*ye,be[4*xe+1]=255*ye,be[4*xe+2]=255*ye;else if(1===this.components)for(var we=0;we<_e;we++)be[4*we]=this.data[we*this.channels]>>>this.bitDepth-8,be[4*we+1]=this.data[we*this.channels]>>>this.bitDepth-8,be[4*we+2]=this.data[we*this.channels]>>>this.bitDepth-8;else if(3===this.components&&(this.checkProcessable('getRGBAData',{colorModel:[Q.RGB]}),this.colorModel===Q.RGB))for(var ke=0;ke<_e;ke++)be[4*ke]=this.data[ke*this.channels]>>>this.bitDepth-8,be[4*ke+1]=this.data[ke*this.channels+1]>>>this.bitDepth-8,be[4*ke+2]=this.data[ke*this.channels+2]>>>this.bitDepth-8;if(this.alpha){this.checkProcessable('getRGBAData',{bitDepth:[8,16]});for(var ve=0;ve<_e;ve++)be[4*ve+3]=this.data[ve*this.channels+this.components]>>this.bitDepth-8}else for(var Me=0;Me<_e;Me++)be[4*Me+3]=255;return be}getRoiManager(_e){return new $.default(this,_e)}clone(_e={}){var be=_e.copyData;return new fe(this,!(be!==void 0)||be)}save(_e,be={}){var xe=be.format,ye=xe===void 0?'png':xe;return new Promise((we,ke)=>{var ve=(0,Z.createWriteStream)(_e),Me,Pe;switch(ye.toLowerCase()){case'png':Me=this.getCanvas().pngStream();break;case'jpg':case'jpeg':Me=this.getCanvas().jpegStream();break;case'bmp':Pe=(0,he.encode)(this);break;default:throw new RangeError('invalid output format: '+ye);}Me?(ve.on('finish',we),ve.on('error',ke),Me.pipe(ve)):Pe&&(0,Z.writeFile)(_e,Buffer.from(Pe),(De)=>{return De?void ke(De):void we()})})}checkProcessable(_e,be={}){var xe=be.bitDepth,ye=be.alpha,we=be.colorModel,ke=be.components,ve=be.channels;if('string'!=typeof _e)throw new TypeError('checkProcessable requires as first parameter the processName (a string)');if(xe&&(Array.isArray(xe)||(xe=[xe]),!xe.includes(this.bitDepth)))throw new TypeError('The process: '+_e+' can only be applied if bit depth is in: '+xe);if(ye&&(Array.isArray(ye)||(ye=[ye]),!ye.includes(this.alpha)))throw new TypeError('The process: '+_e+' can only be applied if alpha is in: '+ye);if(we&&(Array.isArray(we)||(we=[we]),!we.includes(this.colorModel)))throw new TypeError('The process: '+_e+' can only be applied if color model is in: '+we);if(ke&&(Array.isArray(ke)||(ke=[ke]),!ke.includes(this.components)))throw new TypeError('The process: '+_e+' can only be applied if the number of components is in: '+ke);if(ve&&(Array.isArray(ve)||(ve=[ve]),!ve.includes(this.channels)))throw new TypeError('The process: '+_e+' can only be applied if the number of channels is in: '+ve)}checkColumn(_e){if(0>_e||_e>=this.width)throw new RangeError(`checkColumn: column should be included between 0 and ${this.width-1}. Current value: ${_e}`)}checkRow(_e){if(0>_e||_e>=this.height)throw new RangeError(`checkRow: row should be included between 0 and ${this.height-1}. Current value: ${_e}`)}checkChannel(_e){if(0>_e||_e>=this.channels)throw new RangeError(`checkChannel: channel should be included between 0 and ${this.channels-1}. Current value: ${_e}`)}apply(_e){for(var be=0;be<this.height;be++)for(var xe=0,ye;xe<this.width;xe++)ye=(be*this.width+xe)*this.channels,_e.call(this,ye)}}P.default=fe,(0,O.default)(fe),(0,W.default)(fe)},function(_,P,I){'use strict';function L(W,Z){for(var Q=Z?W.channels:W.components,J=Array(Q),$=0;$<Q;$++)J[$]=$;return J}function E(W,Z,Q){Array.isArray(Z)||(Z=[Z]);for(var J=0;J<Z.length;J++)Z[J]=T(W,Z[J],Q);return Z}function T(W,Z,Q=!0){if(Z===void 0)throw new RangeError('validateChannel : the channel has to be >=0 and <'+W.channels);if('string'==typeof Z){switch(W.colorModel){case G.GREY:break;case G.RGB:'rgb'.includes(Z)&&('r'===Z?Z=0:'g'===Z?Z=1:'b'===Z?Z=2:void 0);break;case G.HSL:'hsl'.includes(Z)&&('h'===Z?Z=0:'s'===Z?Z=1:'l'===Z?Z=2:void 0);break;case G.HSV:'hsv'.includes(Z)&&('h'===Z?Z=0:'s'===Z?Z=1:'v'===Z?Z=2:void 0);break;case G.CMYK:'cmyk'.includes(Z)&&('c'===Z?Z=0:'m'===Z?Z=1:'y'===Z?Z=2:'k'===Z?Z=3:void 0);break;default:throw new Error(`Unexpected color model: ${W.colorModel}`);}if('a'===Z){if(!W.alpha)throw new Error('validateChannel : the image does not contain alpha channel');Z=W.components}if('string'==typeof Z)throw new Error('validateChannel : undefined channel: '+Z)}if(Z>=W.channels)throw new RangeError('validateChannel : the channel has to be >=0 and <'+W.channels);if(!Q&&Z>=W.components)throw new RangeError('validateChannel : alpha channel may not be selected');return Z}Object.defineProperty(P,'__esModule',{value:!0}),P.validateArrayOfChannels=function(W,Z={}){var Q=Z.channels,J=Z.allowAlpha,$=Z.defaultAlpha;return'boolean'!=typeof J&&(J=!0),'undefined'==typeof Q?L(W,$):E(W,Q,J)},P.validateChannel=T;var O=I(2),G=function(W){if(W&&W.__esModule)return W;var Z={};if(null!=W)for(var Q in W)Object.prototype.hasOwnProperty.call(W,Q)&&(Z[Q]=W[Q]);return Z.default=W,Z}(O)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0});var S=P.RGB='RGB',R=P.HSL='HSL',L=P.HSV='HSV',E=P.CMYK='CMYK',T=P.GREY='GREY'},function(_,P,I){'use strict';I(219);var S=I(42),R=I(16);class L extends S(Array){constructor(E,T){var O;if(1===arguments.length&&'number'==typeof E)return Array(E);if(L.isMatrix(E))return E.clone();if(_NumberisInteger(E)&&0<E){if(super(E),_NumberisInteger(T)&&0<T)for(O=0;O<E;O++)this[O]=Array(T);else throw new TypeError('nColumns must be a positive integer');}else if(Array.isArray(E)){const G=E;if(E=G.length,T=G[0].length,'number'!=typeof T||0===T)throw new TypeError('Data must be a 2D array with at least one element');for(super(E),O=0;O<E;O++){if(G[O].length!==T)throw new RangeError('Inconsistent array dimensions');this[O]=[].concat(G[O])}}else throw new TypeError('First argument must be a positive number or an array');return this.rows=E,this.columns=T,this}set(E,T,O){return this[E][T]=O,this}get(E,T){return this[E][T]}clone(){for(var E=new this.constructor[Symbol.species](this.rows,this.columns),T=0;T<this.rows;T++)for(var O=0;O<this.columns;O++)E.set(T,O,this.get(T,O));return E}removeRow(E){if(R.checkRowIndex(this,E),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return this.splice(E,1),this.rows-=1,this}addRow(E,T){return void 0===T&&(T=E,E=this.rows),R.checkRowIndex(this,E,!0),T=R.checkRowVector(this,T,!0),this.splice(E,0,T),this.rows+=1,this}removeColumn(E){if(R.checkColumnIndex(this,E),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var T=0;T<this.rows;T++)this[T].splice(E,1);return this.columns-=1,this}addColumn(E,T){'undefined'==typeof T&&(T=E,E=this.columns),R.checkColumnIndex(this,E,!0),T=R.checkColumnVector(this,T);for(var O=0;O<this.rows;O++)this[O].splice(E,0,T[O]);return this.columns+=1,this}}P.Matrix=L,L.abstractMatrix=S},function(_){_.exports=function(S,R){S=S||0;for(var L=Array(S),E=0;E<S;E++)L[E]=R;return L}},function(_){'use strict';_.exports=class{predict(R){var L;if(Array.isArray(R)){L=Array(R.length);for(var E=0;E<R.length;E++)L[E]=this._predict(R[E])}else if(_NumberisFinite(R))L=this._predict(R);else throw new TypeError('x must be a number or array');return L}_predict(){throw new Error('_compute not implemented')}train(){}toString(){return''}toLaTeX(){return''}modelQuality(R,L){let E=R.length;var T=Array(E);for(let te=0;te<E;te++)T[te]=this._predict(R[te]);var O=0,G=0,W=0,Z=0,Q=0,J=0,$=0;for(let te=0;te<E;te++)O+=T[te],G+=L[te],Q+=T[te]*T[te],J+=L[te]*L[te],$+=T[te]*L[te],0!==L[te]&&(W+=(L[te]-T[te])*(L[te]-T[te])/L[te]),Z=(L[te]-T[te])*(L[te]-T[te]);var ee=(E*$-O*G)/_Mathsqrt((E*Q-O*O)*(E*J-G*G));return{r:ee,r2:ee*ee,chi2:W,rmsd:Z*Z/E}}}},function(_,P){'use strict';var S='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;P.assign=function(E){for(var T=Array.prototype.slice.call(arguments,1),O;T.length;)if(O=T.shift(),!!O){if('object'!=typeof O)throw new TypeError(O+'must be non-object');for(var G in O)O.hasOwnProperty(G)&&(E[G]=O[G])}return E},P.shrinkBuf=function(E,T){return E.length===T?E:E.subarray?E.subarray(0,T):(E.length=T,E)};var R={arraySet:function(E,T,O,G,W){if(T.subarray&&E.subarray)return void E.set(T.subarray(O,O+G),W);for(var Z=0;Z<G;Z++)E[W+Z]=T[O+Z]},flattenChunks:function(E){var T,O,G,W,Z,Q;for(G=0,T=0,O=E.length;T<O;T++)G+=E[T].length;for(Q=new Uint8Array(G),W=0,(T=0,O=E.length);T<O;T++)Z=E[T],Q.set(Z,W),W+=Z.length;return Q}},L={arraySet:function(E,T,O,G,W){for(var Z=0;Z<G;Z++)E[W+Z]=T[O+Z]},flattenChunks:function(E){return[].concat.apply([],E)}};P.setTyped=function(E){E?(P.Buf8=Uint8Array,P.Buf16=Uint16Array,P.Buf32=Int32Array,P.assign(P,R)):(P.Buf8=Array,P.Buf16=Array,P.Buf32=Array,P.assign(P,L))},P.setTyped(S)},function(_,P,I){'use strict';_.exports=I(3).Matrix,_.exports.Decompositions=_.exports.DC=I(218)},function(_,P,I){'use strict';var S=I(42),R=I(3);class L extends S(){constructor(E,T,O){super(),this.matrix=E,this.rows=T,this.columns=O}static get[Symbol.species](){return R.Matrix}}_.exports=L},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0});class S{constructor(R,L){this.parent=R,this.width=R.width,this.height=R.height,this.data=L,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}rowsInfo(){for(var R=Array(this.height),L=0,E=0,T;E<this.data.length;E+=this.width){T={row:L,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0},R[L++]=T;for(var O={},G={},W=[],Z=this.data[E],Q=0,J=E,$;J<E+this.width;J++)$=this.data[J],Z!==$&&(Z=$,W.push(Q),Q=0),Q++,0<$?(T.positivePixel++,!O[$]&&(O[$]=!0)):0>$?(T.negativePixel++,!G[$]&&(G[$]=!0)):T.zeroPixel++;W.push(Q),T.medianChange=W.sort((ee,te)=>ee-te)[_Mathfloor(W.length/2)],T.positiveRoiIDs=Object.keys(O),T.negativeRoiIDs=Object.keys(G),T.positiveRoi=T.positiveRoiIDs.length,T.negativeRoi=T.negativeRoiIDs.length}return R}colsInfo(){for(var R=Array(this.width),L=0,E=0,T;E<this.width;E++){T={col:L,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0},R[L++]=T;for(var O={},G={},W=[],Z=this.data[E],Q=0,J=E,$;J<E+this.data.length;J+=this.width)$=this.data[J],Z!==$&&(Z=$,W.push(Q),Q=0),Q++,0<$?(T.positivePixel++,!O[$]&&(O[$]=!0)):0>$?(T.negativePixel++,!G[$]&&(G[$]=!0)):T.zeroPixel++;W.push(Q),T.medianChange=W.sort((ee,te)=>ee-te)[_Mathfloor(W.length/2)],T.positiveRoiIDs=Object.keys(O),T.negativeRoiIDs=Object.keys(G),T.positiveRoi=T.positiveRoiIDs.length,T.negativeRoi=T.negativeRoiIDs.length}return R}}P.default=S},function(_){'use strict';function S(L,E){for(var T=0,O=0;O<L.length;O++)T+=(L[O]-E[O])*(L[O]-E[O]);return T}function R(L,E){return _Mathsqrt(S(L,E))}_.exports=R,R.squared=S},function(_,P){'use strict';P.maybeToPrecision=function(R,L){return 0>R?(R=-1*R,L?'- '+R.toPrecision(L):'- '+R.toString()):L?R.toPrecision(L):R.toString()}},function(_,P,I){'use strict';function S(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(P,'__esModule',{value:!0});var R=I(162),L=S(R),E=I(0),T=S(E),O=I(39),G=S(O),W={configurable:!0,enumerable:!1,get:void 0};class Z extends Array{constructor(Q){if(Array.isArray(Q)){super(Q.length);for(var J=0;J<Q.length;J++)this[J]=Q[J]}else'number'==typeof Q?super(Q):super();this.computed=null}static load(Q){return Promise.all(Q.map(T.default.load)).then((J)=>new Z(J))}static extendMethod(Q,J,$={}){var ee=$.inPlace,ae=$.returnThis,ne=$.partialArgs,oe=void 0===ne?[]:ne;return Z.prototype[Q]=void 0!==ee&&ee?function(...le){this.computed=null;var se=J.apply(this,[...oe,...le]);return void 0===ae||ae?this:se}:function(...le){return J.apply(this,[...oe,...le])},Z}static extendProperty(Q,J,$={}){var ee=$.partialArgs,te=void 0===ee?[]:ee;return W.get=function(){if(null===this.computed)this.computed={};else if((0,G.default)(Q,this.computed))return this.computed[Q];var ae=J.apply(this,te);return this.computed[Q]=ae,ae},Object.defineProperty(Z.prototype,Q,W),Z}checkProcessable(Q,J={}){if('string'!=typeof Q)throw new TypeError('checkProcessable requires as first parameter the processName (a string)');if(0===this.size)throw new TypeError('The process: '+Q+' can not be applied on an empty stack');this[0].checkProcessable(Q,J);for(var $=1;$<this.length;$++){if((J.sameSize===void 0||J.sameSize)&&this[0].width!==this[$].width)throw new TypeError('The process: '+Q+' can not be applied if width is not identical in all images');if((void 0===J.sameSize||J.sameSize)&&this[0].height!==this[$].height)throw new TypeError('The process: '+Q+' can not be applied if height is not identical in all images');if((void 0===J.sameAlpha||J.sameAlpha)&&this[0].alpha!==this[$].alpha)throw new TypeError('The process: '+Q+' can not be applied if alpha is not identical in all images');if((void 0===J.sameBitDepth||J.sameBitDepth)&&this[0].bitDepth!==this[$].bitDepth)throw new TypeError('The process: '+Q+' can not be applied if bitDepth is not identical in all images');if((void 0===J.sameColorModel||J.sameColorModel)&&this[0].colorModel!==this[$].colorModel)throw new TypeError('The process: '+Q+' can not be applied if colorModel is not identical in all images');if((void 0===J.sameNumberChannels||J.sameNumberChannels)&&this[0].channels!==this[$].channels)throw new TypeError('The process: '+Q+' can not be applied if channels is not identical in all images')}}}P.default=Z,Array[Symbol.species]||(Z.prototype.map=function(Q,J){if('function'!=typeof Q)throw new TypeError(Q+' is not a function');for(var $=new Z(this.length),ee=0;ee<this.length;ee++)$[ee]=Q.call(J,this[ee],ee,this);return $}),(0,L.default)(Z)},function(_,P,I){'use strict';function S(ee){return ee&&ee.__esModule?ee:{default:ee}}function R(ee,te,ae){var ie=O.default.zeros(te,ee);if(ae.filled)for(var ne=0;ne<te;ne++)for(var oe=0;oe<ee;oe++)ie.set(ne,oe,1);else{for(var le=[0,te-1],se=0,de;se<le.length;se++){de=le[se];for(var he=0;he<ee;he++)ie.set(de,he,1)}for(var ue=0,ce;ue<te;ue++){ce=[0,ee-1];for(var pe=0,ge;pe<ce.length;pe++)ge=ce[pe],ie.set(ue,ge,1)}}return ie}function L(ee,te,ae){var ie=O.default.zeros(te,ee,ae),ne=1-te%2,oe=1-ee%2,le=_Mathfloor((ee-1)/2),se=_Mathfloor((te-1)/2),de=le*le,he=se*se;if(ae.filled)for(var ue=0,ce;ue<=se;ue++){ce=_Mathfloor(_Mathsqrt(de-de*ue*ue/he));for(var pe=le-ce;pe<=le;pe++)ie.set(se-ue,pe,1),ie.set(se+ue+ne,pe,1),ie.set(se-ue,ee-pe-1,1),ie.set(se+ue+ne,ee-pe-1,1)}else{for(var ge=0;ge<=se;ge++){var fe=_Mathfloor(_Mathsqrt(de-de*ge*ge/he)),_e=le-fe;ie.set(se-ge,_e,1),ie.set(se+ge+ne,_e,1),ie.set(se-ge,ee-_e-1,1),ie.set(se+ge+ne,ee-_e-1,1)}for(var be=0;be<=le;be++){var xe=_Mathfloor(_Mathsqrt(he-he*be*be/de)),ye=se-xe;ie.set(ye,le-be,1),ie.set(ye,le+be+oe,1),ie.set(te-ye-1,le-be,1),ie.set(te-ye-1,le+be+oe,1)}}return ie}function E(ee,te,ae){if(!ae.filled)throw new Error('Non filled triangle is not implemented');for(var ie=O.default.zeros(te,ee,ae),ne=0,oe;ne<te;ne++){oe=_Mathfloor((1-ne/te)*ee/2);for(var le=oe;le<ee-oe;le++)ie.set(ne,le,1)}return ie}Object.defineProperty(P,'__esModule',{value:!0});var T=I(7),O=S(T),G=I(0),W=S(G),Z=I(14),Q=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],J=[[0,1,0],[1,1,1],[0,1,0]];P.default=class{constructor(ee={}){var te=ee.kind,ae=void 0===te?'cross':te,ie=ee.shape,ne=ee.size,oe=ee.width,le=ee.height,se=ee.filled,de=void 0===se||se;if(ne&&(oe=ne,le=ne),ie)switch(ie.toLowerCase()){case'square':case'rectangle':this.matrix=R(oe,le,{filled:de});break;case'circle':case'ellipse':this.matrix=L(oe,le,{filled:de});break;case'triangle':this.matrix=E(oe,le,{filled:de});break;default:throw new Error(`Shape: unexpected shape: ${ie}`);}else if(ae)switch(ae.toLowerCase()){case'cross':this.matrix=Q;break;case'smallcross':this.matrix=J;break;default:throw new Error(`Shape: unexpected kind: ${ae}`);}else throw new Error('Shape: expected a kind or a shape option');this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){for(var ee=this.matrix,te=[],ae=0;ae<ee.length;ae++)for(var ie=0;ie<ee[0].length;ie++)ee[ae][ie]&&te.push([ie-this.halfWidth,ae-this.halfHeight]);return te}getMask(){for(var ee=new W.default(this.width,this.height,{kind:Z.BINARY}),te=0;te<this.matrix.length;te++)for(var ae=0;ae<this.matrix[0].length;ae++)this.matrix[te][ae]&&ee.setBitXY(ae,te);return ee}}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0});var S=P.BINARY='BINARY',R=P.GREY='GREY',L=P.GREYA='GREYA',E=P.RGB='RGB',T=P.RGBA='RGBA',O=P.CMYK='CMYK',G=P.CMYKA='CMYKA'},function(_,P,I){'use strict';function S(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(P,'__esModule',{value:!0}),P.checkNumberArray=function(G){if(!isNaN(G)){if(0>=G)throw new Error('checkNumberArray: the value must be greater than 0');return G}if(G instanceof E.default)return G.data;if(!(0,O.default)(G))throw new Error('checkNumberArray: the value should be either a number, array or Image');return G};var L=I(0),E=S(L),T=I(192),O=S(T)},function(_,P,I){'use strict';var S=I(3);P.checkRowIndex=function(L,E,T){var O=T?L.rows:L.rows-1;if(0>E||E>O)throw new RangeError('Row index out of range')},P.checkColumnIndex=function(L,E,T){var O=T?L.columns:L.columns-1;if(0>E||E>O)throw new RangeError('Column index out of range')},P.checkRowVector=function(L,E){if(E.to1DArray&&(E=E.to1DArray()),E.length!==L.columns)throw new RangeError('vector size must be the same as the number of columns');return E},P.checkColumnVector=function(L,E){if(E.to1DArray&&(E=E.to1DArray()),E.length!==L.rows)throw new RangeError('vector size must be the same as the number of rows');return E},P.checkIndices=function(L,E,T){var O=E.some((W)=>{return 0>W||W>=L.rows}),G=T.some((W)=>{return 0>W||W>=L.columns});if(O||G)throw new RangeError('Indices are out of range');if('object'!=typeof E||'object'!=typeof T)throw new TypeError('Unexpected type for row/column indices');return Array.isArray(E)||(E=Array.from(E)),Array.isArray(T)||(E=Array.from(T)),{row:E,column:T}},P.checkRange=function(L,E,T,O,G){if(5!==arguments.length)throw new TypeError('Invalid argument type');var W=Array.from(arguments).slice(1).some(function(Z){return'number'!=typeof Z});if(W)throw new TypeError('Invalid argument type');if(E>T||O>G||0>E||E>=L.rows||0>T||T>=L.rows||0>O||O>=L.columns||0>G||G>=L.columns)throw new RangeError('Submatrix indices are out of range')},P.getRange=function(L,E){for(var T=Array(E-L+1),O=0;O<T.length;O++)T[O]=L+O;return T},P.sumByRow=function(L){for(var E=S.Matrix.zeros(L.rows,1),T=0;T<L.rows;++T)for(var O=0;O<L.columns;++O)E.set(T,0,E.get(T,0)+L.get(T,O));return E},P.sumByColumn=function(L){for(var E=S.Matrix.zeros(1,L.columns),T=0;T<L.rows;++T)for(var O=0;O<L.columns;++O)E.set(0,O,E.get(0,O)+L.get(T,O));return E},P.sumAll=function(L){for(var E=0,T=0;T<L.rows;T++)for(var O=0;O<L.columns;O++)E+=L.get(T,O);return E}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.isDifferentOrigin=function(W){try{var Z=new URL(W);return Z.origin!==G}catch(Q){return!1}},P.Canvas=function(W,Z){var Q=self.document.createElement('canvas');return Q.width=W,Q.height=Z,Q},P.fetchBinary=function(W,{withCredentials:Z=!1}={}){return new Promise(function(Q,J){var $=new self.XMLHttpRequest;$.open('GET',W,!0),$.responseType='arraybuffer',$.withCredentials=Z,$.onload=function(ee){200===this.status?Q(this.response):J(ee)},$.onerror=J,$.send()})};var T=self.ImageData,O=self.Image,G=self.location.origin;P.env='browser',P.ImageData=T,P.DOMImage=O},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(W,Z={}){var Q=Z.channels,J=Z.bitDepth,$=Z.normalize,ee=void 0!==$&&$,te=Z.divisor,ae=void 0===te?1:te,ie=Z.border,ne=void 0===ie?'copy':ie,oe=Z.algorithm,le=void 0===oe?'auto':oe,se=E.default.createFrom(this,{bitDepth:J});Q=(0,T.validateArrayOfChannels)(this,Q,!0);var de=(0,O.validateKernel)(W);W=de.kernel,'auto'===le&&(9<W.length||9<W[0].length?le='fft':le='direct'),(4096<this.width||4096<this.height)&&(le='direct');var he=_Mathfloor(W.length/2),ue=_Mathfloor(W[0].length/2),ce=se.isClamped,pe=Array(this.height*this.width),fe=void 0,_e=void 0,be=void 0,ge,xe,ye;for(be=0;be<Q.length;be++){for(xe=Q[be],_e=0;_e<this.height;_e++)for(fe=0;fe<this.width;fe++)ge=_e*this.width+fe,pe[ge]=this.data[ge*this.channels+xe];for(ye='direct'===le?G.direct(pe,W,{rows:this.height,cols:this.width,normalize:ee,divisor:ae}):G.fft(pe,W,{rows:this.height,cols:this.width,normalize:ee,divisor:ae}),_e=0;_e<this.height;_e++)for(fe=0;fe<this.width;fe++)ge=_e*this.width+fe,se.data[ge*this.channels+xe]=ce?_Mathmin(_Mathmax(ye[ge],0),se.maxValue):ye[ge]}if(this.alpha&&!Q.includes(this.channels))for(fe=this.components;fe<this.data.length;fe+=this.channels)se.data[fe]=this.data[fe];return'periodic'!==ne&&se.setBorder({size:[ue,he],algorithm:ne}),se};var L=I(0),E=function(W){return W&&W.__esModule?W:{default:W}}(L),T=I(1),O=I(166),G=I(214)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.median=function(L){var E=L.reduce((Z,Q)=>Z+Q);if(0===E)throw new Error('unreachable');for(var T=0,O=0,G=E/2,W;;){if(0<L[T]){if(void 0!=W)return(W+T)/2;if(O+=L[T],O>G)return T;O===G&&(W=T)}T++}},P.mean=function(L){for(var E=0,T=0,O=0;O<L.length;O++)E+=L[O],T+=L[O]*O;return 0===E?0:T/E}},function(_){_.exports=function(I,S,R){var S=S/100,R=R/100,L=[],E=R*S,T=I/60,O=E*(1-_Mathabs(T%2-1)),G=R-E;switch(parseInt(T,10)){case 0:L=[E,O,0];break;case 1:L=[O,E,0];break;case 2:L=[0,E,O];break;case 3:L=[0,O,E];break;case 4:L=[O,0,E];break;case 5:L=[E,0,O];}return{r:_Mathround(255*(L[0]+G)),g:_Mathround(255*(L[1]+G)),b:_Mathround(255*(L[2]+G))}}},function(_){_.exports=function(I,S,R){function L(E){var T=E.toString(16);return 1===T.length?'0'+T:T}return[L(I),L(S),L(R)].join('')}},function(_){'use strict';var S=Object.prototype.hasOwnProperty,R=Object.prototype.toString,L=function(O){return'function'==typeof Array.isArray?Array.isArray(O):'[object Array]'===R.call(O)},E=function(O){if(!O||'[object Object]'!==R.call(O))return!1;var G=S.call(O,'constructor'),W=O.constructor&&O.constructor.prototype&&S.call(O.constructor.prototype,'isPrototypeOf');if(O.constructor&&!G&&!W)return!1;for(var Z in O);return'undefined'==typeof Z||S.call(O,Z)};_.exports=function T(){var $=arguments[0],ee=1,te=arguments.length,ae=!1,O,G,W,Z,Q,J;for('boolean'==typeof $?(ae=$,$=arguments[1]||{},ee=2):('object'!=typeof $&&'function'!=typeof $||null==$)&&($={});ee<te;++ee)if(O=arguments[ee],null!=O)for(G in O)W=$[G],Z=O[G],$!==Z&&(ae&&Z&&(E(Z)||(Q=L(Z)))?(Q?(Q=!1,J=W&&L(W)?W:[]):J=W&&E(W)?W:{},$[G]=T(ae,J,Z)):'undefined'!=typeof Z&&($[G]=Z));return $}},function(_){'use strict';const S=8192,R=[];_.exports=class{constructor(E,T){T=T||{},E===void 0&&(E=S),'number'==typeof E&&(E=new ArrayBuffer(E));let O=E.byteLength;const G=T.offset?T.offset>>>0:0;E.buffer&&(O=E.byteLength-G,E=E.byteLength===E.buffer.byteLength?G?E.buffer.slice(G):E.buffer:E.buffer.slice(E.byteOffset+G,E.byteOffset+E.byteLength)),this.buffer=E,this.length=O,this.byteLength=O,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=O||S,this._mark=0}available(E){return void 0===E&&(E=1),this.offset+E<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(E){E===void 0&&(E=1),this.offset+=E}seek(E){this.offset=E}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(E){if(void 0===E&&(E=1),!this.available(E)){const T=this._increment+this._increment;this._increment=T;const O=this.length+T,G=new Uint8Array(O);G.set(new Uint8Array(this.buffer)),this.buffer=G.buffer,this.length=O,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(E){E===void 0&&(E=1);for(var T=new Uint8Array(E),O=0;O<E;O++)T[O]=this.readByte();return T}readInt16(){var E=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,E}readUint16(){var E=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,E}readInt32(){var E=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,E}readUint32(){var E=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat32(){var E=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat64(){var E=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,E}readChar(){return _StringfromCharCode(this.readInt8())}readChars(E){E===void 0&&(E=1),R.length=E;for(var T=0;T<E;T++)R[T]=this.readChar();return R.join('')}writeBoolean(E){this.writeUint8(E?255:0)}writeInt8(E){this.ensureAvailable(1),this._data.setInt8(this.offset++,E)}writeUint8(E){this.ensureAvailable(1),this._data.setUint8(this.offset++,E)}writeByte(E){this.writeUint8(E)}writeBytes(E){this.ensureAvailable(E.length);for(var T=0;T<E.length;T++)this._data.setUint8(this.offset++,E[T])}writeInt16(E){this.ensureAvailable(2),this._data.setInt16(this.offset,E,this.littleEndian),this.offset+=2}writeUint16(E){this.ensureAvailable(2),this._data.setUint16(this.offset,E,this.littleEndian),this.offset+=2}writeInt32(E){this.ensureAvailable(4),this._data.setInt32(this.offset,E,this.littleEndian),this.offset+=4}writeUint32(E){this.ensureAvailable(4),this._data.setUint32(this.offset,E,this.littleEndian),this.offset+=4}writeFloat32(E){this.ensureAvailable(4),this._data.setFloat32(this.offset,E,this.littleEndian),this.offset+=4}writeFloat64(E){this.ensureAvailable(8),this._data.setFloat64(this.offset,E,this.littleEndian),this.offset+=8}writeChar(E){this.writeUint8(E.charCodeAt(0))}writeChars(E){for(var T=0;T<E.length;T++)this.writeUint8(E.charCodeAt(T))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},function(_,P){'use strict';P.hypotenuse=function(R,L){var E;return _Mathabs(R)>_Mathabs(L)?(E=L/R,_Mathabs(R)*_Mathsqrt(1+E*E)):0===L?0:(E=R/L,_Mathabs(L)*_Mathsqrt(1+E*E))},P.getEmpty2DArray=function(S,R){for(var L=Array(S),E=0;E<S;E++)L[E]=Array(R);return L},P.getFilled2DArray=function(S,R,L){for(var E=Array(S),T=0;T<S;T++){E[T]=Array(R);for(var O=0;O<R;O++)E[T][O]=L}return E}},function(_,P,I){'use strict';var S=I(11).maybeToPrecision;const R=I(5);class L extends R{constructor(E,T,O){if(O=O||{},super(),!0===E)this.slope=T.slope,this.intercept=T.intercept,this.quality=T.quality||{},T.quality.r&&(this.quality.r=T.quality.r,this.quality.r2=T.quality.r2),T.quality.chi2&&(this.quality.chi2=T.quality.chi2);else{var G=E.length;if(G!==T.length)throw new RangeError('input and output array have a different length');for(var W=0,Z=0,Q=0,J=0,$=0;$<G;$++)W+=E[$],Z+=T[$],Q+=E[$]*E[$],J+=E[$]*T[$];var ee=G*J-W*Z;this.slope=ee/(G*Q-W*W),this.intercept=1/G*Z-this.slope*(1/G)*W,this.coefficients=[this.intercept,this.slope],O.computeQuality&&(this.quality=this.modelQuality(E,T))}}toJSON(){var E={name:'simpleLinearRegression',slope:this.slope,intercept:this.intercept};return this.quality&&(E.quality=this.quality),E}_predict(E){return this.slope*E+this.intercept}computeX(E){return(E-this.intercept)/this.slope}toString(E){var T='f(x) = ';if(this.slope){var O=S(this.slope,E);if(T+=(1e-5>_Mathabs(O-1)?'':O+' * ')+'x',this.intercept){var G=_Mathabs(this.intercept),W=G===this.intercept?'+':'-';T+=' '+W+' '+S(G,E)}}else T+=S(this.intercept,E);return T}toLaTeX(E){return this.toString(E)}static load(E){if('simpleLinearRegression'!==E.name)throw new TypeError('not a SLR model');return new L(!0,E)}}_.exports=L},function(_,P){'use strict';function S(R,L){return R-L}P.sum=function(L){for(var R=0,E=0;E<L.length;E++)R+=L[E];return R},P.max=function(L){for(var R=L[0],E=L.length,T=1;T<E;T++)L[T]>R&&(R=L[T]);return R},P.min=function(L){for(var R=L[0],E=L.length,T=1;T<E;T++)L[T]<R&&(R=L[T]);return R},P.minMax=function(L){for(var E=L[0],T=L[0],O=L.length,G=1;G<O;G++)L[G]<E&&(E=L[G]),L[G]>T&&(T=L[G]);return{min:E,max:T}},P.arithmeticMean=function(L){for(var E=0,T=L.length,O=0;O<T;O++)E+=L[O];return E/T},P.mean=P.arithmeticMean,P.geometricMean=function(L){for(var E=1,T=L.length,O=0;O<T;O++)E*=L[O];return _Mathpow(E,1/T)},P.logMean=function(L){for(var E=0,T=L.length,O=0;O<T;O++)E+=_Mathlog(L[O]);return E/T},P.grandMean=function(L,E){for(var T=0,O=0,G=L.length,W=0;W<G;W++)T+=E[W]*L[W],O+=E[W];return T/O},P.truncatedMean=function(L,E,T){T===void 0&&(T=!1),T||(L=[].concat(L).sort(S));for(var O=L.length,G=_Mathfloor(O*E),W=0,Z=G;Z<O-G;Z++)W+=L[Z];return W/(O-2*G)},P.harmonicMean=function(L){for(var E=0,T=L.length,O=0;O<T;O++){if(0===L[O])throw new RangeError('value at index '+O+'is zero');E+=1/L[O]}return T/E},P.contraHarmonicMean=function(L){for(var E=0,T=0,O=L.length,G=0;G<O;G++)E+=L[G]*L[G],T+=L[G];if(0>T)throw new RangeError('sum of values is negative');return E/T},P.median=function(L,E){E===void 0&&(E=!1),E||(L=[].concat(L).sort(S));var T=L.length,O=_Mathfloor(T/2);return 0==T%2?0.5*(L[O-1]+L[O]):L[O]},P.variance=function(L,E){E===void 0&&(E=!0);for(var T=P.mean(L),O=0,G=L.length,W=0,Z;W<G;W++)Z=L[W]-T,O+=Z*Z;return E?O/(G-1):O/G},P.standardDeviation=function(L,E){return _Mathsqrt(P.variance(L,E))},P.standardError=function(L){return P.standardDeviation(L)/_Mathsqrt(L.length)},P.robustMeanAndStdev=function(L){var E=0,T=0,O=L.length,G=0;for(G=0;G<O;G++)E+=L[G];E/=O;var W=Array(O);for(G=0;G<O;G++)W[G]=_Mathabs(L[G]-E);return W.sort(S),T=1==O%2?W[(O-1)/2]/0.6745:0.5*(W[O/2]+W[O/2-1])/0.6745,{mean:E,stdev:T}},P.quartiles=function(L,E){'undefined'==typeof E&&(E=!1),E||(L=[].concat(L).sort(S));var T=L.length/4,O=L[_Mathceil(T)-1],G=P.median(L,!0),W=L[_Mathceil(3*T)-1];return{q1:O,q2:G,q3:W}},P.pooledStandardDeviation=function(L,E){return _Mathsqrt(P.pooledVariance(L,E))},P.pooledVariance=function(L,E){'undefined'==typeof E&&(E=!0);for(var T=0,O=0,G=L.length,W=0;W<G;W++){var Z=L[W],Q=P.variance(Z);T+=(Z.length-1)*Q,O+=E?Z.length-1:Z.length}return T/O},P.mode=function(L){var E=L.length,T=Array(E),O;for(O=0;O<E;O++)T[O]=0;var G=Array(E),W=0;for(O=0;O<E;O++){var Z=G.indexOf(L[O]);0<=Z?T[Z]++:(G[W]=L[O],T[W]=1,W++)}var Q=0,J=0;for(O=0;O<W;O++)T[O]>Q&&(Q=T[O],J=O);return G[J]},P.covariance=function(L,E,T){'undefined'==typeof T&&(T=!0);var O=P.mean(L),G=P.mean(E);if(L.length!==E.length)throw'Vectors do not have the same dimensions';for(var W=0,Z=L.length,Q=0;Q<Z;Q++){var J=L[Q]-O,$=E[Q]-G;W+=J*$}return T?W/(Z-1):W/Z},P.skewness=function(L,E){'undefined'==typeof E&&(E=!0);for(var T=P.mean(L),O=0,G=0,W=L.length,Z=0,Q;Z<W;Z++)Q=L[Z]-T,O+=Q*Q,G+=Q*Q*Q;var J=O/W,$=G/W,ee=$/_Mathpow(J,3/2);if(E){var te=_Mathsqrt(W*(W-1));return te/(W-2)*ee}return ee},P.kurtosis=function(L,E){'undefined'==typeof E&&(E=!0);for(var T=P.mean(L),O=L.length,G=0,W=0,Z=0,Q;Z<O;Z++)Q=L[Z]-T,G+=Q*Q,W+=Q*Q*Q*Q;var J=G/O,$=W/O;if(E){var ee=G/(O-1),ae=W/(ee*ee);return O*(O+1)/((O-1)*(O-2)*(O-3))*ae-3*((O-1)*(O-1)/((O-2)*(O-3)))}return $/(J*J)-3},P.entropy=function(L,E){'undefined'==typeof E&&(E=0);for(var T=0,O=L.length,G=0;G<O;G++)T+=L[G]*_Mathlog(L[G]+E);return-T},P.weightedMean=function(L,E){for(var T=0,O=L.length,G=0;G<O;G++)T+=L[G]*E[G];return T},P.weightedStandardDeviation=function(L,E){return _Mathsqrt(P.weightedVariance(L,E))},P.weightedVariance=function(L,E){for(var T=P.weightedMean(L,E),O=0,G=L.length,W=0,Z=0,Q=0;Q<G;Q++){var J=L[Q]-T,$=E[Q];O+=$*(J*J),Z+=$,W+=$*$}return O*(Z/(Z*Z-W))},P.center=function(L,E){'undefined'==typeof E&&(E=!1);var T=L;E||(T=[].concat(L));for(var O=P.mean(T),G=T.length,W=0;W<G;W++)T[W]-=O},P.standardize=function(L,E,T){'undefined'==typeof E&&(E=P.standardDeviation(L)),'undefined'==typeof T&&(T=!1);for(var O=L.length,G=T?L:Array(O),W=0;W<O;W++)G[W]=L[W]/E;return G},P.cumulativeSum=function(L){var E=L.length,T=Array(E);T[0]=L[0];for(var O=1;O<E;O++)T[O]=T[O-1]+L[O];return T}},function(_){'use strict';_.exports={0:'',1:'stream end',2:'need dictionary','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'}},function(_){var I=function(){return this}();try{I=I||Function('return this')()||(1,eval)('this')}catch(S){'object'==typeof window&&(I=window)}_.exports=I},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0});var S=P.methods={luma709(L,E){return 6966*L[E]+23436*L[E+1]+2366*L[E+2]>>15},luma601(L,E){return 9798*L[E]+19235*L[E+1]+3735*L[E+2]>>15},maximum(L,E){return _Mathmax(L[E],L[E+1],L[E+2])},minimum(L,E){return _Mathmin(L[E],L[E+1],L[E+2])},average(L,E){return(L[E]+L[E+1]+L[E+2])/3>>0},minmax(L,E){return(_Mathmax(L[E],L[E+1],L[E+2])+_Mathmin(L[E],L[E+1],L[E+2]))/2},red(L,E){return L[E]},green(L,E){return L[E+1]},blue(L,E){return L[E+2]},cyan(L,E,T){var O=S.black(L,E,T);return(T.maxValue-L[0]-O)/(1-O/T.maxValue)>>0},magenta(L,E,T){var O=S.black(L,E,T);return(T.maxValue-L[1]-O)/(1-O/T.maxValue)>>0},yellow(L,E,T){var O=S.black(L,E,T);return(T.maxValue-L[2]-O)/(1-O/T.maxValue)>>0},black(L,E,T){return _Mathmin(T.maxValue-L[E],T.maxValue-L[E+1],T.maxValue-L[E+2])},hue(L,E,T){var O=S.min(L,E),G=S.max(L,E);if(G===O)return 0;var W=0,Z=G-O;switch(G){case L[E]:W=(L[E+1]-L[E+2])/Z+(L[E+1]<L[E+2]?6:0);break;case L[E+1]:W=(L[E+2]-L[E])/Z+2;break;case L[E+2]:W=(L[E]-L[E+1])/Z+4;break;default:throw new Error('unreachable');}return W/6*T.maxValue>>0},saturation(L,E,T){var O=S.min(L,E),G=S.max(L,E);return 0===G?0:(G-O)/G*T.maxValue},lightness(L,E){var T=S.min(L,E),O=S.max(L,E);return(O+T)/2}};Object.defineProperty(S,'luminosity',{enumerable:!1,value:S.lightness}),Object.defineProperty(S,'luminance',{enumerable:!1,value:S.lightness}),Object.defineProperty(S,'min',{enumerable:!1,value:S.minimum}),Object.defineProperty(S,'max',{enumerable:!1,value:S.maximum}),Object.defineProperty(S,'brightness',{enumerable:!1,value:S.maximum});P.names=Object.keys(S)},function(_,P,I){'use strict';function S(ve){return ve&&ve.__esModule?ve:{default:ve}}Object.defineProperty(P,'__esModule',{value:!0}),P.names=P.methods=void 0;var R=I(117),L=S(R),E=I(118),T=S(E),O=I(119),G=S(O),W=I(120),Z=S(W),Q=I(122),J=S(Q),$=I(123),ee=S($),te=I(124),ae=S(te),ie=I(125),ne=S(ie),oe=I(126),le=S(oe),se=I(127),de=S(se),he=I(128),ue=S(he),ce=I(129),pe=S(ce),ge=I(130),fe=S(ge),_e=I(131),be=S(_e),xe=I(132),ye=S(xe),we=P.methods={huang:L.default,intermodes:T.default,isodata:G.default,li:Z.default,maxentropy:J.default,mean:ee.default,minerror:ae.default,minimum:ne.default,moments:le.default,otsu:de.default,percentile:ue.default,renyientropy:pe.default,shanbhag:fe.default,triangle:be.default,yen:ye.default},ke=P.names=['threshold'].concat(Object.keys(we))},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L={}){return L=Object.assign({},L),L.algorithm='fft',this.convolution(R,L)}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.encode=function(O){var W=O.length,Z='',G;for(G=0;G<W;G+=3)Z+=L[O[G]>>2],Z+=L[(3&O[G])<<4|O[G+1]>>4],Z+=L[(15&O[G+1])<<2|O[G+2]>>6],Z+=L[63&O[G+2]];return 2==W%3?Z=Z.substring(0,Z.length-1)+'=':1==W%3&&(Z=Z.substring(0,Z.length-2)+'=='),Z},P.decode=function(O){var G=0.75*O.length,W=O.length,Z,Q=0,J,$,ee,te;'='===O[O.length-1]&&(G--,'='===O[O.length-2]&&G--);var ae=new Uint8Array(G);for(Z=0;Z<W;Z+=4)J=E[O.charCodeAt(Z)],$=E[O.charCodeAt(Z+1)],ee=E[O.charCodeAt(Z+2)],te=E[O.charCodeAt(Z+3)],ae[Q++]=J<<2|$>>4,ae[Q++]=(15&$)<<4|ee>>2,ae[Q++]=(3&ee)<<6|63&te;return ae};for(var L='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',E=new Uint8Array(256),T=0;T<L.length;T++)E[L.charCodeAt(T)]=T},function(_,P,I){'use strict';function R(G,W,Z){return 0>Z&&(Z+=1),1<Z&&(Z-=1),Z<1/6?G+6*(W-G)*Z:Z<1/2?W:Z<2/3?G+6*((W-G)*(2/3-Z)):G}function L(G,W,Z){var Q,J,$,ee,te,ae;return W/=100,Z/=100,0===W?ee=te=ae=255*Z:(J=0.5>=Z?Z*(W+1):Z+W-Z*W,Q=2*Z-J,$=G/360,ee=R(Q,J,$+1/3),te=R(Q,J,$),ae=R(Q,J,$-1/3)),{r:ee,g:te,b:ae}}Object.defineProperty(P,'__esModule',{value:!0}),P.css2array=function(G){var W=(0,O.cssColor)(G);return[W.r,W.g,W.b,_Mathround(255*W.a/100)]},P.getDistinctColors=function(G){for(var W=Array(G),Z=0,Q=0;360>Q;Q+=360/G){Z++;var J=L(Q,100,30+15*(Z%4));W[Z-1]=[_Mathround(255*J.r),_Mathround(255*J.g),_Mathround(255*J.b)]}return W},P.getRandomColor=function(){return[_Mathfloor(256*Math.random()),_Mathfloor(256*Math.random()),_Mathfloor(256*Math.random())]};var O=I(170)},function(_,P){'use strict';function S(E){if('string'==typeof E){var T=E[E.length-1];E=parseFloat(E),'%'===T&&(E/=100)}return E}Object.defineProperty(P,'__esModule',{value:!0}),P.getFactor=S,P.getThreshold=function(E,T){if(!T)throw Error('getThreshold : the maxValue should be specified');if('string'==typeof E){var O=E[E.length-1];if('%'!==O)throw Error('getThreshold : if the value is a string it must finish by %');return parseFloat(E)/100*T}if('number'==typeof E)return 1>E?E*T:E;throw Error('getThreshold : the value is not valid')},P.factorDimensions=function(E,T,O){E=S(E);var G=_Mathround(E*T),W=_Mathround(E*O);return 0>=G&&(G=1),0>=W&&(W=1),{width:G,height:W}}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0});var S=P.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],R=P.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],L=P.GRADIENT_X=[[-1,0,1],[-2,0,2],[-1,0,1]],E=P.GRADIENT_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],T=P.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],O=P.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]]},function(_){_.exports=function(I,S,R){return S*=(50>R?R:100-R)/100,console.log('s',S),{h:I,s:100*(2*S/(R+S)),v:R+S}}},function(_,P,I){var S=I(36),R=I(20);_.exports=function(L,E,T){var O=S(L,E,T);return R(O.h,O.s,O.v)}},function(_){_.exports=function(I,S,R,L){return L/=100,{r:parseInt(255*(1-L)+L*I,10),g:parseInt(255*(1-L)+L*S,10),b:parseInt(255*(1-L)+L*R,10)}}},function(_,P,I){var S=Object.prototype.hasOwnProperty;_.exports=P=function(L,E){return S.call(E,L)},P.version=I(189).version},function(_,P,I){var S=I(193);_.exports=_NumberisInteger||function(R){return'number'==typeof R&&S(R)&&_Mathfloor(R)===R}},function(_,P){(function(){var R=0?{}:P;var L={release:'0.3.0',date:'2013-03'};R.toString=function(){return'version '+L.release+', released '+L.date};for(var E=0,T=null,O=null,G={init:function(Q){if(0!==Q&&0==(Q&Q-1))E=Q,G._initArray(),G._makeBitReversalTable(),G._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(Q,J){G.fft(Q,J,1)},ifft1d:function(Q,J){var $=1/E;G.fft(Q,J,-1);for(var ee=0;ee<E;ee++)Q[ee]*=$,J[ee]*=$},bt1d:function(Q,J){G.fft(Q,J,-1)},fft2d:function(Q,J){for(var $=[],ee=[],te=0,ae=0;ae<E;ae++){te=ae*E;for(var ie=0;ie<E;ie++)$[ie]=Q[ie+te],ee[ie]=J[ie+te];G.fft1d($,ee);for(var ne=0;ne<E;ne++)Q[ne+te]=$[ne],J[ne+te]=ee[ne]}for(var oe=0;oe<E;oe++){for(var le=0;le<E;le++)te=oe+le*E,$[le]=Q[te],ee[le]=J[te];G.fft1d($,ee);for(var se=0;se<E;se++)te=oe+se*E,Q[te]=$[se],J[te]=ee[se]}},ifft2d:function(Q,J){for(var $=[],ee=[],te=0,ae=0;ae<E;ae++){te=ae*E;for(var ie=0;ie<E;ie++)$[ie]=Q[ie+te],ee[ie]=J[ie+te];G.ifft1d($,ee);for(var ne=0;ne<E;ne++)Q[ne+te]=$[ne],J[ne+te]=ee[ne]}for(var oe=0;oe<E;oe++){for(var le=0;le<E;le++)te=oe+le*E,$[le]=Q[te],ee[le]=J[te];G.ifft1d($,ee);for(var se=0;se<E;se++)te=oe+se*E,Q[te]=$[se],J[te]=ee[se]}},fft:function(Q,J,$){for(var he=E>>2,ue=0,ee,te,ae,ie,ne,oe,le,se,de;ue<E;ue++)ie=T[ue],ue<ie&&(ne=Q[ue],Q[ue]=Q[ie],Q[ie]=ne,ne=J[ue],J[ue]=J[ie],J[ie]=ne);for(var ce=1;ce<E;ce<<=1){te=0,ee=E/(ce<<1);for(var pe=0;pe<ce;pe++){oe=O[te+he],le=$*O[te];for(var ge=pe;ge<E;ge+=ce<<1)ae=ge+ce,se=oe*Q[ae]+le*J[ae],de=oe*J[ae]-le*Q[ae],Q[ae]=Q[ge]-se,Q[ge]+=se,J[ae]=J[ge]-de,J[ge]+=de;te+=ee}}},_initArray:function(){T='undefined'==typeof Uint32Array?[]:new Uint32Array(E),O='undefined'==typeof Float64Array?[]:new Float64Array(1.25*E)},_paddingZero:function(){},_makeBitReversalTable:function(){var Q=0,J=0,$=0;for(T[0]=0;++Q<E;){for($=E>>1;$<=J;)J-=$,$>>=1;J+=$,T[Q]=J}},_makeCosSinTable:function(){var Q=E>>1,J=E>>2,$=E>>3,te=_Mathsin(_MathPI/E),ae=2*te*te,ie=_Mathsqrt(ae*(2-ae)),ne=O[J]=1,oe=O[0]=0;te=2*ae;for(var le=1;le<$;le++)ne-=ae,ae+=te*ne,oe+=ie,ie-=te*oe,O[le]=oe,O[J-le]=ne;0!=$&&(O[$]=0.7071067811865476);for(var se=0;se<J;se++)O[Q-se]=O[se];for(var de=0;de<Q+J;de++)O[de+Q]=-O[de]}},W=['init','fft1d','ifft1d','fft2d','ifft2d'],Z=0;Z<W.length;Z++)R[W[Z]]=G[W[Z]];return R.bt=G.bt1d,R.fft=G.fft1d,R.ifft=G.ifft1d,R}).call(this)},function(module,exports,__webpack_require__){'use strict';function abstractMatrix(superCtor){function checkDimensions(_,P){if(_.rows!==P.rows||_.columns!==P.columns)throw new RangeError('Matrices dimensions must be equal')}function compareNumbers(_,P){return _-P}function fillTemplateFunction(_,P){for(var I in P)_=_.replace(new RegExp('%'+I+'%','g'),P[I]);return _}superCtor===void 0&&(superCtor=Object);class Matrix extends superCtor{static get[Symbol.species](){return this}static from1DArray(_,P,I){if(_*P!==I.length)throw new RangeError('Data length does not match given dimensions');for(var R=new this(_,P),L=0;L<_;L++)for(var E=0;E<P;E++)R.set(L,E,I[L*P+E]);return R}static rowVector(_){for(var P=new this(1,_.length),I=0;I<_.length;I++)P.set(0,I,_[I]);return P}static columnVector(_){for(var P=new this(_.length,1),I=0;I<_.length;I++)P.set(I,0,_[I]);return P}static empty(_,P){return new this(_,P)}static zeros(_,P){return this.empty(_,P).fill(0)}static ones(_,P){return this.empty(_,P).fill(1)}static rand(_,P,I){I===void 0&&(I=Math.random);for(var S=this.empty(_,P),R=0;R<_;R++)for(var L=0;L<P;L++)S.set(R,L,I());return S}static randInt(_,P,I,S){I===void 0&&(I=1e3),S===void 0&&(S=Math.random);for(var R=this.empty(_,P),L=0;L<_;L++)for(var E=0,T;E<P;E++)T=_Mathfloor(S()*I),R.set(L,E,T);return R}static eye(_,P,I){P===void 0&&(P=_),I===void 0&&(I=1);for(var S=_Mathmin(_,P),R=this.zeros(_,P),L=0;L<S;L++)R.set(L,L,I);return R}static diag(_,P,I){var S=_.length;P===void 0&&(P=S),I===void 0&&(I=P);for(var R=_Mathmin(S,P,I),L=this.zeros(P,I),E=0;E<R;E++)L.set(E,E,_[E]);return L}static min(_,P){_=this.checkMatrix(_),P=this.checkMatrix(P);for(var I=_.rows,S=_.columns,R=new this(I,S),L=0;L<I;L++)for(var E=0;E<S;E++)R.set(L,E,_Mathmin(_.get(L,E),P.get(L,E)));return R}static max(_,P){_=this.checkMatrix(_),P=this.checkMatrix(P);for(var I=_.rows,S=_.columns,R=new this(I,S),L=0;L<I;L++)for(var E=0;E<S;E++)R.set(L,E,_Mathmax(_.get(L,E),P.get(L,E)));return R}static checkMatrix(_){return Matrix.isMatrix(_)?_:new this(_)}static isMatrix(_){return null!=_&&'Matrix'===_.klass}get size(){return this.rows*this.columns}apply(_){if('function'!=typeof _)throw new TypeError('callback must be a function');for(var P=this.rows,I=this.columns,S=0;S<P;S++)for(var R=0;R<I;R++)_.call(this,S,R);return this}to1DArray(){for(var _=Array(this.size),P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)_[P*this.columns+I]=this.get(P,I);return _}to2DArray(){for(var _=Array(this.rows),P=0;P<this.rows;P++){_[P]=Array(this.columns);for(var I=0;I<this.columns;I++)_[P][I]=this.get(P,I)}return _}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var _=0;_<this.rows;_++)for(var P=0;P<=_;P++)if(this.get(_,P)!==this.get(P,_))return!1;return!0}return!1}set(){throw new Error('set method is unimplemented')}get(){throw new Error('get method is unimplemented')}repeat(_,P){_=_||1,P=P||1;for(var I=new this.constructor[Symbol.species](this.rows*_,this.columns*P),S=0;S<_;S++)for(var R=0;R<P;R++)I.setSubMatrix(this,this.rows*S,this.columns*R);return I}fill(_){for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,_);return this}neg(){return this.mulS(-1)}getRow(_){util.checkRowIndex(this,_);for(var P=Array(this.columns),I=0;I<this.columns;I++)P[I]=this.get(_,I);return P}getRowVector(_){return this.constructor.rowVector(this.getRow(_))}setRow(_,P){util.checkRowIndex(this,_),P=util.checkRowVector(this,P);for(var I=0;I<this.columns;I++)this.set(_,I,P[I]);return this}swapRows(_,P){util.checkRowIndex(this,_),util.checkRowIndex(this,P);for(var I=0,S;I<this.columns;I++)S=this.get(_,I),this.set(_,I,this.get(P,I)),this.set(P,I,S);return this}getColumn(_){util.checkColumnIndex(this,_);for(var P=Array(this.rows),I=0;I<this.rows;I++)P[I]=this.get(I,_);return P}getColumnVector(_){return this.constructor.columnVector(this.getColumn(_))}setColumn(_,P){util.checkColumnIndex(this,_),P=util.checkColumnVector(this,P);for(var I=0;I<this.rows;I++)this.set(I,_,P[I]);return this}swapColumns(_,P){util.checkColumnIndex(this,_),util.checkColumnIndex(this,P);for(var I=0,S;I<this.rows;I++)S=this.get(I,_),this.set(I,_,this.get(I,P)),this.set(I,P,S);return this}addRowVector(_){_=util.checkRowVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)+_[I]);return this}subRowVector(_){_=util.checkRowVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)-_[I]);return this}mulRowVector(_){_=util.checkRowVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)*_[I]);return this}divRowVector(_){_=util.checkRowVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)/_[I]);return this}addColumnVector(_){_=util.checkColumnVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)+_[P]);return this}subColumnVector(_){_=util.checkColumnVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)-_[P]);return this}mulColumnVector(_){_=util.checkColumnVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)*_[P]);return this}divColumnVector(_){_=util.checkColumnVector(this,_);for(var P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)/_[P]);return this}mulRow(_,P){util.checkRowIndex(this,_);for(var I=0;I<this.columns;I++)this.set(_,I,this.get(_,I)*P);return this}mulColumn(_,P){util.checkColumnIndex(this,_);for(var I=0;I<this.rows;I++)this.set(I,_,this.get(I,_)*P);return this}max(){for(var _=this.get(0,0),P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.get(P,I)>_&&(_=this.get(P,I));return _}maxIndex(){for(var _=this.get(0,0),P=[0,0],I=0;I<this.rows;I++)for(var S=0;S<this.columns;S++)this.get(I,S)>_&&(_=this.get(I,S),P[0]=I,P[1]=S);return P}min(){for(var _=this.get(0,0),P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)this.get(P,I)<_&&(_=this.get(P,I));return _}minIndex(){for(var _=this.get(0,0),P=[0,0],I=0;I<this.rows;I++)for(var S=0;S<this.columns;S++)this.get(I,S)<_&&(_=this.get(I,S),P[0]=I,P[1]=S);return P}maxRow(_){util.checkRowIndex(this,_);for(var P=this.get(_,0),I=1;I<this.columns;I++)this.get(_,I)>P&&(P=this.get(_,I));return P}maxRowIndex(_){util.checkRowIndex(this,_);for(var P=this.get(_,0),I=[_,0],S=1;S<this.columns;S++)this.get(_,S)>P&&(P=this.get(_,S),I[1]=S);return I}minRow(_){util.checkRowIndex(this,_);for(var P=this.get(_,0),I=1;I<this.columns;I++)this.get(_,I)<P&&(P=this.get(_,I));return P}minRowIndex(_){util.checkRowIndex(this,_);for(var P=this.get(_,0),I=[_,0],S=1;S<this.columns;S++)this.get(_,S)<P&&(P=this.get(_,S),I[1]=S);return I}maxColumn(_){util.checkColumnIndex(this,_);for(var P=this.get(0,_),I=1;I<this.rows;I++)this.get(I,_)>P&&(P=this.get(I,_));return P}maxColumnIndex(_){util.checkColumnIndex(this,_);for(var P=this.get(0,_),I=[0,_],S=1;S<this.rows;S++)this.get(S,_)>P&&(P=this.get(S,_),I[0]=S);return I}minColumn(_){util.checkColumnIndex(this,_);for(var P=this.get(0,_),I=1;I<this.rows;I++)this.get(I,_)<P&&(P=this.get(I,_));return P}minColumnIndex(_){util.checkColumnIndex(this,_);for(var P=this.get(0,_),I=[0,_],S=1;S<this.rows;S++)this.get(S,_)<P&&(P=this.get(S,_),I[0]=S);return I}diag(){for(var _=_Mathmin(this.rows,this.columns),P=Array(_),I=0;I<_;I++)P[I]=this.get(I,I);return P}sum(_){return'row'===_?util.sumByRow(this):'column'===_?util.sumByColumn(this):util.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var _=1,P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)_*=this.get(P,I);return _}cumulativeSum(){for(var _=0,P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)_+=this.get(P,I),this.set(P,I,_);return this}dot(_){Matrix.isMatrix(_)&&(_=_.to1DArray());var P=this.to1DArray();if(P.length!==_.length)throw new RangeError('vectors do not have the same size');for(var I=0,S=0;S<P.length;S++)I+=P[S]*_[S];return I}mmul(_){_=this.constructor.checkMatrix(_),this.columns!==_.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');for(var P=this.rows,I=this.columns,S=_.columns,R=new this.constructor[Symbol.species](P,S),L=Array(I),E=0;E<S;E++){for(var T=0;T<I;T++)L[T]=_.get(T,E);for(var O=0,G;O<P;O++){for(G=0,T=0;T<I;T++)G+=this.get(O,T)*L[T];R.set(O,E,G)}}return R}strassen2x2(_){var P=new this.constructor[Symbol.species](2,2);const I=this.get(0,0),S=_.get(0,0),R=this.get(0,1),L=_.get(0,1),E=this.get(1,0),T=_.get(1,0),O=this.get(1,1),G=_.get(1,1),W=(I+O)*(S+G),Z=(E+O)*S,Q=I*(L-G),J=O*(T-S),$=(I+R)*G;return P.set(0,0,W+J-$+(R-O)*(T+G)),P.set(0,1,Q+$),P.set(1,0,Z+J),P.set(1,1,W-Z+Q+(E-I)*(S+L)),P}strassen3x3(_){var P=new this.constructor[Symbol.species](3,3);const I=this.get(0,0),S=this.get(0,1),R=this.get(0,2),L=this.get(1,0),E=this.get(1,1),T=this.get(1,2),O=this.get(2,0),G=this.get(2,1),W=this.get(2,2),Z=_.get(0,0),Q=_.get(0,1),J=_.get(0,2),$=_.get(1,0),ee=_.get(1,1),te=_.get(1,2),ae=_.get(2,0),ie=_.get(2,1),ne=_.get(2,2),le=(I-L)*(-Q+ee),de=(-I+L+E)*(Z-Q+ee),he=(L+E)*(-Z+Q),ue=I*Z,ce=(-I+O+G)*(Z-J+te),pe=(-I+O)*(J-te),ge=(O+G)*(-Z+J),be=(-R+G+W)*(ee+ae-ie),xe=(R-W)*(ee-ie),ye=R*ae,we=(G+W)*(-ae+ie),ke=(-R+E+T)*(te+ae-ne),ve=(R-T)*(te-ne),Me=(E+T)*(-ae+ne);return P.set(0,0,ue+ye+S*$),P.set(0,1,(I+S+R-L-E-G-W)*ee+de+he+ue+be+ye+we),P.set(0,2,ue+ce+ge+(I+S+R-E-T-O-G)*te+ye+ke+Me),P.set(1,0,le+E*(-Z+Q+$-ee-te-ae+ne)+de+ue+ye+ke+ve),P.set(1,1,le+de+he+ue+T*ie),P.set(1,2,ye+ke+ve+Me+L*J),P.set(2,0,ue+ce+pe+G*(-Z+J+$-ee-te-ae+ie)+be+xe+ye),P.set(2,1,be+xe+ye+we+O*Q),P.set(2,2,ue+ce+pe+ge+W*ne),P}mmulStrassen(_){function P(W,Z,Q){var J=W.rows,$=W.columns;if(J===Z&&$===Q)return W;var ee=Matrix.zeros(Z,Q);return ee=ee.setSubMatrix(W,0,0),ee}function I(W,Z,Q,J){if(512>=Q||512>=J)return W.mmul(Z);1==Q%2&&1==J%2?(W=P(W,Q+1,J+1),Z=P(Z,Q+1,J+1)):1==Q%2?(W=P(W,Q+1,J),Z=P(Z,Q+1,J)):1==J%2&&(W=P(W,Q,J+1),Z=P(Z,Q,J+1));var $=parseInt(W.rows/2),ee=parseInt(W.columns/2),te=W.subMatrix(0,$-1,0,ee-1),ae=Z.subMatrix(0,$-1,0,ee-1),ie=W.subMatrix(0,$-1,ee,W.columns-1),ne=Z.subMatrix(0,$-1,ee,Z.columns-1),oe=W.subMatrix($,W.rows-1,0,ee-1),le=Z.subMatrix($,Z.rows-1,0,ee-1),se=W.subMatrix($,W.rows-1,ee,W.columns-1),de=Z.subMatrix($,Z.rows-1,ee,Z.columns-1),he=I(Matrix.add(te,se),Matrix.add(ae,de),$,ee),ue=I(Matrix.add(oe,se),ae,$,ee),ce=I(te,Matrix.sub(ne,de),$,ee),pe=I(se,Matrix.sub(le,ae),$,ee),ge=I(Matrix.add(te,ie),de,$,ee),fe=I(Matrix.sub(oe,te),Matrix.add(ae,ne),$,ee),_e=I(Matrix.sub(ie,se),Matrix.add(le,de),$,ee),be=Matrix.add(he,pe);be.sub(ge),be.add(_e);var xe=Matrix.add(ce,ge),ye=Matrix.add(ue,pe),we=Matrix.sub(he,ue);we.add(ce),we.add(fe);var ke=Matrix.zeros(2*be.rows,2*be.columns);return ke=ke.setSubMatrix(be,0,0),ke=ke.setSubMatrix(xe,be.rows,0),ke=ke.setSubMatrix(ye,0,be.columns),ke=ke.setSubMatrix(we,be.rows,be.columns),ke.subMatrix(0,Q-1,0,J-1)}var S=this.clone(),R=S.rows,L=S.columns,E=_.rows,T=_.columns;L!==E&&console.warn(`Multiplying ${R} x ${L} and ${E} x ${T} matrix: dimensions do not match.`);var O=_Mathmax(R,E),G=_Mathmax(L,T);return S=P(S,O,G),_=P(_,O,G),I(S,_,O,G)}scaleRows(_,P){if(_=void 0===_?0:_,P=void 0===P?1:P,_>=P)throw new RangeError('min should be strictly smaller than max');for(var I=this.constructor.empty(this.rows,this.columns),S=0,R;S<this.rows;S++)R=arrayUtils.scale(this.getRow(S),{min:_,max:P}),I.setRow(S,R);return I}scaleColumns(_,P){if(_=void 0===_?0:_,P=void 0===P?1:P,_>=P)throw new RangeError('min should be strictly smaller than max');for(var I=this.constructor.empty(this.rows,this.columns),S=0,R;S<this.columns;S++)R=arrayUtils.scale(this.getColumn(S),{min:_,max:P}),I.setColumn(S,R);return I}kroneckerProduct(_){_=this.constructor.checkMatrix(_);for(var P=this.rows,I=this.columns,S=_.rows,R=_.columns,L=new this.constructor[Symbol.species](P*S,I*R),E=0;E<P;E++)for(var T=0;T<I;T++)for(var O=0;O<S;O++)for(var G=0;G<R;G++)L[S*E+O][R*T+G]=this.get(E,T)*_.get(O,G);return L}transpose(){for(var _=new this.constructor[Symbol.species](this.columns,this.rows),P=0;P<this.rows;P++)for(var I=0;I<this.columns;I++)_.set(I,P,this.get(P,I));return _}sortRows(_){_===void 0&&(_=compareNumbers);for(var P=0;P<this.rows;P++)this.setRow(P,this.getRow(P).sort(_));return this}sortColumns(_){_===void 0&&(_=compareNumbers);for(var P=0;P<this.columns;P++)this.setColumn(P,this.getColumn(P).sort(_));return this}subMatrix(_,P,I,S){util.checkRange(this,_,P,I,S);for(var R=new this.constructor[Symbol.species](P-_+1,S-I+1),L=_;L<=P;L++)for(var E=I;E<=S;E++)R[L-_][E-I]=this.get(L,E);return R}subMatrixRow(_,P,I){if(void 0===P&&(P=0),void 0===I&&(I=this.columns-1),P>I||0>P||P>=this.columns||0>I||I>=this.columns)throw new RangeError('Argument out of range');for(var S=new this.constructor[Symbol.species](_.length,I-P+1),R=0;R<_.length;R++)for(var L=P;L<=I;L++){if(0>_[R]||_[R]>=this.rows)throw new RangeError('Row index out of range: '+_[R]);S.set(R,L-P,this.get(_[R],L))}return S}subMatrixColumn(_,P,I){if(void 0===P&&(P=0),void 0===I&&(I=this.rows-1),P>I||0>P||P>=this.rows||0>I||I>=this.rows)throw new RangeError('Argument out of range');for(var S=new this.constructor[Symbol.species](I-P+1,_.length),R=0;R<_.length;R++)for(var L=P;L<=I;L++){if(0>_[R]||_[R]>=this.columns)throw new RangeError('Column index out of range: '+_[R]);S.set(L-P,R,this.get(L,_[R]))}return S}setSubMatrix(_,P,I){_=this.constructor.checkMatrix(_);var S=P+_.rows-1,R=I+_.columns-1;util.checkRange(this,P,S,I,R);for(var L=0;L<_.rows;L++)for(var E=0;E<_.columns;E++)this[P+L][I+E]=_.get(L,E);return this}selection(_,P){for(var I=util.checkIndices(this,_,P),S=new this.constructor[Symbol.species](_.length,P.length),R=0,L;R<I.row.length;R++){L=I.row[R];for(var E=0,T;E<I.column.length;E++)T=I.column[E],S[R][E]=this.get(L,T)}return S}trace(){for(var _=_Mathmin(this.rows,this.columns),P=0,I=0;I<_;I++)P+=this.get(I,I);return P}transposeView(){return new MatrixTransposeView(this)}rowView(_){return util.checkRowIndex(this,_),new MatrixRowView(this,_)}columnView(_){return util.checkColumnIndex(this,_),new MatrixColumnView(this,_)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(_,P,I,S){return new MatrixSubView(this,_,P,I,S)}selectionView(_,P){return new MatrixSelectionView(this,_,P)}det(){if(this.isSquare()){var _,P,I,S;if(2===this.columns)return _=this.get(0,0),P=this.get(0,1),I=this.get(1,0),S=this.get(1,1),_*S-P*I;if(3===this.columns){var R,L,E;return R=this.selectionView([1,2],[1,2]),L=this.selectionView([1,2],[0,2]),E=this.selectionView([1,2],[0,1]),_=this.get(0,0),P=this.get(0,1),I=this.get(0,2),_*R.det()-P*L.det()+I*E.det()}return new LuDecomposition(this).determinant}throw Error('Determinant can only be calculated for a square matrix.')}pseudoInverse(_){void 0===_&&(_=_NumberEPSILON);for(var P=new SvDecomposition(this,{autoTranspose:!0}),I=P.leftSingularVectors,S=P.rightSingularVectors,R=P.diagonal,L=0;L<R.length;L++)R[L]=_Mathabs(R[L])>_?1/R[L]:0;return R=this.constructor[Symbol.species].diag(R),S.mmul(R.mmul(I.transposeView()))}}Matrix.prototype.klass='Matrix',Matrix.random=Matrix.rand,Matrix.diagonal=Matrix.diag,Matrix.prototype.diagonal=Matrix.prototype.diag,Matrix.identity=Matrix.eye,Matrix.prototype.negate=Matrix.prototype.neg,Matrix.prototype.tensorProduct=Matrix.prototype.kroneckerProduct,Matrix.prototype.determinant=Matrix.prototype.det;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,staticMethodWithOneArg=staticMethodWithArgs,operators=[['+','add'],['-','sub','subtract'],['*','mul','multiply'],['/','div','divide'],['%','mod','modulus'],['&','and'],['|','or'],['^','xor'],['<<','leftShift'],['>>','signPropagatingRightShift'],['>>>','rightShift','zeroFillRightShift']],i;for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+'S',op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+'M',op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(i=1;i<operator.length;i++)Matrix.prototype[operator[i]]=inplaceOp,Matrix.prototype[operator[i]+'S']=inplaceOpS,Matrix.prototype[operator[i]+'M']=inplaceOpM,Matrix[operator[i]]=staticOp}var methods=[['~','not']];['abs','acos','acosh','asin','asinh','atan','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','log','log1p','log10','log2','round','sign','sin','sinh','sqrt','tan','tanh','trunc'].forEach(function(_){methods.push(['Math.'+_,_])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(i=1;i<method.length;i++)Matrix.prototype[method[i]]=inplaceMeth,Matrix[method[i]]=staticMeth}var methodsWithArgs=[['Math.pow',1,'pow']];for(var methodWithArg of methodsWithArgs){var args='arg0';for(i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(i=2;i<methodWithArg.length;i++)Matrix.prototype[methodWithArg[i]]=inplaceMethWithArgs,Matrix[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod2=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod2=eval(fillTemplateFunction(staticMethodWithOneArg,tmplVar));for(i=2;i<methodWithArg.length;i++)Matrix.prototype[methodWithArg[i]]=inplaceMethod2,Matrix.prototype[methodWithArg[i]+'M']=inplaceMethodM,Matrix.prototype[methodWithArg[i]+'S']=inplaceMethodS,Matrix[methodWithArg[i]]=staticMethod2}}return Matrix}module.exports=abstractMatrix;var LuDecomposition=__webpack_require__(43),SvDecomposition=__webpack_require__(44),arrayUtils=__webpack_require__(198),util=__webpack_require__(16),MatrixTransposeView=__webpack_require__(226),MatrixRowView=__webpack_require__(223),MatrixSubView=__webpack_require__(225),MatrixSelectionView=__webpack_require__(224),MatrixColumnView=__webpack_require__(220),MatrixFlipRowView=__webpack_require__(222),MatrixFlipColumnView=__webpack_require__(221)},function(_,P,I){'use strict';function S(L){if(!(this instanceof S))return new S(L);L=R.Matrix.checkMatrix(L);var E=L.clone(),T=E.rows,O=E.columns,G=Array(T),W=1,Z,Q,J,$,ee,te,ae,ie,ne,oe;for(Z=0;Z<T;Z++)G[Z]=Z;for(ne=Array(T),Q=0;Q<O;Q++){for(Z=0;Z<T;Z++)ne[Z]=E[Z][Q];for(Z=0;Z<T;Z++){for(ie=E[Z],oe=_Mathmin(Z,Q),ee=0,J=0;J<oe;J++)ee+=ie[J]*ne[J];ie[Q]=ne[Z]-=ee}for($=Q,Z=Q+1;Z<T;Z++)_Mathabs(ne[Z])>_Mathabs(ne[$])&&($=Z);if($!==Q){for(J=0;J<O;J++)te=E[$][J],E[$][J]=E[Q][J],E[Q][J]=te;ae=G[$],G[$]=G[Q],G[Q]=ae,W=-W}if(Q<T&&0!==E[Q][Q])for(Z=Q+1;Z<T;Z++)E[Z][Q]/=E[Q][Q]}this.LU=E,this.pivotVector=G,this.pivotSign=W}var R=I(3);S.prototype={isSingular:function(){for(var L=this.LU,E=L.columns,T=0;T<E;T++)if(0===L[T][T])return!0;return!1},get determinant(){var L=this.LU;if(!L.isSquare())throw new Error('Matrix must be square');for(var E=this.pivotSign,T=L.columns,O=0;O<T;O++)E*=L[O][O];return E},get lowerTriangularMatrix(){for(var L=this.LU,E=L.rows,T=L.columns,O=new R.Matrix(E,T),G=0;G<E;G++)for(var W=0;W<T;W++)O[G][W]=G>W?L[G][W]:G===W?1:0;return O},get upperTriangularMatrix(){for(var L=this.LU,E=L.rows,T=L.columns,O=new R.Matrix(E,T),G=0;G<E;G++)for(var W=0;W<T;W++)O[G][W]=G<=W?L[G][W]:0;return O},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(L){L=R.Matrix.checkMatrix(L);var E=this.LU,T=E.rows;if(T!==L.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var O=L.columns,G=L.subMatrixRow(this.pivotVector,0,O-1),W=E.columns,Z,Q,J;for(J=0;J<W;J++)for(Z=J+1;Z<W;Z++)for(Q=0;Q<O;Q++)G[Z][Q]-=G[J][Q]*E[Z][J];for(J=W-1;0<=J;J--){for(Q=0;Q<O;Q++)G[J][Q]/=E[J][J];for(Z=0;Z<J;Z++)for(Q=0;Q<O;Q++)G[Z][Q]-=G[J][Q]*E[Z][J]}return G}},_.exports=S},function(_,P,I){'use strict';function S(O,G){if(!(this instanceof S))return new S(O,G);O=R.Matrix.checkMatrix(O),G=G||{};var W=O.rows,Z=O.columns,Q=_Mathmin(W,Z),J=!0,$=!0;!1===G.computeLeftSingularVectors&&(J=!1),!1===G.computeRightSingularVectors&&($=!1);var ee=!0===G.autoTranspose,te=!1,ae;if(!(W<Z))ae=O.clone();else if(!ee)ae=O.clone(),console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{ae=O.transpose(),W=ae.rows,Z=ae.columns,te=!0;var ie=J;J=$,$=ie}var ne=Array(_Mathmin(W+1,Z)),oe=T(W,Q,0),le=T(Z,Z,0),se=Array(Z),de=Array(W),he=_Mathmin(W-1,Z),ue=_Mathmax(0,_Mathmin(Z-2,W)),ce,pe,ge,fe,_e,be,xe,ye,we,ke,ve,Me,Pe,De,je,Ie,Se,Ce,Re,Ae,Be;for(ge=0,ke=_Mathmax(he,ue);ge<ke;ge++){if(ge<he){for(ne[ge]=0,ce=ge;ce<W;ce++)ne[ge]=E(ne[ge],ae[ce][ge]);if(0!==ne[ge]){for(0>ae[ge][ge]&&(ne[ge]=-ne[ge]),ce=ge;ce<W;ce++)ae[ce][ge]/=ne[ge];ae[ge][ge]+=1}ne[ge]=-ne[ge]}for(pe=ge+1;pe<Z;pe++){if(ge<he&&0!==ne[ge]){for(_e=0,ce=ge;ce<W;ce++)_e+=ae[ce][ge]*ae[ce][pe];for(_e=-_e/ae[ge][ge],ce=ge;ce<W;ce++)ae[ce][pe]+=_e*ae[ce][ge]}se[pe]=ae[ge][pe]}if(J&&ge<he)for(ce=ge;ce<W;ce++)oe[ce][ge]=ae[ce][ge];if(ge<ue){for(se[ge]=0,ce=ge+1;ce<Z;ce++)se[ge]=E(se[ge],se[ce]);if(0!==se[ge]){for(0>se[ge+1]&&(se[ge]=0-se[ge]),ce=ge+1;ce<Z;ce++)se[ce]/=se[ge];se[ge+1]+=1}if(se[ge]=-se[ge],ge+1<W&&0!==se[ge]){for(ce=ge+1;ce<W;ce++)de[ce]=0;for(pe=ge+1;pe<Z;pe++)for(ce=ge+1;ce<W;ce++)de[ce]+=se[pe]*ae[ce][pe];for(pe=ge+1;pe<Z;pe++)for(_e=-se[pe]/se[ge+1],ce=ge+1;ce<W;ce++)ae[ce][pe]+=_e*de[ce]}if($)for(ce=ge+1;ce<Z;ce++)le[ce][ge]=se[ce]}}if(fe=_Mathmin(Z,W+1),he<Z&&(ne[he]=ae[he][he]),W<fe&&(ne[fe-1]=0),ue+1<fe&&(se[ue]=ae[ue][fe-1]),se[fe-1]=0,J){for(pe=he;pe<Q;pe++){for(ce=0;ce<W;ce++)oe[ce][pe]=0;oe[pe][pe]=1}for(ge=he-1;0<=ge;ge--)if(0!==ne[ge]){for(pe=ge+1;pe<Q;pe++){for(_e=0,ce=ge;ce<W;ce++)_e+=oe[ce][ge]*oe[ce][pe];for(_e=-_e/oe[ge][ge],ce=ge;ce<W;ce++)oe[ce][pe]+=_e*oe[ce][ge]}for(ce=ge;ce<W;ce++)oe[ce][ge]=-oe[ce][ge];for(oe[ge][ge]=1+oe[ge][ge],ce=0;ce<ge-1;ce++)oe[ce][ge]=0}else{for(ce=0;ce<W;ce++)oe[ce][ge]=0;oe[ge][ge]=1}}if($)for(ge=Z-1;0<=ge;ge--){if(ge<ue&&0!==se[ge])for(pe=ge+1;pe<Z;pe++){for(_e=0,ce=ge+1;ce<Z;ce++)_e+=le[ce][ge]*le[ce][pe];for(_e=-_e/le[ge+1][ge],ce=ge+1;ce<Z;ce++)le[ce][pe]+=_e*le[ce][ge]}for(ce=0;ce<Z;ce++)le[ce][ge]=0;le[ge][ge]=1}for(var ze=fe-1,Le=0,Ee=2.220446049250313e-16;0<fe;){for(ge=fe-2;-1<=ge&&-1!==ge;ge--)if(_Mathabs(se[ge])<=Ee*(_Mathabs(ne[ge])+_Mathabs(ne[ge+1]))){se[ge]=0;break}if(ge===fe-2)ve=4;else{for(be=fe-1;be>=ge&&be!==ge;be--)if(_e=(be===fe?0:_Mathabs(se[be]))+(be===ge+1?0:_Mathabs(se[be-1])),_Mathabs(ne[be])<=Ee*_e){ne[be]=0;break}be===ge?ve=3:be===fe-1?ve=1:(ve=2,ge=be)}switch(ge++,ve){case 1:{for(xe=se[fe-2],se[fe-2]=0,pe=fe-2;pe>=ge;pe--)if(_e=E(ne[pe],xe),ye=ne[pe]/_e,we=xe/_e,ne[pe]=_e,pe!==ge&&(xe=-we*se[pe-1],se[pe-1]=ye*se[pe-1]),$)for(ce=0;ce<Z;ce++)_e=ye*le[ce][pe]+we*le[ce][fe-1],le[ce][fe-1]=-we*le[ce][pe]+ye*le[ce][fe-1],le[ce][pe]=_e;break}case 2:{for(xe=se[ge-1],se[ge-1]=0,pe=ge;pe<fe;pe++)if(_e=E(ne[pe],xe),ye=ne[pe]/_e,we=xe/_e,ne[pe]=_e,xe=-we*se[pe],se[pe]=ye*se[pe],J)for(ce=0;ce<W;ce++)_e=ye*oe[ce][pe]+we*oe[ce][ge-1],oe[ce][ge-1]=-we*oe[ce][pe]+ye*oe[ce][ge-1],oe[ce][pe]=_e;break}case 3:{for(Me=_Mathmax(_Mathmax(_Mathmax(_Mathmax(_Mathabs(ne[fe-1]),_Mathabs(ne[fe-2])),_Mathabs(se[fe-2])),_Mathabs(ne[ge])),_Mathabs(se[ge])),Pe=ne[fe-1]/Me,De=ne[fe-2]/Me,je=se[fe-2]/Me,Ie=ne[ge]/Me,Se=se[ge]/Me,Ce=((De+Pe)*(De-Pe)+je*je)/2,Re=Pe*je*(Pe*je),Ae=0,(0!==Ce||0!==Re)&&(Ae=_Mathsqrt(Ce*Ce+Re),0>Ce&&(Ae=-Ae),Ae=Re/(Ce+Ae)),xe=(Ie+Pe)*(Ie-Pe)+Ae,Be=Ie*Se,pe=ge;pe<fe-1;pe++){if(_e=E(xe,Be),ye=xe/_e,we=Be/_e,pe!==ge&&(se[pe-1]=_e),xe=ye*ne[pe]+we*se[pe],se[pe]=ye*se[pe]-we*ne[pe],Be=we*ne[pe+1],ne[pe+1]=ye*ne[pe+1],$)for(ce=0;ce<Z;ce++)_e=ye*le[ce][pe]+we*le[ce][pe+1],le[ce][pe+1]=-we*le[ce][pe]+ye*le[ce][pe+1],le[ce][pe]=_e;if(_e=E(xe,Be),ye=xe/_e,we=Be/_e,ne[pe]=_e,xe=ye*se[pe]+we*ne[pe+1],ne[pe+1]=-we*se[pe]+ye*ne[pe+1],Be=we*se[pe+1],se[pe+1]=ye*se[pe+1],J&&pe<W-1)for(ce=0;ce<W;ce++)_e=ye*oe[ce][pe]+we*oe[ce][pe+1],oe[ce][pe+1]=-we*oe[ce][pe]+ye*oe[ce][pe+1],oe[ce][pe]=_e}se[fe-2]=xe,++Le;break}case 4:{if(0>=ne[ge]&&(ne[ge]=0>ne[ge]?-ne[ge]:0,$))for(ce=0;ce<=ze;ce++)le[ce][ge]=-le[ce][ge];for(;ge<ze&&!(ne[ge]>=ne[ge+1]);){if(_e=ne[ge],ne[ge]=ne[ge+1],ne[ge+1]=_e,$&&ge<Z-1)for(ce=0;ce<Z;ce++)_e=le[ce][ge+1],le[ce][ge+1]=le[ce][ge],le[ce][ge]=_e;if(J&&ge<W-1)for(ce=0;ce<W;ce++)_e=oe[ce][ge+1],oe[ce][ge+1]=oe[ce][ge],oe[ce][ge]=_e;ge++}Le=0,fe--;break}}}if(te){var Te=le;le=oe,oe=Te}this.m=W,this.n=Z,this.s=ne,this.U=oe,this.V=le}var R=I(3),L=I(24),E=L.hypotenuse,T=L.getFilled2DArray;S.prototype={get condition(){return this.s[0]/this.s[_Mathmin(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var G=_Mathmax(this.m,this.n)*this.s[0]*2.220446049250313e-16,W=0,Z=this.s,Q=0,J=Z.length;Q<J;Q++)Z[Q]>G&&W++;return W},get diagonal(){return this.s},get threshold(){return 2.220446049250313e-16/2*_Mathmax(this.m,this.n)*this.s[0]},get leftSingularVectors(){return R.Matrix.isMatrix(this.U)||(this.U=new R.Matrix(this.U)),this.U},get rightSingularVectors(){return R.Matrix.isMatrix(this.V)||(this.V=new R.Matrix(this.V)),this.V},get diagonalMatrix(){return R.Matrix.diag(this.s)},solve:function(O){var W=this.threshold,Z=this.s.length,Q=R.Matrix.zeros(Z,Z),J;for(J=0;J<Z;J++)Q[J][J]=_Mathabs(this.s[J])<=W?0:1/this.s[J];var $=this.U,ee=this.rightSingularVectors,te=ee.mmul(Q),ae=ee.rows,ie=$.length,ne=R.Matrix.zeros(ae,ie),oe,le,se;for(J=0;J<ae;J++)for(oe=0;oe<ie;oe++){for(se=0,le=0;le<Z;le++)se+=te[J][le]*$[oe][le];ne[J][oe]=se}return ne.mmul(O)},solveForDiagonal:function(O){return this.solve(R.Matrix.diag(O))},inverse:function(){var O=this.V,G=this.threshold,W=O.length,Z=O[0].length,Q=new R.Matrix(W,this.s.length),J,$;for(J=0;J<W;J++)for($=0;$<Z;$++)Q[J][$]=_Mathabs(this.s[$])>G?O[J][$]/this.s[$]:0;var ee=this.U,te=ee.length,ae=ee[0].length,ie=new R.Matrix(W,te),ne,oe;for(J=0;J<W;J++)for($=0;$<te;$++){for(oe=0,ne=0;ne<ae;ne++)oe+=Q[J][ne]*ee[$][ne];ie[J][$]=oe}return ie}},_.exports=S},function(_,P,I){'use strict';const S=I(11).maybeToPrecision,R=I(5),L=I(7);class E extends R{constructor(T,O,G,W){super();if(!0===T)this.coefficients=O.coefficients,this.powers=O.powers,this.M=O.M,O.quality&&(this.quality=O.quality);else{var Q=T.length;if(Q!==O.length)throw new RangeError('input and output array have a different length');let oe;if(Array.isArray(G))oe=G,G=oe.length;else for(G++,oe=Array(G),ee=0;ee<G;ee++)oe[ee]=ee;var J=new L(Q,G),$=new L([O]),ee,te;for(ee=0;ee<G;ee++)for(te=0;te<Q;te++)J[te][ee]=0===oe[ee]?1:_Mathpow(T[te],oe[ee]);var ae=J.transposeView(),ie=ae.mmul(J),ne=ae.mmul($.transposeView());this.coefficients=ie.solve(ne).to1DArray(),this.powers=oe,this.M=G-1,(W||{}).computeQuality&&(this.quality=this.modelQuality(T,O))}}_predict(T){for(var O=0,G=0;G<this.powers.length;G++)O+=this.coefficients[G]*_Mathpow(T,this.powers[G]);return O}toJSON(){var T={name:'polynomialRegression',coefficients:this.coefficients,powers:this.powers,M:this.M};return this.quality&&(T.quality=this.quality),T}toString(T){return this._toFormula(T,!1)}toLaTeX(T){return this._toFormula(T,!0)}_toFormula(T,O){var G='^',W='',Z=' * ';O&&(G='^{',W='}',Z='');for(var Q='',$=0,J;$<this.coefficients.length;$++)J='',0!==this.coefficients[$]&&(J=0===this.powers[$]?S(this.coefficients[$],T):1===this.powers[$]?S(this.coefficients[$],T)+Z+'x':S(this.coefficients[$],T)+Z+'x'+G+this.powers[$]+W,0<this.coefficients[$]&&$!==this.coefficients.length-1?J=' + '+J:$!==this.coefficients.length-1&&(J=' '+J)),Q=J+Q;return' + '===Q.charAt(0)&&(Q=Q.slice(1)),'f(x) = '+Q}static load(T){if('polynomialRegression'!==T.name)throw new TypeError('not a polynomial regression model');return new E(!0,T)}}_.exports=E},function(_,P,I){'use strict';P.array=I(26),P.matrix=I(234)},function(_,P,I){'use strict';function S(L){if('number'!=typeof L||R(L))throw new TypeError('Expected a number')}var R=I(48);P.asc=function(L,E){return S(L),S(E),L-E},P.desc=function(L,E){return S(L),S(E),E-L}},function(_){'use strict';_.exports=Number.isNaN||function(S){return S!==S}},function(_,P,I){'use strict';function S(G,W){if(65537>W&&(G.subarray&&E||!G.subarray&&L))return _StringfromCharCode.apply(null,R.shrinkBuf(G,W));for(var Z='',Q=0;Q<W;Q++)Z+=_StringfromCharCode(G[Q]);return Z}var R=I(6),L=!0,E=!0;try{_StringfromCharCode.apply(null,[0])}catch(G){L=!1}try{_StringfromCharCode.apply(null,new Uint8Array(1))}catch(G){E=!1}for(var T=new R.Buf8(256),O=0;256>O;O++)T[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;T[254]=T[254]=1,P.string2buf=function(G){var ee=G.length,te=0,W,Z,Q,J,$;for(J=0;J<ee;J++)Z=G.charCodeAt(J),55296==(64512&Z)&&J+1<ee&&(Q=G.charCodeAt(J+1),56320==(64512&Q)&&(Z=65536+(Z-55296<<10)+(Q-56320),J++)),te+=128>Z?1:2048>Z?2:65536>Z?3:4;for(W=new R.Buf8(te),$=0,J=0;$<te;J++)Z=G.charCodeAt(J),55296==(64512&Z)&&J+1<ee&&(Q=G.charCodeAt(J+1),56320==(64512&Q)&&(Z=65536+(Z-55296<<10)+(Q-56320),J++)),128>Z?W[$++]=Z:2048>Z?(W[$++]=192|Z>>>6,W[$++]=128|63&Z):65536>Z?(W[$++]=224|Z>>>12,W[$++]=128|63&Z>>>6,W[$++]=128|63&Z):(W[$++]=240|Z>>>18,W[$++]=128|63&Z>>>12,W[$++]=128|63&Z>>>6,W[$++]=128|63&Z);return W},P.buf2binstring=function(G){return S(G,G.length)},P.binstring2buf=function(G){for(var W=new R.Buf8(G.length),Z=0,Q=W.length;Z<Q;Z++)W[Z]=G.charCodeAt(Z);return W},P.buf2string=function(G,W){var Z,Q,J,$,ee=W||G.length,te=Array(2*ee);for(Q=0,Z=0;Z<ee;){if(J=G[Z++],128>J){te[Q++]=J;continue}if($=T[J],4<$){te[Q++]=65533,Z+=$-1;continue}for(J&=2===$?31:3===$?15:7;1<$&&Z<ee;)J=J<<6|63&G[Z++],$--;if(1<$){te[Q++]=65533;continue}65536>J?te[Q++]=J:(J-=65536,te[Q++]=55296|1023&J>>10,te[Q++]=56320|1023&J)}return S(te,Q)},P.utf8border=function(G,W){var Z;for(W=W||G.length,W>G.length&&(W=G.length),Z=W-1;0<=Z&&128==(192&G[Z]);)Z--;return 0>Z?W:0===Z?W:Z+T[G[Z]]>W?Z:W}},function(_){'use strict';_.exports=function(R,L,E,T){for(var O=0|65535&R,G=0|65535&R>>>16,W=0;0!==E;){W=2e3<E?2e3:E,E-=W;do O=0|O+L[T++],G=0|G+O;while(--W);O%=65521,G%=65521}return 0|(O|G<<16)}},function(_){'use strict';_.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(_){'use strict';var L=function(){for(var T=[],O=0,E;256>O;O++){E=O;for(var G=0;8>G;G++)E=1&E?3988292384^E>>>1:E>>>1;T[O]=E}return T}();_.exports=function(E,T,O,G){E^=-1;for(var Q=G;Q<G+O;Q++)E=E>>>8^L[255&(E^T[Q])];return-1^E}},function(_){'use strict';_.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(_,P,I){'use strict';const S={standard:I(249),exif:I(247),gps:I(248)};class R{constructor(L){if(!L)throw new Error('missing kind');this.data=null,this.fields=new Map,this.kind=L,this._map=null}get(L){if('number'==typeof L)return this.fields.get(L);if('string'==typeof L)return this.fields.get(S[this.kind].tagsByName[L]);throw new Error('expected a number or string')}get map(){if(!this._map){this._map={};const E=S[this.kind].tagsById;for(var L of this.fields.keys())E[L]&&(this._map[E[L]]=this.fields.get(L))}return this._map}}_.exports=R},function(_,P,I){'use strict';P.decode=I(245)},function(_,P,I){'use strict';function S(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(P,'__esModule',{value:!0});var R=I(253),L=S(R),E=I(58),T=S(E);class O{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error('image worker must be initialized with an URL')}get url(){return this._url}set url(G){if('string'!=typeof G)throw new TypeError('worker URL must be a string');this._url=G,this._deps[0]=G}static extendMethod(G,W){function Z(...ee){return Q||(this.checkUrl(),J=this.url,Q=new L.default(W.work,{deps:J}),$.manager=Q),W.run.call($,...ee)}var Q,J,$={};Z.reset=function(){Q&&(Q.terminate(),Q=new L.default(W.work,{deps:J}),$.manager=Q)},O.prototype[G]=Z}}(0,T.default)(O),P.default=new O},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0});var S=I(35);Object.keys(S).forEach(function(L){'default'===L||'__esModule'===L||Object.defineProperty(P,L,{enumerable:!0,get:function(){return S[L]}})});var R=I(156);Object.defineProperty(P,'laplacianOfGaussian',{enumerable:!0,get:function(){return R.laplacianOfGaussian}})},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T){T.extendMethod('background',E.default)};var L=I(59),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';function S(Q){return Q&&Q.__esModule?Q:{default:Q}}function L(Q,J,$){return Q.post('data',[J,$]).then(function(ee){for(var te in ee)ee[te]=new W.default(ee[te]);return ee})}Object.defineProperty(P,'__esModule',{value:!0});var T=I(22),O=S(T),G=I(0),W=S(G),Z={regression:{kernelType:'polynomial',kernelOptions:{degree:2,constant:1}},threshold:0.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};P.default={run:function(Q,J,$){J=(0,O.default)({},Z,J);var ee=this.manager;return Array.isArray(Q)?Promise.all(Q.map(function(te){var ae=L(ee,te,J);return'function'==typeof $&&ae.then($),ae})):L(ee,Q,J)},work:function(){worker.on('data',function(Q,J,$){function ee(ce,pe){$.include.includes(ce)&&(te[ce]=pe,ae.push(pe.data.buffer))}J=new IJS(J);var te={},ae=[],ie=J.grey(),ne=ie.sobelFilter();ee('sobel',ne);var oe=ne.level().mask({threshold:$.threshold});ee('mask',oe);var le=ne.getRoiManager();le.fromMask(oe);var se=le.getMask($.roi);ee('realMask',se);var de=ie.getPixelsGrid({sampling:$.sampling,mask:se}),he=J.getBackground(de.xyS,de.zS,$.regression);ee('background',he);var ue=J.subtract(he);te.result=ue,ae.push(ue.data.buffer),Q(te,ae)})}}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R){for(var L in S)R.prototype[L]=S[L]};var S={setBitXY(R,L){var E=L*this.width+R;this.data[E>>3]|=1<<7-(7&E)},clearBitXY(R,L){var E=L*this.width+R;this.data[E>>3]&=~(1<<7-(7&E))},toggleBitXY(R,L){var E=L*this.width+R;this.data[E>>3]^=1<<7-(7&E)},getBitXY(R,L){var E=L*this.width+R;return this.data[E>>3]&1<<7-(7&E)?1:0},setBit(R){this.data[R>>3]|=1<<7-(7&R)},clearBit(R){this.data[R>>3]&=~(1<<7-(7&R))},toggleBit(R){this.data[R>>3]^=1<<7-(7&R)},getBit(R){return this.data[R>>3]&1<<7-(7&R)?1:0}}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T={}){var O=T.useAlpha,W=T.nbSlots,Z=W===void 0?512:W;this.checkProcessable('getColorHistogram',{bitDepth:[8,16],components:[3]});var Q=_Mathlog(Z)/2.0794415416798357;if(Q!==_Mathfloor(Q))throw new RangeError('nbSlots must be a power of 8. Usually 8, 64, 512 or 4096');for(var J=this.bitDepth-Q,$=this.data,ee=(0,E.default)(_Mathpow(8,Q),0),te=_Mathpow(2,2*Q),ae=_Mathpow(2,Q),ie=0,ne;ie<$.length;ie+=this.channels)ne=($[ie]>>J)*te+($[ie+1]>>J)*ae+($[ie+2]>>J),(!(O!==void 0)||O)&&this.alpha?ee[ne]+=$[ie+this.channels-1]/this.maxValue:ee[ne]++;return ee};var L=I(4),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R={}){var L=R.alpha,E=L===void 0?1:L;this.checkProcessable('countAlphaPixels',{bitDepth:[8,16],alpha:1});var T=0;if(E!==void 0){for(var O=this.components;O<this.data.length;O+=this.channels)this.data[O]===E&&T++;return T}return this.size}},function(_,P,I){'use strict';function S(Z){return Z&&Z.__esModule?Z:{default:Z}}function E(Z,Q){var J=Q.useAlpha,$=Q.maxSlots;if(1===this.bitDepth){for(var ee=[0,0],te=0;te<this.height;te++)for(var ae=0,ie;ae<this.width;ae++)ie=this.getBitXY(te,ae),0===ie?ee[0]+=1:1===ie&&(ee[1]+=1);return ee}var ne=Math.log2($);if(!(0,W.default)(ne))throw new RangeError('maxSlots must be a power of 2, for example: 64, 256, 1024');var oe=0;this.bitDepth>ne&&(oe=this.bitDepth-ne);var le=this.data,se=(0,O.default)(_Mathpow(2,_Mathmin(this.bitDepth,ne)),0);if(J&&this.alpha)for(var de=this.channels-Z-1,he=Z;he<le.length;he+=this.channels)se[le[he]>>oe]+=le[he+de]/this.maxValue;else for(var ue=Z;ue<le.length;ue+=this.channels)se[le[ue]>>oe]++;return se}Object.defineProperty(P,'__esModule',{value:!0}),P.getHistogram=function(Z={}){var Q=Z.maxSlots,J=void 0===Q?256:Q,$=Z.channel,ee=Z.useAlpha;if(this.checkProcessable('getHistogram',{bitDepth:[1,8,16]}),void 0===$){if(1<this.components)throw new RangeError('You need to define the channel for an image that contains more than one channel');$=0}return E.call(this,$,{useAlpha:void 0===ee||ee,maxSlots:J})},P.getHistograms=function(Z={}){var Q=Z.maxSlots,J=Q===void 0?256:Q,$=Z.useAlpha,ee=!($!==void 0)||$;this.checkProcessable('getHistograms',{bitDepth:[8,16]});for(var te=Array(ee?this.components:this.channels),ae=0;ae<te.length;ae++)te[ae]=E.call(this,ae,{useAlpha:ee,maxSlots:J});return te};var T=I(4),O=S(T),G=I(40),W=S(G)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R={}){var L=R.mask,E=R.region,T=E===void 0?3:E,O=R.removeClosePoints,G=O===void 0?0:O,W=R.invert,Z=W!==void 0&&W,Q=R.maxEquals,J=Q===void 0?2:Q,$=this;this.checkProcessable('localMaxima',{bitDepth:[8,16],components:1}),T*=4;for(var ee=Z?0:1,te=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],ae=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],ie=8>=T?1:2,ne=[],oe=ie;oe<$.height-ie;oe++)for(var le=ie;le<$.width-ie;le++)if(!(L&&L.getBitXY(le,oe)!==ee)){for(var se=0,de=0,he=$.data[le+oe*$.width],ue=0;ue<T;ue++)Z?$.data[le+te[ue]+(oe+ae[ue])*$.width]>he&&se++:$.data[le+te[ue]+(oe+ae[ue])*$.width]<he&&se++,$.data[le+te[ue]+(oe+ae[ue])*$.width]===he&&de++;se+de===T&&de<=J&&ne.push([le,oe])}if(0<G)for(var ce=0;ce<ne.length;ce++)for(var pe=ce+1;pe<ne.length;pe++)_Mathsqrt(_Mathpow(ne[ce][0]-ne[pe][0],2)+_Mathpow(ne[ce][1]-ne[pe][1],2))<G&&(ne[ce][0]=ne[ce][0]+ne[pe][0]>>1,ne[ce][1]=ne[ce][1]+ne[pe][1]>>1,ne.splice(pe,1),pe--);return ne}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('max',{bitDepth:[8,16]});for(var T=(0,E.default)(this.channels,-Infinity),O=0;O<this.data.length;O+=this.channels)for(var G=0;G<this.channels;G++)this.data[O+G]>T[G]&&(T[G]=this.data[O+G]);return T};var L=I(4),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){for(var L=this.getHistograms({maxSlots:this.maxValue+1}),E=Array(L.length),T=0,O;T<L.length;T++)O=L[T],E[T]=(0,R.mean)(O);return E};var R=I(19)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){for(var L=this.getHistograms({maxSlots:this.maxValue+1}),E=Array(L.length),T=0,O;T<L.length;T++)O=L[T],E[T]=(0,R.median)(O);return E};var R=I(19)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('min',{bitDepth:[8,16]});for(var T=(0,E.default)(this.channels,+Infinity),O=0;O<this.data.length;O+=this.channels)for(var G=0;G<this.channels;G++)this.data[O+G]<T[G]&&(T[G]=this.data[O+G]);return T};var L=I(4),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('points',{bitDepth:[1]});for(var R=Array(this.size),L=0,E=0;E<this.width;E++)for(var T=0;T<this.height;T++)1===this.getBitXY(E,T)&&(R[L++]=[E,T]);return R.length=L,R}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L={}){if(this===R)return[0,0];for(var E=[0,0],T=this;T;){if(T===R)return E;T.position&&(E[0]+=T.position[0],E[1]+=T.position[1]),T=T.parent}return!!L.defaultFurther&&E}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('sum',{bitDepth:[8,16]});for(var T=(0,E.default)(this.channels,0),O=0;O<this.data.length;O+=this.channels)for(var G=0;G<this.channels;G++)T[G]+=this.data[O+G];return T};var L=I(4),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){return this.checkProcessable('getSvd',{bitDepth:[1]}),R.DC.SVD(this.points)};var R=I(7)},function(_,P,I){'use strict';function S(ya){return ya&&ya.__esModule?ya:{default:ya}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(ya){var wa={inPlace:!0},va={stack:!0};ya.extendMethod('invertGetSet',E.default,wa),ya.extendMethod('invertIterator',O.default,wa),ya.extendMethod('invertPixel',Q.default,wa),ya.extendMethod('invertOneLoop',W.default,wa),ya.extendMethod('invertApply',$.default,wa),ya.extendMethod('invert',ie.default,{inPlace:!0,stack:!0}),ya.extendMethod('invertBinaryLoop',te.default,wa),ya.extendMethod('level',xe.default,wa),ya.extendMethod('add',we.default,wa),ya.extendMethod('subtract',ve.default,wa),ya.extendMethod('multiply',je.default,wa),ya.extendMethod('divide',Se.default,wa),ya.extendMethod('hypotenuse',Pe.default),ya.extendMethod('background',Re.default),ya.extendMethod('flipX',oe.default),ya.extendMethod('flipY',se.default),ya.extendMethod('blurFilter',he.default),ya.extendMethod('medianFilter',ce.default),ya.extendMethod('gaussianFilter',ge.default),ya.extendMethod('sobelFilter',_e.default),ya.extendMethod('crop',Be.default,va),ya.extendMethod('cropAlpha',Le.default,va),ya.extendMethod('scale',Te.default,va),ya.extendMethod('hsv',Ye.default),ya.extendMethod('hsl',Ue.default),ya.extendMethod('cmyk',Oe.default),ya.extendMethod('rgba8',Ne.default),ya.extendMethod('grey',He.default).extendMethod('gray',He.default),ya.extendMethod('mask',Ze.default),ya.extendMethod('pad',Qe.default),ya.extendMethod('colorDepth',$e.default),ya.extendMethod('setBorder',nt.default,wa),ya.extendMethod('rotate',et.rotate),ya.extendMethod('rotateLeft',et.rotateLeft),ya.extendMethod('rotateRight',et.rotateRight),ya.extendMethod('getRow',wt.default),ya.extendMethod('getColumn',vt.default),ya.extendMethod('getMatrix',Pt.default),ya.extendMethod('setMatrix',jt.default),ya.extendMethod('getPixelsArray',St.default),ya.extendMethod('getIntersection',Rt.default),ya.extendMethod('getClosestCommonParent',Bt.default),ya.extendMethod('split',lt.default),ya.extendMethod('getChannel',st.default),ya.extendMethod('combineChannels',ht.default),ya.extendMethod('setChannel',ct.default),ya.extendMethod('getSimilarity',mt.default),ya.extendMethod('getPixelsGrid',_t.default),ya.extendMethod('getBestMatch',xt.default),ya.extendMethod('paintMasks',Lt.default,wa),ya.extendMethod('paintLabels',Tt.default,wa),ya.extendMethod('paintPoints',Yt.default,wa),ya.extendMethod('extract',Ut.default),ya.extendMethod('convolution',Ot.default),ya.extendMethod('convolutionFft',Nt.default),ya.extendMethod('floodFill',Ht.default),ya.extendMethod('countAlphaPixels',xa.default),ya.extendMethod('getHistogram',Wt.getHistogram).extendProperty('histogram',Wt.getHistogram),ya.extendMethod('getHistograms',Wt.getHistograms).extendProperty('histograms',Wt.getHistograms),ya.extendMethod('getColorHistogram',Kt.default).extendProperty('colorHistogram',Kt.default),ya.extendMethod('getMin',Jt.default).extendProperty('min',Jt.default),ya.extendMethod('getMax',ea.default).extendProperty('max',ea.default),ya.extendMethod('getSum',aa.default).extendProperty('sum',aa.default),ya.extendMethod('getLocalMaxima',na.default),ya.extendMethod('getMedian',ha.default).extendProperty('median',ha.default),ya.extendMethod('getMean',la.default).extendProperty('mean',la.default),ya.extendMethod('getPoints',ca.default).extendProperty('points',ca.default),ya.extendMethod('getRelativePosition',ga.default),ya.extendMethod('getSvd',_a.default).extendProperty('svd',_a.default)};var L=I(85),E=S(L),T=I(86),O=S(T),G=I(87),W=S(G),Z=I(88),Q=S(Z),J=I(83),$=S(J),ee=I(84),te=S(ee),ae=I(82),ie=S(ae),ne=I(78),oe=S(ne),le=I(79),se=S(le),de=I(76),he=S(de),ue=I(90),ce=S(ue),pe=I(80),ge=S(pe),fe=I(92),_e=S(fe),be=I(89),xe=S(be),ye=I(74),we=S(ye),ke=I(93),ve=S(ke),Me=I(81),Pe=S(Me),De=I(91),je=S(De),Ie=I(77),Se=S(Ie),Ce=I(75),Re=S(Ce),Ae=I(112),Be=S(Ae),ze=I(113),Le=S(ze),Ee=I(138),Te=S(Ee),Ve=I(116),Ye=S(Ve),Fe=I(115),Ue=S(Fe),qe=I(110),Oe=S(qe),Xe=I(134),Ne=S(Xe),Ge=I(114),He=S(Ge),We=I(121),Ze=S(We),Ke=I(133),Qe=S(Ke),Je=I(111),$e=S(Je),et=I(135),at=I(151),nt=S(at),ot=I(154),lt=S(ot),rt=I(142),st=S(rt),dt=I(139),ht=S(dt),ut=I(152),ct=S(ut),pt=I(150),mt=S(pt),gt=I(148),_t=S(gt),bt=I(141),xt=S(bt),yt=I(149),wt=S(yt),kt=I(144),vt=S(kt),Mt=I(146),Pt=S(Mt),Dt=I(153),jt=S(Dt),It=I(147),St=S(It),Ct=I(145),Rt=S(Ct),At=I(143),Bt=S(At),zt=I(100),Lt=S(zt),Et=I(99),Tt=S(Et),Vt=I(101),Yt=S(Vt),Ft=I(97),Ut=S(Ft),qt=I(18),Ot=S(qt),Xt=I(31),Nt=S(Xt),Gt=I(98),Ht=S(Gt),Wt=I(63),Zt=I(61),Kt=S(Zt),Qt=I(68),Jt=S(Qt),$t=I(65),ea=S($t),ta=I(71),aa=S(ta),ia=I(64),na=S(ia),oa=I(66),la=S(oa),da=I(67),ha=S(da),ua=I(69),ca=S(ua),ma=I(70),ga=S(ma),fa=I(72),_a=S(fa),ba=I(62),xa=S(ba)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E,T={}){var O=T.channels;if(this.checkProcessable('add',{bitDepth:[8,16]}),O=(0,R.validateArrayOfChannels)(this,{channels:O}),E=(0,L.checkNumberArray)(E),!isNaN(E))for(var G=0,W;G<O.length;G++){W=O[G];for(var Z=0;Z<this.data.length;Z+=this.channels)this.data[Z+W]=_Mathmin(this.maxValue,this.data[Z+W]+E>>0)}else{if(this.data.length!==E.length)throw new Error('add: the data size is different');for(var Q=0,J;Q<O.length;Q++){J=O[Q];for(var $=0;$<this.data.length;$+=this.channels)this.data[$+J]=_Mathmax(0,_Mathmin(this.maxValue,this.data[$+J]+E[$+J]>>0))}}return this};var R=I(1),L=I(15)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O,G,W){for(var Z=new L.KernelRidgeRegression(O,G,W),Q=Array(this.size),J=0;J<this.width;J++)for(var $=0;$<this.height;$++)Q[$*this.width+J]=[J,$];for(var ee=Z.predict(Q),te=T.default.createFrom(this),ae=0;ae<this.size;ae++)te.data[ae]=_Mathmin(this.maxValue,_Mathmax(0,ee[ae][0]));return te};var L=I(227),E=I(0),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T={}){var O=T.radius,G=void 0===O?1:O;if(this.checkProcessable('meanFilter',{components:[1],bitDepth:[8,16]}),1>G)throw new Error('Number of neighbors should be grater than 0');for(var W=2*G+1,Q=Array(W*W),J=0;J<Q.length;J++)Q[J]=1;return E.default.call(this,Q)};var L=I(31),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E,T={}){var O=T.channels;if(this.checkProcessable('divide',{bitDepth:[8,16]}),O=(0,R.validateArrayOfChannels)(this,{channels:O}),E=(0,L.checkNumberArray)(E),!isNaN(E))for(var G=0,W;G<O.length;G++){W=O[G];for(var Z=0;Z<this.data.length;Z+=this.channels)this.data[Z+W]=_Mathmin(this.maxValue,this.data[Z+W]/E>>0)}else{if(this.data.length!==E.length)throw new Error('divide: the: the data size is different');for(var Q=0,J;Q<O.length;Q++){J=O[Q];for(var $=0;$<this.data.length;$+=this.channels)this.data[$+J]=_Mathmax(0,_Mathmin(this.maxValue,this.data[$+J]/E[$+J]>>0))}}return this};var R=I(1),L=I(15)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('flipX',{bitDepth:[8,16]});for(var R=0,L;R<this.height;R++){L=R*this.width*this.channels;for(var E=0;E<_Mathfloor(this.width/2);E++)for(var T=E*this.channels+L,O=(this.width-E-1)*this.channels+L,G=0,W;G<this.channels;G++)W=this.data[T+G],this.data[T+G]=this.data[O+G],this.data[O+G]=W}return this}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('flipY',{bitDepth:[8,16]});for(var R=0;R<_Mathfloor(this.height/2);R++)for(var L=0;L<this.width;L++)for(var E=L*this.channels+R*this.width*this.channels,T=L*this.channels+(this.height-1-R)*this.channels*this.width,O=0,G;O<this.channels;O++)G=this.data[E+O],this.data[E+O]=this.data[T+O],this.data[T+O]=G;return this}},function(_,P,I){'use strict';function L(G,W){if(1>G)throw new RangeError('Radius should be grater than 0');for(var Z=2*G+1,Q=Array(Z*Z),J=2*(W*W),ee=0;ee<=G;ee++)for(var te=ee,ae;te<=G;te++)ae=_Mathexp(-(ee*ee+te*te)/J)/(_MathPI*J),Q[(ee+G)*Z+(te+G)]=ae,Q[(ee+G)*Z+(-te+G)]=ae,Q[(-ee+G)*Z+(te+G)]=ae,Q[(-ee+G)*Z+(-te+G)]=ae,Q[(te+G)*Z+(ee+G)]=ae,Q[(te+G)*Z+(-ee+G)]=ae,Q[(-te+G)*Z+(ee+G)]=ae,Q[(-te+G)*Z+(-ee+G)]=ae;return Q}function E(G){if(0>=G)throw new RangeError('Sigma should be grater than 0');for(var W=2*(G*G),Z=_MathPI*W,Q=1/Z,J=Q,$=0;0.99>J;){$++,Q=_Mathexp(-($*$)/W)/Z,J+=4*Q;for(var ee=1;ee<$;ee++)Q=_Mathexp(-(ee*ee+$*$)/W)/Z,J+=8*Q;Q=4*_Mathexp(-(2*$*$)/W)/Z,J+=Q}if(1<J)throw new Error('unexpected sum over 1');return L($,G)}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(G={}){var W=G.radius,Z=void 0===W?1:W,Q=G.sigma,J=G.channels,$=G.border,ee=void 0===$?'copy':$,te=G.algorithm,ae=void 0===te?'auto':te;this.checkProcessable('gaussian',{bitDepth:[8,16]});var ie;return Q?ie=E(Q):(Q=0.3*(Z-1)+0.8,ie=L(Z,Q)),O.default.call(this,ie,{border:ee,channels:J,algorithm:ae})};var T=I(18),O=function(G){return G&&G.__esModule?G:{default:G}}(T)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O,G={}){var W=G.bitDepth,Z=void 0===W?this.bitDepth:W,Q=G.channels;if(this.checkProcessable('hypotenuse',{bitDepth:[8,16,32]}),this.width!==O.width||this.height!==O.height)throw new Error('hypotenuse: both images must have the same size');if(this.alpha!==O.alpha||this.bitDepth!==O.bitDepth)throw new Error('hypotenuse: both images must have the same alpha and bitDepth');if(this.channels!==O.channels)throw new Error('hypotenuse: both images must have the same number of channels');var J=T.default.createFrom(this,{bitDepth:Z});Q=(0,L.validateArrayOfChannels)(this,{channels:Q});for(var $=J.isClamped,ee=0,te;ee<Q.length;ee++){te=Q[ee];for(var ae=te,ie;ae<this.data.length;ae+=this.channels)ie=Math.hypot(this.data[ae],O.data[ae]),J.data[ae]=$?_Mathmin(_Mathmax(_Mathround(ie),0),J.maxValue):ie}return J};var L=I(1),E=I(0),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(L={}){var E=L.channels;if(this.checkProcessable('invertOneLoop',{bitDepth:[1,8,16]}),1===this.bitDepth)for(var T=this.data,O=0;O<T.length;O++)T[O]=~T[O];else{E=(0,R.validateArrayOfChannels)(this,{channels:E});for(var G=0,W;G<E.length;G++){W=E[G];for(var Z=W;Z<this.data.length;Z+=this.channels)this.data[Z]=this.maxValue-this.data[Z]}}return this};var R=I(1)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){if(1===this.bitDepth)for(var R=this.data,L=0;L<R.length;L++)R[L]=~R[L];else this.checkProcessable('invertApply',{bitDepth:[8,16]}),this.apply(function(E){for(var T=0;T<this.components;T++)this.data[E+T]=this.maxValue-this.data[E+T]})}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('invertBinaryLoop',{bitDepth:[1]});for(var R=0;R<this.size;R++)this.toggleBit(R)}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){if(this.checkProcessable('invert',{bitDepth:[1,8,16]}),1===this.bitDepth)for(var R=this.data,L=0;L<R.length;L++)R[L]=~R[L];else for(var E=0;E<this.width;E++)for(var T=0;T<this.height;T++)for(var O=0,G;O<this.components;O++)G=this.getValueXY(E,T,O),this.setValueXY(E,T,O,this.maxValue-G)}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){if(this.checkProcessable('invert',{bitDepth:[1,8,16]}),1===this.bitDepth)for(var R=this.data,L=0;L<R.length;L++)R[L]=~R[L];else{var E=!0,T=!1,O;try{for(var G=this.pixels()[Symbol.iterator](),W;!(E=(W=G.next()).done);E=!0)for(var Z=W.value,Q=Z.index,J=Z.pixel,$=0;$<this.components;$++)this.setValue(Q,$,this.maxValue-J[$])}catch(ee){T=!0,O=ee}finally{try{!E&&G.return&&G.return()}finally{if(T)throw O}}}}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('invertOneLoop',{bitDepth:[8,16]});for(var R=this.data,L=0;L<R.length;L+=this.channels)for(var E=0;E<this.components;E++)R[L+E]=this.maxValue-R[L+E]}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('invertPixel',{bitDepth:[8,16]});for(var R=0;R<this.width;R++)for(var L=0,E;L<this.height;L++){E=this.getPixelXY(R,L);for(var T=0;T<this.components;T++)E[T]=this.maxValue-E[T];this.setPixelXY(R,L,E)}}},function(_,P,I){'use strict';function L(G,W,Z,Q){var J=1e-5,$=Array(G.channels),ee=!0,te=!1,ae;try{for(var ie=Q[Symbol.iterator](),ne,oe;!(ee=(ne=ie.next()).done);ee=!0)oe=ne.value,$[oe]=0===W[oe]&&Z[oe]===G.maxValue?0:Z[oe]===W[oe]?0:(G.maxValue+1-J)/(Z[oe]-W[oe]),W[oe]+=(0.5-J/2)/$[oe]}catch(he){te=!0,ae=he}finally{try{!ee&&ie.return&&ie.return()}finally{if(te)throw ae}}for(var le=0,se;le<Q.length;le++)if(se=Q[le],0!==$[se])for(var de=0;de<G.data.length;de+=G.channels)G.data[de+se]=_Mathmin(_Mathmax(0,0|(G.data[de+se]-W[se])*$[se]+0.5),G.maxValue)}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(G={}){var W=G.algorithm,Z=void 0===W?'range':W,Q=G.channels,J=G.min,$=void 0===J?this.min:J,ee=G.max,te=void 0===ee?this.max:ee;switch(this.checkProcessable('level',{bitDepth:[8,16]}),Q=(0,O.validateArrayOfChannels)(this,{channels:Q}),Z){case'range':0>$&&($=0),te>this.maxValue&&(te=this.maxValue),Array.isArray($)||($=(0,T.default)(Q.length,$)),Array.isArray(te)||(te=(0,T.default)(Q.length,te)),L(this,$,te,Q);break;default:throw new Error('level: algorithm not implement: '+Z);}return this};var E=I(4),T=function(G){return G&&G.__esModule?G:{default:G}}(E),O=I(1)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(G={}){var W=G.radius,Z=void 0===W?1:W,Q=G.channels,J=G.border,$=void 0===J?'copy':J;if(this.checkProcessable('median',{bitDepth:[8,16]}),1>Z)throw new Error('Kernel radius should be greater than 0');Q=(0,L.validateArrayOfChannels)(this,Q,!0);for(var ee=Z,te=Z,ae=O.default.createFrom(this),ie=(2*ee+1)*(2*te+1),ne=_Mathfloor(ie/2),oe=Array(ie),le=0,se;le<Q.length;le++){se=Q[le];for(var de=te;de<this.height-te;de++)for(var he=ee,ue;he<this.width-ee;he++){ue=0;for(var ce=-te;ce<=te;ce++)for(var pe=-ee,ge;pe<=ee;pe++)ge=((de+ce)*this.width+he+pe)*this.channels+se,oe[ue++]=this.data[ge];var fe=(de*this.width+he)*this.channels+se,_e=oe.sort(E.asc)[ne];ae.data[fe]=_e}}if(this.alpha&&!Q.includes(this.channels))for(var be=this.components;be<this.data.length;be+=this.channels)ae.data[be]=this.data[be];return ae.setBorder({size:[ee,te],algorithm:$}),ae};var L=I(1),E=I(47),T=I(0),O=function(G){return G&&G.__esModule?G:{default:G}}(T)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E,T={}){var O=T.channels;if(this.checkProcessable('multiply',{bitDepth:[8,16]}),0>=E)throw new Error('multiply: the value must be greater than 0');if(O=(0,R.validateArrayOfChannels)(this,{channels:O}),E=(0,L.checkNumberArray)(E),!isNaN(E))for(var G=0,W;G<O.length;G++){W=O[G];for(var Z=0;Z<this.data.length;Z+=this.channels)this.data[Z+W]=_Mathmin(this.maxValue,this.data[Z+W]*E>>0)}else{if(this.data.length!==E.length)throw new Error('multiply: the data size is different');for(var Q=0,J;Q<O.length;Q++){J=O[Q];for(var $=0;$<this.data.length;$+=this.channels)this.data[$+J]=_Mathmax(0,_Mathmin(this.maxValue,this.data[$+J]*E[$+J]>>0))}}return this};var R=I(1),L=I(15)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O={}){var G=O.kernelX,W=G===void 0?T.GRADIENT_X:G,Z=O.kernelY,Q=Z===void 0?T.GRADIENT_Y:Z,J=O.border,$=J===void 0?'copy':J,ee=O.channels,te=O.bitDepth,ae=te===void 0?this.bitDepth:te;this.checkProcessable('sobel',{bitDepth:[8,16]});var ie=E.default.call(this,W,{channels:ee,border:$,bitDepth:32}),ne=E.default.call(this,Q,{channels:ee,border:$,bitDepth:32});return ie.hypotenuse(ne,{bitDepth:ae,channels:ee})};var L=I(18),E=function(O){return O&&O.__esModule?O:{default:O}}(L),T=I(35)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E,T={}){var O=T.channels;if(this.checkProcessable('subtract',{bitDepth:[8,16]}),O=(0,R.validateArrayOfChannels)(this,{channels:O}),E=(0,L.checkNumberArray)(E),!isNaN(E))for(var G=0,W;G<O.length;G++){W=O[G];for(var Z=0;Z<this.data.length;Z+=this.channels)this.data[Z+W]=_Mathmax(0,this.data[Z+W]-E>>0)}else{if(this.data.length!==E.length)throw new Error('substract: the data size is different');for(var Q=0,J;Q<O.length;Q++){J=O[Q];for(var $=0;$<this.data.length;$+=this.channels)this.data[$+J]=_Mathmax(0,_Mathmin(this.maxValue,this.data[$+J]-E[$+J]>>0))}}return this};var R=I(1),L=I(15)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.getKind=function(Z){return W[Z]},P.getTheoreticalPixelArraySize=function(Z){var Q=Z.channels*Z.size;return 1===Z.bitDepth&&(Q=_Mathceil(Q/8)),Q},P.createPixelArray=function(Z){var Q=Z.channels*Z.size,J;switch(Z.bitDepth){case 1:J=new Uint8Array(_Mathceil(Q/8));break;case 8:J=new Uint8ClampedArray(Q);break;case 16:J=new Uint16Array(Q);break;case 32:J=new Float32Array(Q);break;default:throw new Error('Cannot create pixel array for bit depth '+Z.bitDepth);}if(Z.alpha)for(var $=Z.components;$<J.length;$+=Z.channels)J[$]=Z.maxValue;return J};var T=I(14),O=function(Z){if(Z&&Z.__esModule)return Z;var Q={};if(null!=Z)for(var J in Z)Object.prototype.hasOwnProperty.call(Z,J)&&(Q[J]=Z[J]);return Q.default=Z,Q}(T),G=I(2),W={};W[O.BINARY]={components:1,alpha:0,bitDepth:1,colorModel:G.GREY},W[O.GREYA]={components:1,alpha:1,bitDepth:8,colorModel:G.GREY},W[O.GREY]={components:1,alpha:0,bitDepth:8,colorModel:G.GREY},W[O.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:G.RGB},W[O.RGB]={components:3,alpha:0,bitDepth:8,colorModel:G.RGB},W[O.CMYK]={components:4,alpha:0,bitDepth:8,colorModel:G.CMYK},W[O.CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:G.CMYK}},function(_,P,I){'use strict';function S(ue){return ue&&ue.__esModule?ue:{default:ue}}function R(ue){return(255&ue)<<8|255&ue>>8}function E(ue,ce,pe){function ge(xe,ye){if(!xe)throw new Error(`This kind of image (${fe}) can only be loaded from URL.`);return Q(xe,ye)}var fe=(0,se.default)(ue);if(fe)switch(fe.ext){case'png':return O(ue);case'jpg':{var _e=(0,ne.decode)(ue),be;return _e.exif&&(be=W(_e.exif)),ge(pe,{meta:be})}case'tif':return G(ue);}return ge(pe)}function T(ue,ce){var pe=ue.slice(0,64).match(he),ge;return ge=pe?Promise.resolve((0,de.decode)(ue.slice(pe[0].length))):(0,ae.fetchBinary)(ue,ce),ge.then((fe)=>{var _e=new Uint8Array(fe);return E(_e,ce,ue)})}function O(ue){var ce=new ie.PNGDecoder(ue),pe=ce.decode(),ge=pe.bitDepth,fe=pe.data.buffer,_e;if(8===ge)_e=new Uint8ClampedArray(fe);else if(16===ge){_e=new Uint16Array(fe);for(var be=0;be<_e.length;be++)_e[be]=R(_e[be])}var xe=pe.colourType,ye,we=0;switch(xe){case 0:ye=1;break;case 2:ye=3;break;case 4:ye=1,we=1;break;case 6:ye=3,we=1;break;default:throw new Error(`Unexpected colourType: ${xe}`);}return new $.default(pe.width,pe.height,_e,{components:ye,alpha:we,bitDepth:ge})}function G(ue){var ce=(0,oe.decode)(ue);return 1===ce.length?Z(ce[0]):new te.default(ce.map(Z))}function W(ue){var ce={tiff:ue};return ue.exif&&(ce.exif=ue.exif),ue.gps&&(ce.gps=ue.gps),ce}function Z(ue){return new $.default(ue.width,ue.height,ue.data,{components:1,alpha:0,colorModel:null,bitDepth:ue.bitsPerSample.length?ue.bitsPerSample[0]:ue.bitsPerSample,meta:W(ue)})}function Q(ue,ce){return ce=ce||{},new Promise(function(pe,ge){var fe=new ae.DOMImage;(0,ae.isDifferentOrigin)(ue)&&(fe.crossOrigin='Anonymous'),fe.onload=function(){var _e=fe.width,be=fe.height,xe=new ae.Canvas(_e,be),ye=xe.getContext('2d');ye.drawImage(fe,0,0,_e,be);var we=ye.getImageData(0,0,_e,be).data;pe(new $.default(_e,be,we,ce))},fe.onerror=function(){ge(new Error('Could not load '+ue))},fe.src=ue})}Object.defineProperty(P,'__esModule',{value:!0}),P.loadImage=function(ue,ce){if('string'==typeof ue)return T(ue,ce);if(ue instanceof ArrayBuffer)return Promise.resolve(E(new Uint8Array(ue),ce));if(ue.buffer)return Promise.resolve(E(ue,ce));throw new Error('argument to "load" must be a string or buffer.')};var J=I(0),$=S(J),ee=I(12),te=S(ee),ae=I(17),ie=I(187),ne=I(184),oe=I(55),le=I(190),se=S(le),de=I(32),he=/^data:[a-z]+\/([a-z]+);base64,/},function(_,P,I){'use strict';function R(J){Z||(Z=new O.default(1,1));var $=W.get(J);return $||($=new Q(J),W.set(J,$)),$}Object.defineProperty(P,'__esModule',{value:!0}),P.canWrite=function(J){return'node'===G.env&&'image/png'!==J?!1:R(J).canWrite()},P.getType=function(J){return J.includes('/')||(J='image/'+J),J};var T=I(0),O=function(J){return J&&J.__esModule?J:{default:J}}(T),G=I(17),W=new Map,Z=void 0;class Q{constructor(J){this.type=J,this._canWrite=null}canWrite(){return null===this._canWrite&&(this._canWrite=Z.toDataURL(this.type).startsWith('data:'+this.type)),this._canWrite}}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T,O={}){var G=O.position;if(this.checkProcessable('extract',{bitDepth:[1,8,16]}),!G&&(G=T.getRelativePosition(this),!G))throw new Error('extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].');if(1<this.bitDepth){for(var W=E.default.createFrom(this,{width:T.width,height:T.height,alpha:1,position:G,parent:this}),Z=0;Z<T.width;Z++)for(var Q=0;Q<T.height;Q++){for(var J=0,$;J<this.channels;J++)$=this.getValueXY(Z+G[0],Q+G[1],J),W.setValueXY(Z,Q,J,$);T.getBitXY(Z,Q)||W.setValueXY(Z,Q,this.components,0)}return W}for(var ee=E.default.createFrom(this,{width:T.width,height:T.height,position:G,parent:this}),te=0;te<T.height;te++)for(var ae=0;ae<T.width;ae++)T.getBitXY(ae,te)&&this.getBitXY(ae+G[0],te+G[1])&&ee.setBitXY(ae,te);return ee};var L=I(0),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';function S(W){return W&&W.__esModule?W:{default:W}}function L(W,Z){this.x=W,this.y=Z}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(W={}){var Z=W.x,Q=void 0===Z?0:Z,J=W.y,$=void 0===J?0:J,ee=W.inPlace,ae=void 0===ee||ee?this:G.default.createFrom(this);if(this.checkProcessable('floodFill',{bitDepth:1}),1===this.bitDepth){var ie=this.getBitXY(Q,$);if(ie)return ae;var ne=new T.default;for(ne.push(new L(Q,$));0<ne.length;){var oe=ne.shift();ae.setBitXY(oe.x,oe.y);for(var le=oe.x+1;le<this.width&&!ae.getBitXY(le,oe.y)&&!this.getBitXY(le,oe.y);le++)ae.setBitXY(le,oe.y),oe.y+1<this.height&&!this.getBitXY(le,oe.y+1)&&ne.push(new L(le,oe.y+1)),0<=oe.y-1&&!this.getBitXY(le,oe.y-1)&&ne.push(new L(le,oe.y-1));for(var se=oe.x-1;0<=se&&!ae.getBitXY(se,oe.y)&&!this.getBitXY(se,oe.y);se++)ae.setBitXY(se,oe.y),oe.y+1<this.height&&!this.getBitXY(se,oe.y+1)&&ne.push(new L(se,oe.y+1)),0<=oe.y-1&&!this.getBitXY(se,oe.y-1)&&ne.push(new L(se,oe.y-1))}}return ae};var E=I(185),T=S(E),O=I(0),G=S(O)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E,T,O={}){var G=O.color,W=void 0===G?'blue':G,Z=O.colors,Q=O.font,J=void 0===Q?'12px Helvetica':Q,$=O.rotate,ee=void 0===$?0:$;if(this.checkProcessable('paintMasks',{channels:[3,4],bitDepth:[8,16],colorModel:R.RGB}),!Array.isArray(E))throw Error('paintLabels: labels must be an array');if(!Array.isArray(T))throw Error('paintLabels: positions must be an array');if(W&&!Array.isArray(W)&&(W=(0,L.css2array)(W)),Z=Z?Z.map(function(le){return Array.isArray(le)?le:(0,L.css2array)(le)}):[W],E.length!==T.length)throw Error('paintLabels: positions and labels must be arrays from the same size');Array.isArray(J)||(J=[J]),Array.isArray(ee)||(ee=[ee]);for(var te=this.getCanvas({originalData:!0}),ae=te.getContext('2d'),ie=0;ie<E.length;ie++){ae.save();var ne=Z[ie%Z.length];ae.fillStyle=`rgba(${ne[0]},${ne[1]},${ne[2]},${ne[3]/this.maxValue})`,ae.font=J[ie%J.length];var oe=T[ie];ae.translate(oe[0],oe[1]),ae.rotate(ee[ie%ee.length]/180*_MathPI),ae.fillText(E[ie],0,0),ae.restore()}return this.setData(ae.getImageData(0,0,this.width,this.height).data),this};var R=I(2),L=I(33)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E,T={}){var O=T.color,G=O===void 0?'red':O,W=T.colors,Z=T.alpha,Q=Z===void 0?255:Z,J=T.randomColors,ee=T.distinctColors,ae=T.labels,ie=ae===void 0?[]:ae,ne=T.labelsPosition,oe=ne===void 0?[]:ne,le=T.labelColor,se=le===void 0?'blue':le,de=T.labelFont,he=de===void 0?'12px Helvetica':de;this.checkProcessable('paintMasks',{channels:[3,4],bitDepth:[8,16],colorModel:R.RGB}),G&&!Array.isArray(G)&&(G=(0,L.css2array)(G)),W&&(W=W.map(function(ke){return Array.isArray(ke)?ke:(0,L.css2array)(ke)})),Array.isArray(E)||(E=[E]),ee!==void 0&&ee&&(W=(0,L.getDistinctColors)(E.length));for(var ue=0,ce;ue<E.length;ue++){ce=E[ue],W?G=W[ue%W.length]:J!==void 0&&J&&(G=(0,L.getRandomColor)());for(var pe=0;pe<ce.width;pe++)for(var ge=0;ge<ce.height;ge++)if(ce.getBitXY(pe,ge))for(var fe=0;fe<_Mathmin(this.components,G.length);fe++)if(255===Q)this.setValueXY(pe+ce.position[0],ge+ce.position[1],fe,G[fe]);else{var _e=this.getValueXY(pe+ce.position[0],ge+ce.position[1],fe);_e=_Mathround((_e*(255-Q)+G[fe]*Q)/255),this.setValueXY(pe+ce.position[0],ge+ce.position[1],fe,_e)}}if(Array.isArray(ie)&&0<ie.length){var be=this.getCanvas({originalData:!0}),xe=be.getContext('2d');xe.fillStyle=se,xe.font=he;for(var ye=0,we;ye<_Mathmin(E.length,ie.length);ye++)we=oe[ye]?oe[ye]:E[ye].position,xe.fillText(ie[ye],we[0],we[1]);this.setData(xe.getImageData(0,0,this.width,this.height).data)}return this};var R=I(2),L=I(33)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O,G={}){var W=G.color,Z=W===void 0?[this.maxValue,0,0]:W,Q=G.shape;this.checkProcessable('paintPoints',{components:3,bitDepth:[8,16],colorModel:L.RGB});for(var J=new T.default(Q).getPoints(),$=_Mathmin(this.channels,Z.length),ee=0;ee<O.length;ee++)for(var te=O[ee][0],ae=O[ee][1],ie=0;ie<J.length;ie++){var ne=J[ie][0],oe=J[ie][1];if(0<=te+ne&&0<=ae+oe&&te+ne<this.width&&ae+oe<this.height)for(var le=(te+ne+(ae+oe)*this.width)*this.channels,se=0;se<$;se++)this.data[le+se]=Z[se]}return this};var L=I(2),E=I(13),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P,I){'use strict';function R(ie){return ie&&ie.__esModule?ie:{default:ie}}function L(ie){for(var ne=ie.map,oe=ne.data,le=new Set,se=new Map,de=new Set,he=[1,0,-1,0],ue=[0,1,0,-1],ce=ie.minX;ce<=ie.maxX;ce++)for(var pe=ie.minY,ge;pe<=ie.maxY;pe++)if(ge=ce+pe*ne.width,oe[ge]===ie.id)for(var fe=0;4>fe;fe++){var _e=ce+he[fe],be=pe+ue[fe];if(0<=_e&&0<=be&&_e<ne.width&&be<ne.height){var xe=_e+be*ne.width;if(oe[xe]!==ie.id&&!de.has(xe)){de.add(xe),le.add(oe[xe]);var ye=se.get(oe[xe]);ye?se.set(oe[xe],++ye):se.set(oe[xe],1)}}}var we=Array.from(le),ke=we.map(function(ve){return se.get(ve)});return{ids:we,lengths:ke}}function E(ie){for(var ne=new Set,oe=ie.map,le=oe.data,se=[0,ie.height-1],de=0,he;de<se.length;de++){he=se[de];for(var ue=0,ce;ue<ie.width;ue++){if(ce=(he+ie.minY)*oe.width+ue+ie.minX,0<ue-ie.minX&&le[ce]===ie.id&&le[ce-1]!==ie.id){var pe=le[ce-1];ne.add(pe)}if(1<oe.width-ue-ie.minX&&le[ce]===ie.id&&le[ce+1]!==ie.id){var ge=le[ce+1];ne.add(ge)}}}for(var fe=[0,ie.width-1],_e=0,be;_e<fe.length;_e++){be=fe[_e];for(var xe=0,ye;xe<ie.height;xe++){if(ye=(xe+ie.minY)*oe.width+be+ie.minX,0<xe-ie.minY&&le[ye]===ie.id&&le[ye-oe.width]!==ie.id){var we=le[ye-oe.width];ne.add(we)}if(1<oe.height-xe-ie.minY&&le[ye]===ie.id&&le[ye+oe.width]!==ie.id){var ke=le[ye+oe.width];ne.add(ke)}}}return Array.from(ne)}function T(ie){var ne=0,oe=ie.map,le=oe.data,se=[0];1<ie.height&&(se[1]=ie.height-1);var de=!0,he=!1,ue;try{for(var ce=se[Symbol.iterator](),pe,ge;!(de=(pe=ce.next()).done);de=!0){ge=pe.value;for(var fe=1,_e;fe<ie.width-1;fe++)_e=(ge+ie.minY)*oe.width+fe+ie.minX,le[_e]===ie.id&&ne++}}catch(je){he=!0,ue=je}finally{try{!de&&ce.return&&ce.return()}finally{if(he)throw ue}}var be=[0];1<ie.width&&(be[1]=ie.width-1);var xe=!0,ye=!1,we;try{for(var ke=be[Symbol.iterator](),ve,Me;!(xe=(ve=ke.next()).done);xe=!0){Me=ve.value;for(var Pe=0,De;Pe<ie.height;Pe++)De=(Pe+ie.minY)*oe.width+Me+ie.minX,le[De]===ie.id&&ne++}}catch(je){ye=!0,we=je}finally{try{!xe&&ke.return&&ke.return()}finally{if(ye)throw we}}return ne}function O(ie){for(var ne=0,oe=ie.map,le=oe.data,se=1;se<ie.width-1;se++)for(var de=1,he;de<ie.height-1;de++)he=(de+ie.minY)*oe.width+se+ie.minX,le[he]===ie.id&&(le[he-1]!==ie.id||le[he+1]!==ie.id||le[he-oe.width]!==ie.id||le[he+oe.width]!==ie.id)&&ne++;return ne+ie.box}function G(ie){for(var ne=0,oe=ie.map,le=oe.data,se=1;se<ie.width-1;se++)for(var de=1,he;de<ie.height-1;de++)he=(de+ie.minY)*oe.width+se+ie.minX,le[he]===ie.id&&(ie.externalIDs.includes(le[he-1])||ie.externalIDs.includes(le[he+1])||ie.externalIDs.includes(le[he-oe.width])||ie.externalIDs.includes(le[he+oe.width]))&&ne++;return ne+ie.box}function W(ie){var ne=[ie.id],oe=ie.map,le=oe.data;if(2<ie.height)for(var se=0,de;se<ie.width;se++)if(de=ie.minY*oe.width+se+ie.minX,ne.includes(le[de])){var he=le[de+oe.width];ne.includes(he)||ie.boxIDs.includes(he)||ne.push(he)}for(var ue=[,,,,],ce=1;ce<ie.width-1;ce++)for(var pe=1,ge;pe<ie.height-1;pe++)if(ge=(pe+ie.minY)*oe.width+ce+ie.minX,ne.includes(le[ge])){ue[0]=le[ge-1],ue[1]=le[ge+1],ue[2]=le[ge-oe.width],ue[3]=le[ge+oe.width];for(var fe=0,_e;4>fe;fe++)_e=ue[fe],ne.includes(_e)||ie.boxIDs.includes(_e)||ne.push(_e)}return ne}Object.defineProperty(P,'__esModule',{value:!0});var Z=I(0),Q=R(Z),J=I(14),$=function(ie){if(ie&&ie.__esModule)return ie;var ne={};if(null!=ie)for(var oe in ie)Object.prototype.hasOwnProperty.call(ie,oe)&&(ne[oe]=ie[oe]);return ne.default=ie,ne}(J),ee=I(13),te=R(ee);class ae{constructor(ie,ne){this.map=ie,this.id=ne,this.minX=_NumberPOSITIVE_INFINITY,this.maxX=_NumberNEGATIVE_INFINITY,this.minY=_NumberPOSITIVE_INFINITY,this.maxY=_NumberNEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(ie={}){var ne=ie.scale,oe=void 0===ne?1:ne,le=ie.kind,se=void 0===le?'':le,de;return de='contour'===se?this.contourMask:'box'===se?this.boxMask:'filled'===se?this.filledMask:'center'===se?this.centerMask:this.mask,1>oe&&(de=de.scale({factor:oe}),de.parent=this.mask.parent,de.position[0]+=this.minX,de.position[1]+=this.minY),de}get mean(){throw new Error('Roi mean not implemented yet')}get center(){return this.computed.center?this.computed.center:this.computed.center=[this.width/2>>0,this.height/2>>0]}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){var ie=this.borderIDs,ne=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];for(var oe=this.internalIDs,le=0;le<ie.length;le++)oe.includes(ie[le])||(this.computed.externalIDs.push(ie[le]),this.computed.externalLengths.push(ne[le]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){var ie=L(this);this.computed.borderIDs=ie.ids,this.computed.borderLengths=ie.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs?this.computed.boxIDs:this.computed.boxIDs=E(this)}get internalIDs(){return this.computed.internalIDs?this.computed.internalIDs:this.computed.internalIDs=W(this)}get box(){return this.computed.box?this.computed.box:this.computed.box=T(this)}get external(){return this.computed.external?this.computed.external:this.computed.external=G(this)}get border(){return this.computed.border?this.computed.border:this.computed.border=O(this)}get contourMask(){if(this.computed.contourMask)return this.computed.contourMask;for(var ie=new Q.default(this.width,this.height,{kind:$.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),ne=0;ne<this.width;ne++)for(var oe=0;oe<this.height;oe++)this.map.data[ne+this.minX+(oe+this.minY)*this.map.width]===this.id&&(0<ne&&ne<this.width-1&&0<oe&&oe<this.height-1?(this.map.data[ne-1+this.minX+(oe+this.minY)*this.map.width]!==this.id||this.map.data[ne+1+this.minX+(oe+this.minY)*this.map.width]!==this.id||this.map.data[ne+this.minX+(oe-1+this.minY)*this.map.width]!==this.id||this.map.data[ne+this.minX+(oe+1+this.minY)*this.map.width]!==this.id)&&ie.setBitXY(ne,oe):ie.setBitXY(ne,oe));return this.computed.contour=ie}get boxMask(){if(this.computed.boxMask)return this.computed.boxMask;for(var ie=new Q.default(this.width,this.height,{kind:$.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),ne=0;ne<this.width;ne++)ie.setBitXY(ne,0),ie.setBitXY(ne,this.height-1);for(var oe=0;oe<this.height;oe++)ie.setBitXY(0,oe),ie.setBitXY(this.width-1,oe);return this.computed.boxMask=ie}get mask(){if(this.computed.mask)return this.computed.mask;for(var ie=new Q.default(this.width,this.height,{kind:$.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),ne=0;ne<this.width;ne++)for(var oe=0;oe<this.height;oe++)this.map.data[ne+this.minX+(oe+this.minY)*this.map.width]===this.id&&ie.setBitXY(ne,oe);return this.computed.mask=ie}get filledMask(){if(this.computed.filledMask)return this.computed.filledMask;for(var ie=new Q.default(this.width,this.height,{kind:$.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),ne=0;ne<this.width;ne++)for(var oe=0,le;oe<this.height;oe++)le=ne+this.minX+(oe+this.minY)*this.map.width,this.internalIDs.includes(this.map.data[le])&&ie.setBitXY(ne,oe);return this.computed.filledMask=ie}get centerMask(){if(this.computed.centerMask)return this.computed.centerMask;var ie=new te.default({kind:'smallCross'}).getMask();return ie.parent=this.map.parent,ie.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=ie}get points(){if(this.computed.points)return this.computed.points;for(var ie=[],ne=0;ne<this.height;ne++)for(var oe=0,le;oe<this.width;oe++)le=(ne+this.minY)*this.map.width+oe+this.minX,this.map.data[le]===this.id&&ie.push([oe,ne]);return this.computed.points=ie}get maxLengthPoints(){if(this.computed.maxLengthPoints)return this.computed.maxLengthPoints;for(var ie=0,ne=void 0,oe=this.points,le=0;le<oe.length;le++)for(var se=le+1,de;se<oe.length;se++)de=_Mathpow(oe[le][0]-oe[se][0],2)+_Mathpow(oe[le][1]-oe[se][1],2),de>=ie&&(ie=de,ne=[oe[le],oe[se]]);return this.computed.maxLengthPoints=ne}get maxLength(){if(this.computed.maxLength)return this.computed.maxLength;var ie=_Mathsqrt(_Mathpow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+_Mathpow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));return this.computed.maxLength=ie}get angle(){if(this.computed.angle)return this.computed.angle;var ie=this.maxLengthPoints,ne=180*-Math.atan2(ie[0][1]-ie[1][1],ie[0][0]-ie[1][0])/_MathPI;return this.computed.angle=ne}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface}}}P.default=ae},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0});var R=I(102),L=function(T){return T&&T.__esModule?T:{default:T}}(R);P.default=class{constructor(T,O){this.roiMap=T,this.options=O,this.roi=this.createRoi()}createRoi(){var T=this.roiMap.data,O={};this.roiMap.positive=0,this.roiMap.negative=0;for(var G=0;G<T.length;G++)T[G]&&!O[T[G]]&&(O[T[G]]=!0,0<T[G]?this.roiMap.positive++:this.roiMap.negative++);var W={};for(var Z in O)W[Z]=new L.default(this.roiMap,1*Z);for(var Q=this.roiMap.width,J=this.roiMap.height,$=0;$<Q;$++)for(var ee=0,te;ee<J;ee++)if(te=ee*Q+$,0!==T[te]){var ae=T[te],ie=W[ae];$<ie.minX&&(ie.minX=$),$>ie.maxX&&(ie.maxX=$),ee<ie.minY&&(ie.minY=ee),ee>ie.maxY&&(ie.maxY=ee),ie.meanX+=$,ie.meanY+=ee,ie.surface++}var ne=[];for(var oe in O)W[oe].meanX/=W[oe].surface,W[oe].meanY/=W[oe].surface,ne.push(W[oe]);return ne}}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T,O={}){function G(oe,le){var se=0,de=0,he=T.getBitXY(oe,le),ue=he?++J:--$;for(te[0]=oe,ae[0]=le;se<=de;){var ce=te[se&ee],pe=ae[se&ee];if(Q[pe*T.width+ce]=ue,0<ce&&0===Q[pe*T.width+ce-1]&&T.getBitXY(ce-1,pe)===he&&(de++,te[de&ee]=ce-1,ae[de&ee]=pe,Q[pe*T.width+ce-1]=-32768),0<pe&&0===Q[(pe-1)*T.width+ce]&&T.getBitXY(ce,pe-1)===he&&(de++,te[de&ee]=ce,ae[de&ee]=pe-1,Q[(pe-1)*T.width+ce]=-32768),ce<T.width-1&&0===Q[pe*T.width+ce+1]&&T.getBitXY(ce+1,pe)===he&&(de++,te[de&ee]=ce+1,ae[de&ee]=pe,Q[pe*T.width+ce+1]=-32768),pe<T.height-1&&0===Q[(pe+1)*T.width+ce]&&T.getBitXY(ce,pe+1)===he&&(de++,te[de&ee]=ce,ae[de&ee]=pe+1,Q[(pe+1)*T.width+ce]=-32768),Z&&(0<ce&&0<pe&&0===Q[(pe-1)*T.width+ce-1]&&T.getBitXY(ce-1,pe-1)===he&&(de++,te[de&ee]=ce-1,ae[de&ee]=pe-1,Q[(pe-1)*T.width+ce-1]=-32768),ce<T.width-1&&0<pe&&0===Q[(pe-1)*T.width+ce+1]&&T.getBitXY(ce+1,pe-1)===he&&(de++,te[de&ee]=ce+1,ae[de&ee]=pe-1,Q[(pe-1)*T.width+ce+1]=-32768),0<ce&&pe<T.height-1&&0===Q[(pe+1)*T.width+ce-1]&&T.getBitXY(ce-1,pe+1)===he&&(de++,te[de&ee]=ce-1,ae[de&ee]=pe+1,Q[(pe+1)*T.width+ce-1]=-32768),ce<T.width-1&&pe<T.height-1&&0===Q[(pe+1)*T.width+ce+1]&&T.getBitXY(ce+1,pe+1)===he&&(de++,te[de&ee]=ce+1,ae[de&ee]=pe+1,Q[(pe+1)*T.width+ce+1]=-32768)),se++,de-se>ee)throw new Error('analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY')}}for(var W=O.allowCorners,Z=W!==void 0&&W,Q=new Int16Array(T.size),J=0,$=0,ee=65535,te=new Uint16Array(ee+1),ae=new Uint16Array(ee+1),ie=0;ie<T.width;ie++)for(var ne=0;ne<T.height;ne++)0===Q[ne*T.width+ie]&&G(ie,ne);return new E.default(T,Q)};var L=I(9),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';function S(ee){return ee&&ee.__esModule?ee:{default:ee}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(ee,te={}){var ae=te.allowCorners,ne=4;ae!==void 0&&ae&&(ne=8);var oe,le,se;if(8==ne)oe=Q,le=J,se=$;else if(4==ne)oe=G,le=W,se=Z;else throw new RangeError('unsupported neighbours count: '+ne);for(var de=ee.size,he=ee.width,ue=ee.height,ce=Array(de),pe=new Int16Array(de),ge=new E.default,fe=1,_e=0;_e<ue;_e++)for(var be=0,xe;be<he;be++)if(xe=be+_e*he,ee.getBit(xe)){for(var ye=null,we=0;we<se.length;we++){var ke=be+oe[we],ve=_e+le[we];if(0<=ke&&0<=ve&&ke<he&&ve<ue){var Pe=ce[ke+ve*he];Pe?(se[we]=Pe,(!ye||se[we].value<ye.value)&&(ye=se[we])):se[we]=null}}if(!ye)ce[xe]=ge.add(fe++);else{ce[xe]=ye;for(var De=0;De<se.length;De++)se[De]&&se[De]!==ye&&ge.union(ye,se[De])}}for(var je=0;je<ue;je++)for(var Ie=0,Se;Ie<he;Ie++)Se=Ie+je*he,ee.getBit(Se)&&(pe[Se]=ge.find(ce[Se]).value);return new O.default(ee,pe)};var L=I(200),E=S(L),T=I(9),O=S(T),G=[-1,0],W=[0,-1],Z=[null,null],Q=[-1,-1,0,1],J=[0,-1,-1,-1],$=[null,null,null,null]},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T={}){function O({maxima:ve=!0}){for(var Me=1;Me<ae.height-1;Me++)for(var Pe=1,De;Pe<ae.width-1;Pe++)if(De=Pe+Me*ae.width,0===de[De]){var je=ve?ae.data[De]:-ae.data[Pe+Me*ae.width];if(ae.data[Me*ae.width+Pe-1]>je)continue;if(ae.data[Me*ae.width+Pe+1]>je)continue;if(ae.data[(Me-1)*ae.width+Pe]>je)continue;if(ae.data[(Me+1)*ae.width+Pe]>je)continue;if(Q){if(ae.data[(Me-1)*ae.width+Pe-1]>je)continue;if(ae.data[(Me-1)*ae.width+Pe+1]>je)continue;if(ae.data[(Me+1)*ae.width+Pe-1]>je)continue;if(ae.data[(Me+1)*ae.width+Pe+1]>je)continue}se[De]=ve?++oe:--le;var Ie=G(Pe,Me,ie);Ie||(ve?--oe:++le)}}function G(ve,Me){var Pe=fe;xe=0,ye=1,_e[0]=ve,be[0]=Me;for(var De=!0;xe<ye;){var je=_e[xe&ue],Ie=be[xe&ue];De&=W(je,Ie,ie),xe++}if(!De){for(var Se=0;Se<ye;Se++){var Ce=_e[Se&ue],Re=be[Se&ue],Ae=Re*ae.width+Ce;se[Ae]=0}fe=Pe}return De}function W(ve,Me,Pe){for(var De=se[Me*ae.width+ve],je=ae.data[Me*ae.width+ve],Ie=Me-1;Ie<=Me+1;Ie++)for(var Se=ve-1,Ce;Se<=ve+1;Se++)if(Ce=Ie*ae.width+Se,0===de[Ce])switch(de[Ce]=1,he[Ce]=ae.data[Ce]-je,Pe){case ie:if(0===he[Ce]){if(0===Se||0===Ie||Se===ae.width-1||Ie===ae.height-1)return!1;se[Ce]=De,_e[ye&ue]=Se,be[ye&ue]=Ie,ye++}else{if(0<he[Ce])return!1;$||(se[Ce]=De,ce[fe&ue]=Se,pe[fe&ue]=Ie,fe++)}break;case ne:0>=he[Ce]&&(se[Ce]=De,ce[fe&ue]=Se,pe[fe&ue]=Ie,fe++);break;default:throw new Error('unreachable');}return!0}var Z=T.allowCorner,Q=!(Z!==void 0)||Z,J=T.onlyTop,$=J!==void 0&&J,ee=T.invert,ae=this;ae.checkProcessable('fromMaxima',{components:[1]});var ie=1,ne=2,oe=0,le=0,se=new Int16Array(ae.size),de=new Int8Array(ae.size),he=new Float32Array(ae.size),ue=1048575,ce=new Uint16Array(ue+1),pe=new Uint16Array(ue+1),ge=0,fe=0,_e=new Uint16Array(ue+1),be=new Uint16Array(ue+1),xe=0,ye=0;for(O(ae,{maxima:!(ee!==void 0&&ee)});ge<fe;){var we=ce[ge&ue],ke=pe[ge&ue];W(we,ke,ne),ge++}return new E.default(ae,se)};var L=I(9),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';function S(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(G,W={}){for(var Z=new O.default(W),Q=new Int16Array(this.size),J=0,$=Z.getPoints(),ee=0;ee<G.length;ee++){J++;for(var te=G[ee][0],ae=G[ee][1],ie=0;ie<$.length;ie++){var ne=$[ie][0],oe=$[ie][1];0<=te+ne&&0<=ae+oe&&te+ne<this.width&&ae+oe<this.height&&(Q[te+ne+(ae+oe)*this.width]=J)}}return new E.default(this,Q)};var L=I(9),E=S(L),T=I(13),O=S(T)},function(_,P,I){'use strict';function S(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(W={}){var Z=W.points,Q=W.mask,J=W.image,$=W.fillMaxValue,ee=$===void 0?this.maxValue:$,te=W.invert,ae=te!==void 0&&te,ie=J||this;ie.checkProcessable('fromWaterShed',{bitDepth:[8,16],components:1}),ae=!ae,Z||(Z=ie.getLocalMaxima({invert:ae,mask:Q}));for(var ne=ae?0:1,oe=new Int16Array(ie.size),le=ie.width,se=ie.height,de=new O.default({comparator:(we,ke)=>we[2]-ke[2],strategy:O.default.BinaryHeapStrategy}),he=0,ue;he<Z.length;he++){ue=Z[he][0]+Z[he][1]*le,oe[ue]=he+1;var ce=ie.data[ue];(ae&&ce<=ee||!ae&&ce>=ee)&&de.queue([Z[he][0],Z[he][1],ce])}for(;0<de.length;)for(var pe=de.dequeue(),ge=pe[0]+pe[1]*le,fe=0;4>fe;fe++){var _e=pe[0]+G.dxs[fe],be=pe[1]+G.dys[fe];if(0<=_e&&0<=be&&_e<le&&be<se){var xe=_e+be*le;if(!Q||Q.getBit(xe)===ne){var ye=ie.data[xe];(ae&&ye<=ee||!ae&&ye>=ee)&&0===oe[xe]&&(oe[xe]=oe[ge],de.queue([pe[0]+G.dxs[fe],pe[1]+G.dys[fe],ye]))}}}return new E.default(ie,oe)};var L=I(9),E=S(L),T=I(194),O=S(T),G=I(165)},function(_,P,I){'use strict';function S(he){return he&&he.__esModule?he:{default:he}}function R(he,ue,ce,pe,ge){for(var fe={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0},_e=0;_e<ce.length;_e++){var be=ce[_e],xe=be[0],ye=be[1],we=xe+he+(ye+ue)*pe.width,ke=pe.data[we];(0<ke||0>ke)&&(fe.id.includes(ke)?fe.surface[fe.id.indexOf(ke)]+=1:(fe.id.push(ke),fe.surface.push(1)))}for(var ve=0,Me;ve<fe.id.length;ve++)Me=_Mathsign(fe.id[ve]),Me===ge?fe.same+=fe.surface[ve]:fe.opposite+=fe.surface[ve],fe.roiSurfaceCovered[ve]=fe.surface[ve]/ce.length;return fe.total=fe.opposite+fe.same,fe}Object.defineProperty(P,'__esModule',{value:!0});var L=I(104),E=S(L),T=I(105),O=S(T),G=I(106),W=S(G),Z=I(108),Q=S(Z),J=I(107),$=S(J),ee=I(22),te=S(ee),ae=I(0),ie=S(ae),ne=I(9),oe=S(ne),le=I(103),se=S(le);P.default=class{constructor(he,ue={}){this._image=he,this._options=ue,this._options.label||(this._options.label='default'),this._layers={},this._painted=null}fromMaxima(he={}){var ue=(0,te.default)({},this._options,he),ce=W.default.call(this._image,he);this._layers[ue.label]=new se.default(ce,ue)}fromPoints(he,ue={}){var ce=(0,te.default)({},this._options,ue),pe=$.default.call(this._image,he,ue);return this._layers[ce.label]=new se.default(pe,ce),this}putMap(he,ue={}){var ce=new oe.default(this._image,he),pe=(0,te.default)({},this._options,ue);return this._layers[pe.label]=new se.default(ce,pe),this}fromWaterShed(he={}){var ue=(0,te.default)({},this._options,he),ce=Q.default.call(this._image,he);this._layers[ue.label]=new se.default(ce,ue)}fromMask(he,ue={}){var ce=(0,te.default)({},this._options,ue),pe=E.default.call(this._image,he,ue);return this._layers[ce.label]=new se.default(pe,ce),this}fromMaskConnectedComponentLabelingAlgorithm(he,ue={}){var ce=(0,te.default)({},this._options,ue),pe=O.default.call(this._image,he,ue);return this._layers[ce.label]=new se.default(pe,ce),this}getMap(he={}){var ue=(0,te.default)({},this._options,he);return this._assertLayerWithLabel(ue.label),this._layers[ue.label].roiMap}rowsInfo(he={}){return this.getMap(he).rowsInfo()}colsInfo(he={}){return this.getMap(he).rowsInfo()}getRoiIds(he={}){var ue=this.getRois(he);if(ue){for(var ce=Array(ue.length),pe=0;pe<ue.length;pe++)ce[pe]=ue[pe].id;return ce}throw new Error('ROIs not found')}getRois(he={}){var ue=he.label,ce=void 0===ue?this._options.label:ue,pe=he.positive,fe=he.negative,be=he.minSurface,xe=void 0===be?0:be,ye=he.maxSurface,we=void 0===ye?_NumberPOSITIVE_INFINITY:ye,ke=he.minWidth,ve=void 0===ke?0:ke,Me=he.maxWidth,Pe=void 0===Me?_NumberPOSITIVE_INFINITY:Me,De=he.minHeight,je=void 0===De?0:De,Ie=he.maxHeight,Se=void 0===Ie?_NumberPOSITIVE_INFINITY:Ie,Ce=he.minRatio,Re=void 0===Ce?0:Ce,Ae=he.maxRatio,Be=void 0===Ae?_NumberPOSITIVE_INFINITY:Ae;if(!this._layers[ce])throw new Error('getRoi: This Roi layer ('+ce+') does not exists.');for(var ze=this._layers[ce].roi,Le=Array(ze.length),Ee=0,Te=0,Ve;Te<ze.length;Te++)Ve=ze[Te],(0>Ve.id&&(void 0===fe||fe)||0<Ve.id&&(void 0===pe||pe))&&Ve.surface>=xe&&Ve.surface<=we&&Ve.width>=ve&&Ve.width<=Pe&&Ve.height>=je&&Ve.height<=Se&&Ve.ratio>=Re&&Ve.ratio<=Be&&(Le[Ee++]=Ve);return Le.length=Ee,Le}getMasks(he={}){for(var ue=this.getRois(he),ce=Array(ue.length),pe=0;pe<ue.length;pe++)ce[pe]=ue[pe].getMask(he);return ce}getData(he={}){var ue=(0,te.default)({},this._options,he);return this._assertLayerWithLabel(ue.label),this._layers[ue.label].roiMap.data}paint(he={}){var ue=he.labelProperty;this._painted||(this._painted=this._image.rgba8());var ce=this.getMasks(he);if(ue){var pe=this.getRois(he);he.labels=pe.map((ge)=>ge[ue]),he.labelsPosition=pe.map((ge)=>[ge.meanX,ge.meanY])}return this._painted.paintMasks(ce,he),this._painted}getMask(he={}){for(var ue=new ie.default(this._image.width,this._image.height,{kind:'BINARY'}),ce=this.getMasks(he),pe=0,ge;pe<ce.length;pe++){ge=ce[pe];for(var fe=0;fe<ge.width;fe++)for(var _e=0;_e<ge.height;_e++)ge.getBitXY(fe,_e)&&ue.setBitXY(fe+ge.position[0],_e+ge.position[1])}return ue}resetPainted(he={}){var ue=he.image;this._painted=ue?this.image.rgba8():this._image.rgba8()}mergeRoi(he={}){var ue=(0,te.default)({},this._options,he),ce=he.algorithm,pe=void 0===ce?'commonBorder':ce,ge=he.minCommonBorderLength,fe=void 0===ge?5:ge,_e=this.getRois(ue),be=new Set;switch(pe.toLowerCase()){case'commonborder':for(var xe=0;xe<_e.length;xe++)for(var ye=0;ye<_e[xe].borderIDs.length;ye++)0!==_e[xe].borderIDs[ye]&&_e[xe].borderIDs[ye]<_e[xe].id&&_e[xe].borderLengths[ye]*fe>=_e[xe].border&&be.add([_e[xe].id,_e[xe].borderIDs[ye]]);break;default:throw new Error(`Unexpected algorithm: ${pe}`);}for(var we=this.getMap(ue).data,ke=0;ke<we.length;ke++)if(0!==we[ke]){var ve=!0,Me=!1,Pe=void 0;try{for(var De=be[Symbol.iterator](),je,Ie;!(ve=(je=De.next()).done);ve=!0)Ie=je.value,we[ke]===Ie[0]&&(we[ke]=Ie[1])}catch(Se){Me=!0,Pe=Se}finally{try{!ve&&De.return&&De.return()}finally{if(Me)throw Pe}}}return this.putMap(we,ue),this}findCorrespondingRoi(he,ue={}){for(var ce=this.getRois(ue),pe=[],ge=0;ge<ce.length;ge++){var fe=ce[ge],_e=fe.minX,be=fe.minY,xe=fe.points,ye=_Mathsign(fe.id),we=R(_e,be,xe,he,ye);pe.push(we)}return pe}_assertLayerWithLabel(he){if(!this._layers[he])throw new Error(`no layer with label ${he}`)}}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('cmyk',{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});for(var O=T.default.createFrom(this,{components:4,colorModel:L.CMYK}),G=0,W=this.data,Z=0;Z<W.length;Z+=this.channels){var Q=W[Z],J=W[Z+1],$=W[Z+2],ee=_Mathmin(this.maxValue-Q,this.maxValue-J,this.maxValue-$),te=(this.maxValue-Q-ee)/(1-ee/this.maxValue),ae=(this.maxValue-J-ee)/(1-ee/this.maxValue),ie=(this.maxValue-$-ee)/(1-ee/this.maxValue);O.data[G++]=te,O.data[G++]=ae,O.data[G++]=ie,O.data[G++]=ee,this.alpha&&(O.data[G++]=W[Z+3])}return O};var L=I(2),E=I(0),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T=8){if(this.checkProcessable('colorDepth',{bitDepth:[8,16]}),![8,16].includes(T))throw Error('You need to specify the new colorDepth as 8 or 16');if(this.bitDepth===T)return this.clone();var O=E.default.createFrom(this,{bitDepth:T});if(8===T)for(var G=0;G<this.data.length;G++)O.data[G]=this.data[G]>>8;else for(var W=0;W<this.data.length;W++)O.data[W]=this.data[W]<<8|this.data[W];return O};var L=I(0),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T={}){var O=T.x,G=void 0===O?0:O,W=T.y,Z=void 0===W?0:W,Q=T.width,J=void 0===Q?this.width-G:Q,$=T.height,ee=void 0===$?this.height-Z:$;if(this.checkProcessable('max',{bitDepth:[8,16]}),G=_Mathround(G),Z=_Mathround(Z),J=_Mathround(J),ee=_Mathround(ee),G>this.width-1||Z>this.height-1)throw new RangeError(`crop: origin (x:${G}, y:${Z}) out of range (${this.width-1}; ${this.height-1})`);if(0>=J||0>=ee)throw new RangeError(`crop: width and height (width:${J}; height:${ee}) must be positive numbers`);if(0>G||0>Z)throw new RangeError(`crop: x and y (x:${G}, y:${Z}) must be positive numbers`);if(J>this.width-G||ee>this.height-Z)throw new RangeError(`crop: (x: ${G}, y:${Z}, width:${J}, height:${ee}) size is out of range`);for(var te=E.default.createFrom(this,{width:J,height:ee,position:[G,Z]}),ae=J*this.channels,ie=Z+ee,ne=0,oe=G*this.channels,le=Z;le<ie;le++)for(var se=le*this.width*this.channels+oe,de=se+ae;se<de;se++)te.data[ne++]=this.data[se];return te};var L=I(0),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P){'use strict';function R(O,G,W){for(var Z=0;Z<O.width;Z++)for(var Q=0;Q<O.height;Q++)if(O.getValueXY(Z,Q,W)>=G)return Z;return-1}function L(O,G,W,Z){for(var Q=0;Q<O.height;Q++)for(var J=Z;J<O.width;J++)if(O.getValueXY(J,Q,W)>=G)return Q;return-1}function E(O,G,W,Z){for(var Q=O.height-1;0<=Q;Q--)for(var J=Z;J<O.width;J++)if(O.getValueXY(J,Q,W)>=G)return Q;return-1}function T(O,G,W,Z,Q,J){for(var $=O.width-1;$>=Z;$--)for(var ee=Q;ee<=J;ee++)if(O.getValueXY($,ee,W)>=G)return $;return-1}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O={}){this.checkProcessable('cropAlpha',{alpha:1});var G=O.threshold,W=G===void 0?this.maxValue:G,Z=R(this,W,this.components);if(-1===Z)throw new Error('Could not find new dimensions. Threshold may be too high.');var Q=L(this,W,this.components,Z),J=E(this,W,this.components,Z),$=T(this,W,this.components,Z,Q,J);return this.crop({x:Z,y:Q,width:$-Z+1,height:J-Q+1})}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(G={}){var W=G.algorithm,Z=W===void 0?'luma709':W,Q=G.keepAlpha,J=Q!==void 0&&Q,$=G.mergeAlpha,ee=!($!==void 0)||$,te=G.allowGrey,ie={bitDepth:[8,16],alpha:[0,1]};te!==void 0&&te||(ie.colorModel=[T.RGB],ie.components=[3]),this.checkProcessable('grey',ie),1===this.components&&(Z='red'),J&=this.alpha,ee&=this.alpha,J&&(ee=!1);var ne=E.default.createFrom(this,{components:1,alpha:J,colorModel:null}),oe=O.methods[Z.toLowerCase()];if(!oe)throw new Error('Unsupported grey algorithm: '+Z);for(var le=0,se=0;se<this.data.length;se+=this.channels)ee?ne.data[le++]=oe(this.data,se,this)*this.data[se+this.components]/this.maxValue:(ne.data[le++]=oe(this.data,se,this),ne.alpha&&(ne.data[le++]=this.data[se+this.components]));return ne};var L=I(0),E=function(G){return G&&G.__esModule?G:{default:G}}(L),T=I(2),O=I(29)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('hsl',{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});for(var O=T.default.createFrom(this,{colorModel:L.HSL}),G=_Mathfloor(this.maxValue/2),W=0,Z=this.data,Q=0;Q<Z.length;Q+=this.channels){var J=Z[Q],$=Z[Q+1],ee=Z[Q+2],te=_Mathmax(J,$,ee),ae=_Mathmin(J,$,ee),ie=0,ne=0,oe=(te+ae)/2;if(te!==ae){var le=te-ae;switch(ne=oe>G?le/(2-te-ae):le/(te+ae),te){case J:ie=($-ee)/le+($<ee?6:0);break;case $:ie=(ee-J)/le+2;break;case ee:ie=(J-$)/le+4;break;default:throw new Error('unreachable');}ie/=6}O.data[W++]=ie*this.maxValue,O.data[W++]=ne*this.maxValue,O.data[W++]=oe,this.alpha&&(O.data[W++]=Z[Q+3])}return O};var L=I(2),E=I(0),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('hsv',{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});for(var O=T.default.createFrom(this,{colorModel:L.HSV}),G=0,W=this.data,Z=0;Z<W.length;Z+=this.channels){var Q=W[Z],J=W[Z+1],$=W[Z+2],ee=_Mathmin(Q,J,$),te=_Mathmax(Q,J,$),ae=te-ee,ie=0,ne=0===te?0:ae/te;if(te!==ee){switch(te){case Q:ie=(J-$)/ae+(J<$?6:0);break;case J:ie=($-Q)/ae+2;break;case $:ie=(Q-J)/ae+4;break;default:throw new Error('unreachable');}ie/=6}O.data[G++]=ie*this.maxValue,O.data[G++]=ne*this.maxValue,O.data[G++]=te,this.alpha&&(O.data[G++]=W[Z+3])}return O};var L=I(2),E=I(0),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R){for(var L=0,E=0;E<R.length;E++)if(0!==R[E]){L=E;break}for(var T=R.length-1,O=R.length-1;O>=L;O--)if(0!==R[O]){T=O;break}for(var G=1/(T-L),W=Array(R.length),Z=0,Q=0,J=L;J<R.length;J++)Z+=J*R[J],Q+=R[J],W[J]=Z/Q;var $=Array(R.length);Z=Q=0;for(var ee=T;0<ee;ee--)Z+=ee*R[ee],Q+=R[ee],$[ee-1]=Z/Q;for(var te=-1,ae=_NumberMAX_VALUE,ie=0;ie<R.length;ie++){for(var ne=0,oe=void 0,le=0;le<=ie;le++)oe=1/(1+G*_Mathabs(le-W[ie])),1e-6>oe||0.999999<oe||(ne+=R[le]*(-oe*_Mathlog(oe)-(1-oe)*_Mathlog(1-oe)));for(var se=ie+1;se<R.length;se++)oe=1/(1+G*_Mathabs(se-$[ie])),1e-6>oe||0.999999<oe||(ne+=R[se]*(-oe*_Mathlog(oe)-(1-oe)*_Mathlog(1-oe)));ne<ae&&(ae=ne,te=ie)}return te}},function(_,P){'use strict';function R(L){for(var E=!1,T=0,O=1;O<L.length-1;O++)if(L[O-1]<L[O]&&L[O+1]<L[O]&&(T++,2<T))return!1;return 2==T&&(E=!0),E}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(L){for(var E=L.slice(),T=0;!R(E);){for(var O=0,G=0,W=E[0],Z=0;Z<L.length-1;Z++)O=G,G=W,W=E[Z+1],E[Z]=(O+G+W)/3;if(E[L.length-1]=(G+W)/3,T++,1e4<T)throw new Error('Intermodes Threshold not found after 10000 iterations')}for(var Q=0,J=1;J<L.length-1;J++)E[J-1]<E[J]&&E[J+1]<E[J]&&(Q+=J);return _Mathfloor(Q/2)}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R){for(var L,E,T,O,G=0,W=1;W<R.length;W++)if(0<R[W]){G=W+1;break}for(;;){L=0,T=0;for(var Z=0;Z<G;Z++)T+=R[Z],L+=R[Z]*Z;O=0,E=0;for(var Q=G+1;Q<R.length;Q++)E+=R[Q],O+=R[Q]*Q;if(0<T&&0<E&&(L/=T,O/=E,G===_Mathround((L+O)/2)))break;if(G++,G>R.length-2)throw new Error('Threshold not found')}return G}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L){var E,T,O,G,W,Z,Q,J,$,ee,te,ae;te=0.5,ee=0;for(var ie=0;ie<R.length;ie++)ee+=ie*R[ie];ee/=L,Q=ee;do{Z=Q,E=0|Z+0.5,T=0,G=0;for(var ne=0;ne<=E;ne++)T+=ne*R[ne],G+=R[ne];J=0===G?0:T/G,O=0,W=0;for(var oe=E+1;oe<R.length;oe++)O+=oe*R[oe],W+=R[oe];$=0===W?0:O/W,ae=(J-$)/(_Mathlog(J)-_Mathlog($)),Q=ae<-_NumberEPSILON?0|ae-0.5:0|ae+0.5}while(_Mathabs(Q-Z)>te);return E}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(G={}){var W=G.algorithm,Z=void 0===W?'threshold':W,Q=G.threshold,J=void 0===Q?0.5:Q,$=G.useAlpha,te=G.invert,ae=void 0!==te&&te;if(this.checkProcessable('mask',{components:1,bitDepth:[8,16]}),'threshold'===Z)J=(0,O.getThreshold)(J,this.maxValue);else{var ie=T.methods[Z.toLowerCase()];if(ie){var ne=this.getHistogram();J=ie(ne,this.size)}else throw new Error('mask transform unknown algorithm: '+Z)}var oe=new E.default(this.width,this.height,{kind:'BINARY',parent:this}),le=0;if(this.alpha&&(void 0===$||$))for(var se=0,de;se<this.data.length;se+=this.channels)de=this.data[se]+(this.maxValue-this.data[se])*(this.maxValue-this.data[se+1])/this.maxValue,(ae&&de<=J||!ae&&de>=J)&&oe.setBit(le),le++;else for(var he=0;he<this.data.length;he+=this.channels)(ae&&this.data[he]<=J||!ae&&this.data[he]>=J)&&oe.setBit(le),le++;return oe};var L=I(0),E=function(G){return G&&G.__esModule?G:{default:G}}(L),T=I(30),O=I(34)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L){for(var E=Array(R.length),T=0;T<R.length;T++)E[T]=R[T]/L;var O=Array(R.length),G=Array(R.length);O[0]=E[0],G[0]=1-O[0];for(var W=1;W<R.length;W++)O[W]=O[W-1]+E[W],G[W]=1-O[W];for(var Z=0,Q=0;Q<R.length;Q++)if(_Mathabs(O[Q])>=_NumberEPSILON){Z=Q;break}for(var J=R.length-1,$=R.length-1;$>=Z;$--)if(_Mathabs(G[$])>=_NumberEPSILON){J=$;break}for(var ee=-1,te=void 0,ae=_NumberMIN_VALUE,ie=void 0,ne=void 0,oe=Z;oe<=J;oe++){ie=0;for(var le=0;le<=oe;le++)0!==R[le]&&(ie-=E[le]/O[oe]*_Mathlog(E[le]/O[oe]));ne=0;for(var se=oe+1;se<R.length;se++)0!==R[se]&&(ne-=E[se]/G[oe]*_Mathlog(E[se]/G[oe]));te=ie+ne,ae<te&&(ae=te,ee=oe)}return ee}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L){for(var E=0,T=0;T<R.length;T++)E+=T*R[T];return _Mathfloor(E/L)}},function(_,P){'use strict';function R(T,O){for(var G=0,W=0;W<=O;W++)G+=T[W];return G}function L(T,O){for(var G=0,W=0;W<=O;W++)G+=W*T[W];return G}function E(T,O){for(var G=0,W=0;W<=O;W++)G+=W*W*T[W];return G}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T,O){for(var G,W=-2,Z,Q,J,$,ee,te,ae,ie,ne,oe,le,se=0,de=0;de<T.length;de++)se+=de*T[de];for(se/=O,G=se;G!==W;){var he=R(T,G),ue=R(T,T.length-1),ce=L(T,G),pe=L(T,T.length-1),ge=E(T,G),fe=E(T,T.length-1);if(Z=ce/he,Q=(pe-ce)/(ue-he),J=he/ue,$=(ue-he)/ue,ee=ge/he-Z*Z,te=(fe-ge)/(ue-he)-Q*Q,ae=1/ee-1/te,ie=Z/ee-Q/te,ne=Z*Z/ee-Q*Q/te+Math.log10(ee*($*$)/(te*(J*J))),oe=ie*ie-ae*ne,0>oe)return G;W=G,le=(ie+_Mathsqrt(oe))/ae,G=isNaN(le)?W:_Mathfloor(le)}return G}},function(_,P){'use strict';function R(T){for(var O=Array(T.length),G=1;G<T.length-1;G++)O[G]=(T[G-1]+T[G]+T[G+1])/3;return O[0]=(T[0]+T[1])/3,O[T.length-1]=(T[T.length-2]+T[T.length-1])/3,O}function L(T,O){for(var G=void 0,W=1;W<O;W++)if(T[W-1]>T[W]&&T[W+1]>=T[W]){G=W;break}return G}function E(T){for(var O=T.length,G=!1,W=0,Z=1;Z<O-1;Z++)if(T[Z-1]<T[Z]&&T[Z+1]<T[Z]&&(W++,2<W))return!1;return 2==W&&(G=!0),G}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T){if(2>T.length)return 0;for(var O=0,G=-1,W=-1,Z=Array(T.length),Q=0;Q<T.length;Q++)Z[Q]=T[Q],0<T[Q]&&(W=Q);for(;!E(Z);)if(Z=R(Z),O++,1e4<O)return G;return G=L(Z,W),G}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L){for(var E=1,T=0,O=0,G=0,W=0,Z,Q,J,$,ee,te,ae=-1,ie=R.length,ne=Array(ie),oe=0;oe<ie;oe++)ne[oe]=R[oe]/L;for(var le=0;le<ie;le++)T+=le*ne[le],O+=le*le*ne[le],G+=le*le*le*ne[le];Q=E*O-T*T,J=(-O*O+T*G)/Q,$=(E*-G+O*T)/Q,ee=0.5*(-$-_Mathsqrt($*$-4*J)),te=0.5*(-$+_Mathsqrt($*$-4*J)),Z=(te-T)/(te-ee);for(var se=0;se<ie;se++)if(W+=ne[se],W>Z){ae=se;break}return ae}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L){for(var E=0,T=0,O=0,G=0,W,Z,Q=0,J=0,$=0,ee=1;ee<R.length;++ee)E+=ee*R[ee];for(var te=1;te<R.length;++te)if(O+=R[te],0!==O){if(G=L-O,0==G)break;T+=te*R[te],W=T/O,Z=(E-T)/G,J=O*G*(W-Z)*(W-Z),J>=Q&&($=te,Q=J)}return $}},function(_,P){'use strict';function R(L,E){for(var T=0,O=0;O<=E;O++)T+=L[O];return T}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(L){for(var E=-1,O=Array(L.length),G=R(L,L.length-1),W=1,Z=0;Z<L.length;Z++)O[Z]=_Mathabs(R(L,Z)/G-0.5),O[Z]<W&&(W=O[Z],E=Z);return E}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(L,E){for(var W=Array(L.length),Z=Array(L.length),Q=Array(L.length),J=0,$=0,ee=0,te=0,ae=0,ie=0,oe=1/(1-0.5),se=1/(1-2),de=0,T,O,G;de<L.length;de++)W[de]=L[de]/E;Z[0]=W[0],Q[0]=1-Z[0];for(var he=1;he<L.length;he++)Z[he]=Z[he-1]+W[he],Q[he]=1-Z[he];O=0;for(var ue=0;ue<L.length;ue++)if(_Mathabs(Z[ue])>=_NumberEPSILON){O=ue;break}G=L.length-1;for(var ce=L.length-1;ce>=O;ce--)if(_Mathabs(Q[ce])>=_NumberEPSILON){G=ce;break}for(var pe=O;pe<=G;pe++){for(var ge=0,fe=0,_e=0,be=0;be<=pe;be++)0!==L[be]&&(ge-=W[be]/Z[pe]*_Mathlog(W[be]/Z[pe])),fe+=_Mathsqrt(W[be]/Z[pe]),_e+=W[be]*W[be]/(Z[pe]*Z[pe]);for(var xe=0,ye=0,we=0,ke=pe+1;ke<L.length;ke++)0!==L[ke]&&(xe-=W[ke]/Q[pe]*_Mathlog(W[ke]/Q[pe])),ye+=_Mathsqrt(W[ke]/Q[pe]),we+=W[ke]*W[ke]/(Q[pe]*Q[pe]);var ve=ge+xe,Me=oe*(0<fe*ye?_Mathlog(fe*ye):0),Pe=se*(0<_e*we?_Mathlog(_e*we):0);ve>te&&(te=ve,J=pe),Me>ae&&(ae=Me,$=pe),Pe>ie&&(ie=Pe,ee=pe)}var De=[J,$,ee];De.sort(R.asc);var je=5>=_Mathabs(De[0]-De[1])?5>=_Mathabs(De[1]-De[2])?[1,2,1]:[0,1,3]:5>=_Mathabs(De[1]-De[2])?[3,1,0]:[1,2,1];var Ie=Z[De[2]]-Z[De[0]];return T=_Mathround(De[0]*(Z[De[0]]+0.25*Ie*je[0])+0.25*De[1]*Ie*je[1]+De[2]*(Q[De[2]]+0.25*Ie*je[2])),T};var R=I(47)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L){for(var E=Array(R.length),T=0;T<R.length;T++)E[T]=R[T]/L;var O=Array(R.length),G=Array(R.length);O[0]=E[0],G[0]=1-O[0];for(var W=1;W<R.length;W++)O[W]=O[W-1]+E[W],G[W]=1-O[W];for(var Z=0,Q=0;Q<R.length;Q++)if(_Mathabs(O[Q])>=_NumberEPSILON){Z=Q;break}for(var J=R.length-1,$=R.length-1;$>=Z;$--)if(_Mathabs(G[$])>=_NumberEPSILON){J=$;break}for(var ee=-1,te=_NumberMAX_VALUE,ae=void 0,ie=void 0,ne=void 0,oe=void 0,le=Z;le<=J;le++){ne=0,ae=0.5/O[le];for(var se=1;se<=le;se++)ne-=E[se]*_Mathlog(1-ae*O[se-1]);ne*=ae,oe=0,ae=0.5/G[le];for(var de=le+1;de<R.length;de++)oe-=E[de]*_Mathlog(1-ae*G[de]);oe*=ae,ie=_Mathabs(ne-oe),ie<te&&(te=ie,ee=le)}return ee}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R){for(var L=0,E=0,T=0,O=0,G=0;G<R.length;G++)if(0<R[G]){L=G;break}0<L&&L--;for(var W=R.length-1;0<W;W--)if(0<R[W]){O=W;break}O<R.length-1&&O++;for(var Z=0;Z<R.length;Z++)R[Z]>E&&(T=Z,E=R[Z]);var Q=!1;if(T-L<O-T){Q=!0;for(var J=0,$=R.length-1,ee;J<$;)ee=R[J],R[J]=R[$],R[$]=ee,J++,$--;L=R.length-1-O,T=R.length-1-T}if(L===T)return L;var te,ae,ie;te=R[T],ae=L-T,ie=_Mathsqrt(te*te+ae*ae),te/=ie,ae/=ie,ie=te*L+ae*R[L];for(var ne=L,oe=0,le=L+1,se;le<=T;le++)se=te*le+ae*R[le]-ie,se>oe&&(ne=le,oe=se);if(ne--,Q){for(var de=0,he=R.length-1,ue;de<he;)ue=R[de],R[de]=R[he],R[he]=ue,de++,he--;return R.length-1-ne}return ne}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L){for(var E=Array(R.length),T=0;T<R.length;T++)E[T]=R[T]/L;var O=Array(R.length);O[0]=E[0];for(var G=1;G<R.length;G++)O[G]=O[G-1]+E[G];var W=Array(R.length);W[0]=E[0]*E[0];for(var Z=1;Z<R.length;Z++)W[Z]=W[Z-1]+E[Z]*E[Z];var Q=Array(R.length);Q[R.length-1]=0;for(var J=R.length-2;0<=J;J--)Q[J]=Q[J+1]+E[J+1]*E[J+1];for(var $=-1,ee=_NumberMIN_VALUE,te=void 0,ae=0;ae<R.length;ae++)te=-1*(0<W[ae]*Q[ae]?_Mathlog(W[ae]*Q[ae]):0)+2*(0<O[ae]*(1-O[ae])?_Mathlog(O[ae]*(1-O[ae])):0),te>ee&&(ee=te,$=ae);return $}},function(_,P,I){'use strict';function S(Z){return Z&&Z.__esModule?Z:{default:Z}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(Z={}){var Q=Z.size,J=void 0===Q?0:Q,$=Z.algorithm,ee=void 0===$?'copy':$,te=Z.color;if(this.checkProcessable('pad',{bitDepth:[8,16]}),'set'===ee){if(te.length!==this.channels)throw new Error('pad: the color array must have the same length as the number of channels. Here: '+this.channels);for(var ae=0;ae<te.length;ae++)0===te[ae]&&(te[ae]=1e-3)}else te=(0,O.default)(this.channels,null);Array.isArray(J)||(J=[J,J]);var ie=this.width+2*J[0],ne=this.height+2*J[1],oe=this.channels,le=E.default.createFrom(this,{width:ie,height:ne});(0,W.default)(this,le,J[0],J[1]);for(var se=J[0];se<ie-J[0];se++)for(var de=0,he;de<oe;de++){he=te[de]||le.data[(J[1]*ie+se)*oe+de];for(var ue=0;ue<J[1];ue++)le.data[(ue*ie+se)*oe+de]=he;he=te[de]||le.data[((ne-J[1]-1)*ie+se)*oe+de];for(var ce=ne-J[1];ce<ne;ce++)le.data[(ce*ie+se)*oe+de]=he}for(var pe=0;pe<ne;pe++)for(var ge=0,fe;ge<oe;ge++){fe=te[ge]||le.data[(pe*ie+J[0])*oe+ge];for(var _e=0;_e<J[0];_e++)le.data[(pe*ie+_e)*oe+ge]=fe;fe=te[ge]||le.data[(pe*ie+ie-J[0]-1)*oe+ge];for(var be=ie-J[0];be<ie;be++)le.data[(pe*ie+be)*oe+ge]=fe}return le};var L=I(0),E=S(L),T=I(4),O=S(T),G=I(140),W=S(G)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){return new E.default(this.width,this.height,this.getRGBAData(),{kind:'RGBA',parent:this})};var L=I(0),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';function S(Q){return Q&&Q.__esModule?Q:{default:Q}}function L(){for(var Q=G.default.createFrom(this,{width:this.height,height:this.width}),J=Q.height-1,$=0;$<this.height;$++)for(var ee=0;ee<this.width;ee++)for(var te=0;te<this.channels;te++)Q.setValueXY($,J-ee,te,this.getValueXY(ee,$,te));return Q}function E(){for(var Q=G.default.createFrom(this,{width:this.height,height:this.width}),J=Q.width-1,$=0;$<this.height;$++)for(var ee=0;ee<this.width;ee++)for(var te=0;te<this.channels;te++)Q.setValueXY(J-$,ee,te,this.getValueXY(ee,$,te));return Q}function T(){for(var Q=G.default.createFrom(this),J=Q.width-1,$=Q.height-1,ee=0;ee<this.height;ee++)for(var te=0;te<this.width;te++)for(var ae=0;ae<this.channels;ae++)Q.setValueXY(J-te,$-ee,ae,this.getValueXY(te,ee,ae));return Q}Object.defineProperty(P,'__esModule',{value:!0}),P.rotate=function(Q,J){if('number'!=typeof Q)throw new TypeError('angle must be a number');switch(0>Q&&(Q=360*_Mathceil(-Q/360)+Q),Q%360){case 0:return this.clone();case 90:return E.call(this);case 180:return T.call(this);case 270:return L.call(this);default:return Z.default.call(this,Q,J);}},P.rotateLeft=L,P.rotateRight=E;var O=I(0),G=S(O),W=I(136),Z=S(W)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T,O={}){var G=O.interpolation,W=G===void 0?'none':G,Z=O.width,Q=Z===void 0?this.width:Z,J=O.height,$=J===void 0?this.height:J,ee=T*_MathPI/180,te=_Mathfloor(_Mathabs(Q*_Mathcos(ee))+_Mathabs($*_Mathsin(ee))),ae=_Mathfloor(_Mathabs($*_Mathcos(ee))+_Mathabs(Q*_Mathsin(ee))),ie=E.default.createFrom(this,{width:te,height:ae}),ne=_Mathcos(-ee),oe=_Mathsin(-ee),le=te/2,se=ae/2;0==te%2?(le-=0.5,0==ae%2?se-=0.5:se=_Mathfloor(se)):(le=_Mathfloor(le),0==ae%2?se-=0.5:se=_Mathfloor(se));var de=_Mathfloor(Q/2-le),he=_Mathfloor($/2-se);if('bilinear'===W){for(var ue=this.width*this.channels,ce=0;ce<te;ce+=1)for(var pe=0;pe<ae;pe+=1)for(var ge=(ce-le)*ne-(pe-se)*oe+le+de,fe=(pe-se)*ne+(ce-le)*oe+se+he,_e=0|ge,be=0|fe,xe=ge-_e,ye=fe-be,we=0;we<this.channels;we++)if(0>ge||ge>=Q||0>fe||fe>=$)this.alpha?ie.setValueXY(ce,pe,we,this.alpha):ie.setValueXY(ce,pe,we,this.maxValue);else{var ke=(be*this.width+_e)*this.channels+we,ve=this.data[ke],Me=this.data[ke+this.channels],Pe=this.data[ke+ue],De=this.data[ke+ue+this.channels];ie.setValueXY(ce,pe,we,0|ve+xe*(Me-ve)+ye*(Pe-ve)+xe*ye*(ve-Me-Pe+De))}}else for(var Ie=0;Ie<te;Ie+=1)for(var Se=0;Se<ae;Se+=1)for(var Ce=0;Ce<this.channels;Ce++){var Re=_Mathround((Ie-le)*ne-(Se-se)*oe+le)+de,Ae=_Mathround((Se-se)*ne+(Ie-le)*oe+se)+he;0>Re||Re>=Q||0>Ae||Ae>=$?this.alpha?ie.setValueXY(Ie,Se,Ce,this.alpha):ie.setValueXY(Ie,Se,Ce,this.maxValue):ie.setValueXY(Ie,Se,Ce,this.getValueXY(Re,Ae,Ce))}return ie};var L=I(0),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L,E){var T=this.width/L,O=this.height/E;if(1<this.bitDepth)for(var G=0,W;G<L;G++){W=_Mathfloor((G+0.5)*T);for(var Z=0,Q;Z<E;Z++){Q=_Mathfloor((Z+0.5)*O);for(var J=0;J<this.channels;J++)R.setValueXY(G,Z,J,this.getValueXY(W,Q,J))}}else for(var $=0,ee;$<L;$++){ee=_Mathfloor(($+0.5)*T);for(var te=0,ae;te<E;te++)ae=_Mathfloor((te+0.5)*O),this.getBitXY(ee,ae)&&R.setBitXY($,te)}}},function(_,P,I){'use strict';function S(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(W={}){var Z=W.factor,Q=void 0===Z?1:Z,J=W.algorithm,$=void 0===J?'nearestNeighbor':J,ee=W.preserveAspectRatio,te=void 0===ee||ee,ae=W.width,ie=W.height;ae||(ie&&te?ae=_Mathround(ie*(this.width/this.height)):ae=this.width),ie||(te?ie=_Mathround(ae*(this.height/this.width)):ie=this.height);var ne=(0,G.factorDimensions)(Q,ae,ie);if(ae=ne.width,ie=ne.height,ae===this.width&&ie===this.height){var oe=this.clone();return oe.position=[0,0],oe}var le=_Mathround((this.width-ae)/2),se=_Mathround((this.height-ie)/2),de=E.default.createFrom(this,{width:ae,height:ie,position:[le,se]});switch($.toLowerCase()){case'nearestneighbor':case'nearestneighbour':O.default.call(this,de,ae,ie);break;default:throw new Error('Unsupported scale algorithm: '+$);}return de};var L=I(0),E=S(L),T=I(137),O=S(T),G=I(34)},function(_,P,I){'use strict';function L(O){return(O[0]+O[1]+O[2])/3}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O=L,G={}){var W=G.mergeAlpha,Z=W!==void 0&&W,Q=G.keepAlpha,J=Q!==void 0&&Q;Z&=this.alpha,J&=this.alpha,this.checkProcessable('combineChannels',{bitDepth:[8,16]});for(var $=T.default.createFrom(this,{components:1,alpha:J,colorModel:null}),ee=0,te=0,ae;te<this.size;te++)ae=O(this.getPixel(te)),Z?$.data[ee++]=ae*this.data[te*this.channels+this.components]/this.maxValue:($.data[ee++]=ae,J&&($.data[ee++]=this.data[te*this.channels+this.components]));return $};var E=I(0),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L,E,T){for(var O=R.width,G=R.height,W=L.width,Z=R.channels,Q=0;Q<O;Q++)for(var J=0;J<G;J++)for(var $=0;$<Z;$++){var ee=(J*O+Q)*Z+$,te=((T+J)*W+E+Q)*Z+$;L.data[te]=R.data[ee]}}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T,O={}){var G=O.border;if(this.checkProcessable('getChannel',{bitDepth:[8,16]}),this.bitDepth!==T.bitDepth)throw new Error('Both images must have the same bitDepth');if(this.channels!==T.channels)throw new Error('Both images must have the same number of channels');if(this.colorModel!==T.colorModel)throw new Error('Both images must have the same colorModel');for(var W=new E.default(T.width,T.height,-Infinity),Z=_Mathfloor(T.width/2),Q=_Mathfloor(T.height/2),J=Z,$=Q,ee=!1,te;!ee;){te=W.localSearch(Z,Q,-Infinity);for(var ae=0;ae<te.length;ae++){var ie=te[ae],ne=this.getSimilarity(T,{border:G,shift:[J-ie[0],$-ie[1]]});W[ie[0]][ie[1]]=ne}var oe=W.localMax(Z,Q);oe.position[0]!==Z||oe.position[1]!==Q?(Z=oe.position[0],Q=oe.position[1]):ee=!0}return[Z-J,Q-$]};var L=I(167),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O,G={}){var W=G.keepAlpha,Z=W!==void 0&&W,Q=G.mergeAlpha,J=Q!==void 0&&Q;Z&=this.alpha,J&=this.alpha,this.checkProcessable('getChannel',{bitDepth:[8,16]}),O=(0,T.validateChannel)(this,O);for(var $=E.default.createFrom(this,{components:1,alpha:Z,colorModel:null}),ee=0,te=0;te<this.data.length;te+=this.channels)J?$.data[ee++]=this.data[te+O]*this.data[te+this.components]/this.maxValue:($.data[ee++]=this.data[te+O],Z&&($.data[ee++]=this.data[te+this.components]));return $};var L=I(0),E=function(O){return O&&O.__esModule?O:{default:O}}(L),T=I(1)},function(_,P){'use strict';function R(E){for(var T=0,O=E;null!=O.parent;)O=O.parent,T++;return T}function L(E,T){for(var O=E;0<T;)O=O.parent,--T;return O}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E){var T=R(this),O=R(E),G;if(G=T>=O?L(this,T):L(E,O),0===T||0===O)return G;for(var W=this,Z=E;T!==O;)if(T>O){if(W=W.parent,void 0===W)return G;--T}else{if(Z=Z.parent,void 0===Z)return G;--O}for(;W!==Z&&void 0!==typeof W&&void 0!==typeof Z;)if(W=W.parent,Z=Z.parent,void 0===W||void 0===Z)return G;return W===Z?W:G}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L=0){this.checkProcessable('getColumn',{bitDepth:[8,16]}),this.checkColumn(R),this.checkChannel(L);for(var E=Array(this.height),T=0,O=this.width*this.channels,G=L+R*this.channels;G<this.data.length;G+=O)E[T++]=this.data[G];return E}},function(_,P){'use strict';function R(E,T){for(var O=[],G=0;G<E.height;G++)for(var W=0,Z;W<E.width;W++)Z=[G,W],O.push([Z[0]+T[0],Z[1]+T[1]]);return O}function L(E,T){for(var O=0,G=0,W=[];O<E.length&&G<T.length;)E[O][0]===T[G][0]&&E[O][1]===T[G][1]?(W.push(E[O]),O++,G++):E[O][0]<T[G][0]||E[O][0]===T[G][0]&&E[O][1]<T[G][1]?O++:G++;return W}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(E){for(var T=this,O=T.getClosestCommonParent(E),G=T.getRelativePosition(O,{defaultFurther:!0}),W=R(T,G),Z=E.getRelativePosition(O,{defaultFurther:!0}),Q=R(E,Z),J=L(W,Q),$={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]},ee=0;ee<J.length;ee++){var te=J[ee],ae=[te[0]-G[0],te[1]-G[1]],ie=[te[0]-Z[0],te[1]-Z[1]],ne=T.getBitXY(ae[0],ae[1]),oe=E.getBitXY(ie[0],ie[1]);1===ne&&1===oe&&$.commonWhitePixels.push(te)}for(var le=0;le<W.length;le++){var se=void 0,de=void 0;0!==le&&(se=_Mathfloor(le/(T.width-1)),de=le%(T.width-1)),1===T.getBitXY(se,de)&&$.whitePixelsMask1.push(W[le])}for(var he=0;he<Q.length;he++){var ue=0,ce=0;0!==he&&(ue=_Mathfloor(he/(E.width-1)),ce=he%(E.width-1)),1===E.getBitXY(ue,ce)&&$.whitePixelsMask2.push(Q[he])}return $}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T={}){var O=T.channel;if(this.checkProcessable('getMatrix',{bitDepth:[8,16]}),void 0===O){if(1<this.components)throw new RangeError('You need to define the channel for an image that contains more than one channel');O=0}for(var G=new E.default(this.height,this.width),W=0;W<this.height;W++)for(var Z=0;Z<this.width;Z++)G.set(W,Z,this.getValueXY(Z,W,O));return G};var L=I(7),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('getPixelsArray',{bitDepth:[8,16,32]});for(var R=Array(this.size),L=0,E=0,T;E<this.data.length;E+=this.channels){T=Array(this.components);for(var O=0;O<this.components;O++)T[O]=this.data[E+O];R[L++]=T}return R}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R={}){var L=R.sampling,E=void 0===L?[10,10]:L,T=R.painted,G=R.mask;this.checkProcessable('getPixelsGrid',{bitDepth:[8,16],channels:1}),Array.isArray(E)||(E=[E,E]);for(var W=E[0],Z=E[1],Q=W*Z,J=Array(Q),$=Array(Q),ee=this.width/W,te=this.height/Z,ae=_Mathfloor(ee/2),ie=0,ne=0,oe;ne<W;ne++){oe=_Mathfloor(te/2);for(var le=0;le<Z;le++){var se=_Mathround(ae),de=_Mathround(oe);(!G||G.getBitXY(se,de))&&(J[ie]=[se,de],$[ie]=this.getPixelXY(se,de),ie++),oe+=te}ae+=ee}J.length=ie,$.length=ie;var he={xyS:J,zS:$};return void 0!==T&&T&&(he.painted=this.rgba8().paintPoints(J)),he}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L=0){this.checkProcessable('getRow',{bitDepth:[8,16]}),this.checkRow(R),this.checkChannel(L);for(var E=Array(this.width),T=0,O=R*this.width*this.channels+L,G=O+this.width*this.channels,W=O;W<G;W+=this.channels)E[T++]=this.data[W];return E}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(O,G={}){var W=G.shift,Z=void 0===W?[0,0]:W,Q=G.average,J=G.channels,$=G.defaultAlpha,ee=G.normalize,te=G.border,ae=void 0===te?[0,0]:te;if(this.checkProcessable('getSimilarity',{bitDepth:[8,16]}),Array.isArray(ae)||(ae=[ae,ae]),J=(0,L.validateArrayOfChannels)(this,{channels:J,defaultAlpha:$}),this.bitDepth!==O.bitDepth)throw new Error('Both images must have the same bitDepth');if(this.channels!==O.channels)throw new Error('Both images must have the same number of channels');if(this.colorModel!==O.colorModel)throw new Error('Both images must have the same colorModel');'undefined'==typeof Q&&(Q=!0);for(var ie=_Mathmax(ae[0],-Z[0]),ne=_Mathmin(this.width-ae[0],this.width-Z[0]),oe=_Mathmax(ae[1],-Z[1]),le=_Mathmin(this.height-ae[1],this.height-Z[1]),se=(0,T.default)(J.length,0),de=0;de<J.length;de++){var he=J[de],ue=ee?this.sum[he]:_Mathmax(this.sum[he],O.sum[he]),ce=ee?O.sum[he]:_Mathmax(this.sum[he],O.sum[he]);if(0!==ue&&0!==ce)for(var pe=ie;pe<ne;pe++)for(var ge=oe;ge<le;ge++){var fe=pe*this.multiplierX+ge*this.multiplierY+he,_e=fe+Z[0]*this.multiplierX+Z[1]*this.multiplierY;se[de]+=_Mathmin(this.data[fe]/ue,O.data[_e]/ce)}}return Q?se.reduce((be,xe)=>be+xe)/se.length:se};var L=I(1),E=I(4),T=function(O){return O&&O.__esModule?O:{default:O}}(E)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T={}){var O=T.size,G=void 0===O?0:O,W=T.algorithm,Z=void 0===W?'copy':W,Q=T.color;if(this.checkProcessable('setBorder',{bitDepth:[8,16,32,64]}),'set'===Z){if(Q.length!==this.channels)throw new Error('setBorder: the color array must have the same length as the number of channels. Here: '+this.channels);for(var J=0;J<Q.length;J++)0===Q[J]&&(Q[J]=1e-3)}else Q=(0,E.default)(this.channels,null);Array.isArray(G)||(G=[G,G]);for(var $=G[0],ee=G[1],te=this.channels,ae=$;ae<this.width-$;ae++)for(var ie=0,ne;ie<te;ie++){ne=Q[ie]||this.data[(ae+this.width*ee)*te+ie];for(var oe=0;oe<ee;oe++)this.data[(oe*this.width+ae)*te+ie]=ne;ne=Q[ie]||this.data[(ae+this.width*(this.height-ee-1))*te+ie];for(var le=this.height-ee;le<this.height;le++)this.data[(le*this.width+ae)*te+ie]=ne}for(var se=0;se<this.height;se++)for(var de=0,he;de<te;de++){he=Q[de]||this.data[(se*this.width+$)*te+de];for(var ue=0;ue<$;ue++)this.data[(se*this.width+ue)*te+de]=he;he=Q[de]||this.data[(se*this.width+this.width-$-1)*te+de];for(var ce=this.width-$;ce<this.width;ce++)this.data[(se*this.width+ce)*te+de]=he}return this};var L=I(4),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(L,E){if(this.checkProcessable('setChannel',{bitDepth:[8,16]}),E.checkProcessable('setChannel (image parameter check)',{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),E.width!==this.width||E.height!==this.height)throw new Error('Images must have exactly the same width and height');L=(0,R.validateChannel)(this,L);for(var T=L,O=0;O<E.data.length;O++)this.data[T]=E.data[O],T+=this.channels;return this};var R=I(1)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R,L={}){var E=L.channel;if(this.checkProcessable('getMatrix',{bitDepth:[8,16]}),void 0===E){if(1<this.components)throw new RangeError('You need to define the channel for an image that contains more than one channel');E=0}if(!R.length||!R[0].length||this.width!==R.columns||this.height!==R.rows)throw new RangeError('The size of the matrix must be equal to the size of the image');for(var T=0;T<this.height;T++)for(var O=0;O<this.width;O++)this.setValueXY(O,T,E,R.get(T,O))}},function(_,P,I){'use strict';function S(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(G={}){var W=G.preserveAlpha;if(this.checkProcessable('split',{bitDepth:[8,16]}),1===this.components)return new O.default([this.clone()]);var Q=new O.default,J=this.data;if(this.alpha&&(void 0===W||W))for(var $=0;$<this.components;$++){for(var ee=E.default.createFrom(this,{components:1,alpha:!0,colorModel:null}),te=0,ae=0;ae<J.length;ae+=this.channels)ee.data[te++]=J[ae+$],ee.data[te++]=J[ae+this.components];Q.push(ee)}else for(var ie=0;ie<this.channels;ie++){for(var ne=E.default.createFrom(this,{components:1,alpha:!1,colorModel:null}),oe=0,le=0;le<J.length;le+=this.channels)ne.data[oe++]=J[le+ie];Q.push(ne)}return Q};var L=I(0),E=S(L),T=I(12),O=S(T)},function(_,P,I){'use strict';_.exports=P=I(0).default,P.Stack=I(12).default,P.Shape=I(13).default,P.Kernel=I(57),P.Static={grey:I(29).names,mask:I(30).names},P.Worker=I(56).default},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.laplacianOfGaussian=function(R,L,E){var T=Array(L),O=void 0,G=void 0,W,Z;E||(E=100),E*=-1;var Q=(L-1)/2,J=2*R*R;for(O=0;O<L;O++)for(T[O]=Array(L),Z=(O-Q)*(O-Q),G=0;G<L;G++)W=(G-Q)*(G-Q),T[O][G]=_Mathround(E*(1-(W+Z)/J)*_Mathexp(-(W+Z)/J));return T}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R){this.checkProcessable('min',{bitDepth:[8,16]});for(var L=this[0].getHistogram(R),E=1,T;E<this.length;E++){T=this[E].getHistogram(R);for(var O=0;O<L.length;O++)L[O]+=T[O]}return L}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(R){this.checkProcessable('min',{bitDepth:[8,16]});for(var L=this[0].getHistograms(R),E=L[0].length,T=1,O;T<this.length;T++){O=this[T].getHistograms(R);for(var G=0;G<L.length;G++)for(var W=0;W<E;W++)L[G][W]+=O[G][W]}return L}},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('min',{bitDepth:[8,16]});for(var R=this[0].max,L=1;L<this.length;L++)for(var E=0;E<R.length;E++)R[E]=_Mathmax(R[E],this[L].max[E]);return R}},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('median',{bitDepth:[8,16]});for(var L=this.getHistograms({maxSlots:this[0].maxValue+1}),E=Array(L.length),T=0,O;T<L.length;T++)O=L[T],E[T]=(0,R.median)(O);return E};var R=I(19)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('min',{bitDepth:[8,16]});for(var R=this[0].min,L=1;L<this.length;L++)for(var E=0;E<R.length;E++)R[E]=_Mathmin(R[E],this[L].min[E]);return R}},function(_,P,I){'use strict';function S(ne){return ne&&ne.__esModule?ne:{default:ne}}Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(ne){ne.extendMethod('matchAndCrop',E.default),ne.extendMethod('getMin',O.default),ne.extendMethod('getMax',W.default),ne.extendMethod('getMedian',Q.default),ne.extendMethod('getHistogram',$.default),ne.extendMethod('getHistograms',te.default),ne.extendMethod('getAverage',ie.default)};var L=I(163),E=S(L),T=I(161),O=S(T),G=I(159),W=S(G),Z=I(160),Q=S(Z),J=I(157),$=S(J),ee=I(158),te=S(ee),ae=I(164),ie=S(ae)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(T={}){var O=T.algorithm,G=O===void 0?'matchToPrevious':O,W=T.ignoreBorder,Z=W===void 0?[0,0]:W;this.checkProcessable('matchAndCrop',{bitDepth:[8,16]});var J=this[0],$=[];$[0]={position:[0,0],image:this[0]};for(var ee=[0,0],te=1,ae;te<this.length;te++)ae=J.getBestMatch(this[te],{border:Z}),$[te]={position:[ae[0]+ee[0],ae[1]+ee[1]],image:this[te]},'matchToPrevious'===G&&(ee[0]+=ae[0],ee[1]+=ae[1],J=this[te]);for(var ie=0,ne=0,oe=0,le=0,se=0,de;se<$.length;se++)de=$[se],de.position[0]>ie&&(ie=de.position[0]),de.position[0]<ne&&(ne=de.position[0]),de.position[1]>oe&&(oe=de.position[1]),de.position[1]<le&&(le=de.position[1]);ne=0-ne,le=0-le;for(var he=0,ue;he<$.length;he++)ue=$[he],ue.crop=ue.image.crop({x:ie-ue.position[0],y:oe-ue.position[1],width:J.width-ne-ie,height:J.height-le-oe});for(var ce=[],pe=0;pe<$.length;pe++)ce[pe]=$[pe].crop;return new E.default(ce)};var L=I(12),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.default=function(){this.checkProcessable('average',{bitDepth:[8,16]});for(var T=new Uint32Array(this[0].data.length),O=0,G;O<this.length;O++){G=this[O];for(var W=0;W<this[0].data.length;W++)T[W]+=G.data[W]}for(var Z=E.default.createFrom(this[0]),Q=Z.data,J=0;J<this[0].data.length;J++)Q[J]=T[J]/this.length;return Z};var L=I(0),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P){'use strict';Object.defineProperty(P,'__esModule',{value:!0});var S=P.dxs=[1,0,-1,0,1,1,-1,-1],R=P.dys=[0,1,0,-1,1,-1,1,-1]},function(_,P,I){'use strict';Object.defineProperty(P,'__esModule',{value:!0}),P.validateKernel=function(T){var O,G;if(!Array.isArray(T))throw new Error('validateKernel: Invalid Kernel: '+T);else if(!Array.isArray(T[0])){var W=_Mathsqrt(T.length);if((0,E.default)(W))G=O=_Mathfloor(_Mathsqrt(T.length)/2);else throw new RangeError('validateKernel: Kernel array should be a square');for(var Z=Array(W),Q=0;Q<W;Q++){Z[Q]=Array(W);for(var J=0;J<W;J++)Z[Q][J]=T[Q*W+J]}T=Z}else if(0==(1&T.length)||0==(1&T[0].length))throw new RangeError('validateKernel: Kernel rows and columns should be odd numbers');else O=_Mathfloor(T.length/2),G=_Mathfloor(T[0].length/2);return{kernel:T,kWidth:G,kHeight:O}};var L=I(40),E=function(T){return T&&T.__esModule?T:{default:T}}(L)},function(_,P){'use strict';function S(R,L,E){for(var T=Array(R),O=0;O<R;O++)T[O]=Array(L);if(E)for(var G=0;G<R;G++)for(var W=0;W<L;W++)T[G][W]=E;return T.width=R,T.height=L,T.__proto__=S.prototype,T}Object.defineProperty(P,'__esModule',{value:!0}),P.default=S,S.prototype.localMin=function(R,L){for(var E=this[R][L],T=[R,L],O=_Mathmax(0,R-1);O<_Mathmin(this.length,R+2);O++)for(var G=_Mathmax(0,L-1);G<_Mathmin(this[0].length,L+2);G++)this[O][G]<E&&(E=this[O][G],T=[O,G]);return{position:T,value:E}},S.prototype.localMax=function(R,L){for(var E=this[R][L],T=[R,L],O=_Mathmax(0,R-1);O<_Mathmin(this.length,R+2);O++)for(var G=_Mathmax(0,L-1);G<_Mathmin(this[0].length,L+2);G++)this[O][G]>E&&(E=this[O][G],T=[O,G]);return{position:T,value:E}},S.prototype.localSearch=function(R,L,E){for(var T=[],O=_Mathmax(0,R-1);O<_Mathmin(this.length,R+2);O++)for(var G=_Mathmax(0,L-1);G<_Mathmin(this[0].length,L+2);G++)this[O][G]===E&&T.push([O,G]);return T}},function(_,P,I){'use strict';function S(se){for(var de=se.length,he=new ArrayBuffer(de),ue=new Uint8Array(he),ce=-1;++ce<de;)ue[ce]=se.charCodeAt(ce);return he}function R(se){for(var de='',he=new Uint8Array(se),ue=he.byteLength,ce=-1;++ce<ue;)de+=_StringfromCharCode(he[ce]);return de}function L(se,de){return new le(function(he,ue){var ce=new Image;de&&(ce.crossOrigin=de),ce.onload=function(){he(ce)},ce.onerror=ue,ce.src=se})}function E(se){var de=document.createElement('canvas');de.width=se.width,de.height=se.height;var he=de.getContext('2d');return he.drawImage(se,0,0,se.width,se.height,0,0,se.width,se.height),de}function T(se,de){return de=de||{},'string'==typeof de&&(de={type:de}),new oe(se,de)}function W(se){return new le(function(de,he){var ue=new FileReader,ce='function'==typeof ue.readAsBinaryString;ue.onloadend=function(pe){var ge=pe.target.result||'';return ce?de(ge):void de(R(ge))},ue.onerror=he,ce?ue.readAsBinaryString(se):ue.readAsArrayBuffer(se)})}function Z(se,de){return le.resolve().then(function(){var he=[S(atob(se))];return de?T(he,{type:de}):T(he)})}function $(se){return le.resolve().then(function(){var de=se.match(/data:([^;]+)/)[1],he=se.replace(/^[^,]+,/,''),ue=S(atob(he));return T([ue],{type:de})})}function te(se,de,he){return le.resolve().then(function(){return'function'==typeof se.toBlob?new le(function(ue){se.toBlob(ue,de,he)}):$(se.toDataURL(de,he))})}var oe=I(169),le=I(235);_.exports={createBlob:T,createObjectURL:function(se){return(window.URL||window.webkitURL).createObjectURL(se)},revokeObjectURL:function(se){return(window.URL||window.webkitURL).revokeObjectURL(se)},imgSrcToBlob:function(se,de,he,ue){return de=de||'image/png',L(se,he).then(function(ce){return E(ce)}).then(function(ce){return te(ce,de,ue)})},imgSrcToDataURL:function(se,de,he,ue){return de=de||'image/png',L(se,he).then(function(ce){return E(ce)}).then(function(ce){return ce.toDataURL(de,ue)})},canvasToBlob:te,dataURLToBlob:$,blobToBase64String:function(se){return W(se).then(function(de){return btoa(de)})},base64StringToBlob:Z,binaryStringToBlob:function(se,de){return le.resolve().then(function(){return Z(btoa(se),de)})},blobToBinaryString:W,arrayBufferToBlob:function(se,de){return le.resolve().then(function(){return T([se],de)})},blobToArrayBuffer:function(se){return new le(function(de,he){var ue=new FileReader;ue.onloadend=function(ce){var pe=ce.target.result||new ArrayBuffer(0);de(pe)},ue.onerror=he,ue.readAsArrayBuffer(se)})}}},function(_,P,I){(function(S){function R(Z){for(var Q=0,J;Q<Z.length;Q++)if(J=Z[Q],J.buffer instanceof ArrayBuffer){var $=J.buffer;if(J.byteLength!==$.byteLength){var ee=new Uint8Array(J.byteLength);ee.set(new Uint8Array($,J.byteOffset,J.byteLength)),$=ee.buffer}Z[Q]=$}}function L(Z,Q){Q=Q||{};var J=new T;R(Z);for(var $=0;$<Z.length;$++)J.append(Z[$]);return Q.type?J.getBlob(Q.type):J.getBlob()}function E(Z,Q){return R(Z),new Blob(Z,Q||{})}var T=S.BlobBuilder||S.WebKitBlobBuilder||S.MSBlobBuilder||S.MozBlobBuilder,O=function(){try{var Z=new Blob(['hi']);return 2===Z.size}catch(Q){return!1}}(),G=O&&function(){try{var Z=new Blob([new Uint8Array([1,2])]);return 2===Z.size}catch(Q){return!1}}(),W=T&&T.prototype.append&&T.prototype.getBlob;_.exports=function(){return O?G?S.Blob:E:W?L:void 0}()}).call(P,I(28))},function(_,P,I){_.exports={hex2rgb:I(173),hsv2hex:I(174),hsv2rgb:I(20),rgb2hex:I(21),rgb2hsv:I(176),rgba:I(177),rgba2rgb:I(38),rgba2hex:I(178),hsl2hsv:I(36),hsv2hsl:I(175),hsl2rgb:I(37),cssColor:I(172)}},function(_){_.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},function(_,P,I){function R(J){var $=Q[J.toLowerCase()];return $?{r:$[0],g:$[1],b:$[2],a:100}:void 0}function L(J){if(0==J.indexOf('rgb(')){J=J.match(/rgb\(([^)]+)\)/)[1];var $=J.split(/ *, */).map(Number);return{r:$[0],g:$[1],b:$[2],a:100}}}function E(J){if(0===J.indexOf('rgba(')){J=J.match(/rgba\(([^)]+)\)/)[1];var $=J.split(/ *, */).map(Number);return{r:$[0],g:$[1],b:$[2],a:100*$[3]}}}function T(J){if('#'===J[0]&&7===J.length)return{r:parseInt(J.slice(1,3),16),g:parseInt(J.slice(3,5),16),b:parseInt(J.slice(5,7),16),a:100}}function O(J){if('#'===J[0]&&4===J.length)return{r:parseInt(J[1]+J[1],16),g:parseInt(J[2]+J[2],16),b:parseInt(J[3]+J[3],16),a:100}}function G(J){if(0===J.indexOf('hsl(')){J=J.match(/hsl\(([^)]+)\)/)[1];var $=J.split(/ *, */),ee=parseInt($[0],10),te=parseInt($[1],10),ae=parseInt($[2],10),ie=Z(ee,te,ae);return ie.a=100,ie}}function W(J){if(0===J.indexOf('hsla(')){J=J.match(/hsla\(([^)]+)\)/)[1];var $=J.split(/ *, */),ee=parseInt($[0],10),te=parseInt($[1],10),ae=parseInt($[2],10),ie=parseInt(100*$[3],10),ne=Z(ee,te,ae);return ne.a=ie,ne}}var Z=I(37),Q=I(171);_.exports=function(J){return R(J)||O(J)||T(J)||L(J)||E(J)||G(J)||W(J)}},function(_){_.exports=function(I){return('#'===I[0]&&(I=I.substr(1)),6===I.length)?{r:parseInt(I.substr(0,2),16),g:parseInt(I.substr(2,2),16),b:parseInt(I.substr(4,2),16)}:3===I.length?{r:parseInt(I[0]+I[0],16),g:parseInt(I[1]+I[1],16),b:parseInt(I[2]+I[2],16)}:void 0}},function(_,P,I){var S=I(20),R=I(21);_.exports=function(L,E,T){var O=S(L,E,T);return R(O.r,O.g,O.b)}},function(_){_.exports=function(I,S,R){var L=(200-S)*R/100;return{h:I,s:S*R/(100>L?L:200-L),l:L/2}}},function(_){_.exports=function(I,S,R){var O=_Mathmax(I,S,R),G=_Mathmin(I,S,R),W=O-G,L,E,T;return 0==W?L=0:I===O?L=(S-R)/W%6:S===O?L=(R-I)/W+2:R===O&&(L=(I-S)/W+4),L=_Mathround(60*L),0>L&&(L+=360),E=_Mathround(100*(0===O?0:W/O)),T=_Mathround(100*(O/255)),{h:L,s:E,v:T}}},function(_){_.exports=function(I,S,R,L){return'rgba('+[I,S,R,L/100].join(',')+')'}},function(_,P,I){var S=I(38),R=I(21);_.exports=function(L,E,T,O){var G=S(L,E,T,O);return R(G.r,G.g,G.b)}},function(_,P,I){'use strict';const S=I(252),L=[];_.exports=class{constructor(T,O){O=O||{};var G=!1;T===void 0&&(T=8192),'number'==typeof T?T=new ArrayBuffer(T):(G=!0,this._lastWrittenByte=T.byteLength);const W=O.offset?O.offset>>>0:0;let Z=T.byteLength-W,Q=W;T.buffer&&(T.byteLength!==T.buffer.byteLength&&(Q=T.byteOffset+W),T=T.buffer),this._lastWrittenByte=G?Z:0,this.buffer=T,this.length=Z,this.byteLength=Z,this.byteOffset=Q,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Q,Z),this._mark=0,this._marks=[]}available(T){return void 0===T&&(T=1),this.offset+T<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(T){return void 0===T&&(T=1),this.offset+=T,this}seek(T){return this.offset=T,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const T=this._marks.pop();if(void 0===T)throw new Error('Mark stack empty');return this.seek(T),this}rewind(){return this.offset=0,this}ensureAvailable(T){if(void 0===T&&(T=1),!this.available(T)){const O=this.offset+T,G=2*O,W=new Uint8Array(G);W.set(new Uint8Array(this.buffer)),this.buffer=W.buffer,this.length=this.byteLength=G,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(T){T===void 0&&(T=1);for(var O=new Uint8Array(T),G=0;G<T;G++)O[G]=this.readByte();return O}readInt16(){var T=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,T}readUint16(){var T=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,T}readInt32(){var T=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,T}readUint32(){var T=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,T}readFloat32(){var T=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,T}readFloat64(){var T=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,T}readChar(){return _StringfromCharCode(this.readInt8())}readChars(T){T===void 0&&(T=1),L.length=T;for(var O=0;O<T;O++)L[O]=this.readChar();return L.join('')}readUtf8(T){T===void 0&&(T=1);const O=this.readChars(T);return S.decode(O)}writeBoolean(T){return this.writeUint8(T?255:0),this}writeInt8(T){return this.ensureAvailable(1),this._data.setInt8(this.offset++,T),this._updateLastWrittenByte(),this}writeUint8(T){return this.ensureAvailable(1),this._data.setUint8(this.offset++,T),this._updateLastWrittenByte(),this}writeByte(T){return this.writeUint8(T)}writeBytes(T){this.ensureAvailable(T.length);for(var O=0;O<T.length;O++)this._data.setUint8(this.offset++,T[O]);return this._updateLastWrittenByte(),this}writeInt16(T){return this.ensureAvailable(2),this._data.setInt16(this.offset,T,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(T){return this.ensureAvailable(2),this._data.setUint16(this.offset,T,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(T){return this.ensureAvailable(4),this._data.setInt32(this.offset,T,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(T){return this.ensureAvailable(4),this._data.setUint32(this.offset,T,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(T){return this.ensureAvailable(4),this._data.setFloat32(this.offset,T,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(T){return this.ensureAvailable(8),this._data.setFloat64(this.offset,T,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(T){return this.writeUint8(T.charCodeAt(0))}writeChars(T){for(var O=0;O<T.length;O++)this.writeUint8(T.charCodeAt(O));return this}writeUtf8(T){const O=S.encode(T);return this.writeChars(O)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return'undefined'==typeof Buffer?this.toArray():Buffer.from(this.toArray())}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}},function(_){'use strict';_.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},function(_,P,I){'use strict';function S(Z,Q){const J=4*_Mathfloor((Q.bitDepth*Q.width+31)/32),$=_Mathceil(Q.bitDepth*Q.width/8),te=Q.bitDepth*Q.width%8,ae=0==te?0:8-te,ie=J*Q.height;var ne,oe;const le=new T(Q.data);let se=0,de=0,he=8;Z.mark(),oe=le.readUint8();for(var ue=Q.height-1;0<=ue;ue--){const pe=0===ue;Z.reset(),Z.skip(ue*J);for(var ce=0;ce<$;ce++){const ge=ce===$-1;de<=ae&&ge?(Z.writeByte(oe<<de),(0==ae||ae==de)&&!pe&&(ne=oe,oe=le.readByte())):0==de?(ne=oe,oe=le.readUint8(),Z.writeByte(ne)):(ne=oe,oe=le.readUint8(),Z.writeByte(ne<<de&G[de]|oe>>he)),ge?(se+=te||8,Z.skip(J-$),de=se%8,he=8-de):se+=8}}J>$&&(Z.reset(),Z.skip(ie-1),Z.writeUint8(0))}function R(Z,Q){8<Q.bitDepth||Z.writeUint32(0).writeUint32(16777215)}function L(Z,Q){Z.writeChars('BM'),Z.writeInt32(Z._lastWrittenByte),Z.writeUint16(0),Z.writeUint16(0),Z.writeUint32(Q)}function E(Z,Q){Z.writeUint32(124).writeInt32(Q.width).writeInt32(Q.height).writeUint16(1).writeUint16(Q.bitDepth).writeUint32(O.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(Q.width*Q.height*Q.bitDepth).writeInt32(0).writeInt32(0).writeUint32(_Mathpow(2,Q.bitDepth)).writeUint32(_Mathpow(2,Q.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(O.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(O.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}const T=I(179),O=I(180),G=[];for(var W=0;8>=W;W++)G.push(255<<W);_.exports=function(Z){if(1!==Z.bitDepth)throw new Error('Only bitDepth of 1 is supported');if(!Z.height||!Z.width)throw new Error('ImageData width and height are required');if(1!==Z.components)throw new Error('Only 1 component is supported');if(1!==Z.channels)throw new Error('Only 1 channel is supported');var Q=new T;Q.skip(14),E(Q,Z),R(Q,Z);const J=Q.offset;return S(Q,Z),Q.rewind(),L(Q,J),Q.getBuffer()}},function(_,P,I){'use strict';P.encode=I(181)},function(_,P,I){'use strict';const R=I(23),L=I(55);_.exports=function(E){const T=new R(E),O={};T.setBigEndian();const G=T.readUint16();if(65496!==G)throw new Error('SOI marker not found. Not a valid JPEG file');const W=T.readUint16();if(65505===W){const Z=T.readUint16(),Q=T.readBytes(6);if(69===Q[0]&&120===Q[1]&&105===Q[2]&&102===Q[3]&&0===Q[4]&&0===Q[5]){const J=L.decode(T,{onlyFirst:!0,ignoreImageData:!0,offset:T.offset});O.exif=J}}return O}},function(_,P,I){'use strict';P.decode=I(183)},function(_){(function(){function S(L,E,T){this.next=T,T&&(T.prev=this),this.prev=E,E&&(E.next=this),this.data=L}function R(){return this instanceof R?void(this._head=null,this._tail=null,this.length=0):new R}R.prototype={push:function(L){this._tail=new S(L,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var L=this._tail;return this._tail=L.prev,L.prev&&(L.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),L.data}},unshift:function(L){this._head=new S(L,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var L=this._head;return this._head=L.next,L.next&&(L.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),L.data}},item:function(L){0>L&&(L=this.length+L);for(var E=this._head;0<L--&&E;)E=E.next;return E?E.data:void 0},slice:function(L,E){if(L||(L=0),E||(E=this.length),0>E&&(E=this.length+E),0>L&&(L=this.length+L),E===L)return[];if(E<L)throw new Error('invalid offset: '+L+','+E+' (length='+this.length+')');for(var T=E-L,O=Array(T),G=0,W=this._head;0<L--&&W;)W=W.next;for(;G<T&&W;)O[G++]=W.data,W=W.next;return O},drop:function(){R.call(this)},forEach:function(L,E){for(var T=this._head,O=0,G=this.length;O<G&&T;)L.call(E||this,T.data,O,this),T=T.next,O++},map:function(L,E){var T=new R;return this.forEach(function(O,G,W){T.push(L.call(E||W,O,G,W))}),T},filter:function(L,E){var T=new R;return this.forEach(function(O,G,W){L.call(E||W,O,G,W)&&T.push(O)}),T},reduce:function(L,E,T){var O=0,G=this._head,W=this.length;for(E||(O=1,E=G&&G.data,G=G&&G.next);O<W&&G;)E=L.call(T||this,E,G.data,this),O++,G=G.next;return E}},_.exports=R})()},function(_,P,I){'use strict';function S(ee,te,ae){for(var ie=0;ie<ae;ie++)te[ie]=ee[ie]}function R(ee,te,ae,ie){for(var ne=0;ne<ie;ne++)te[ne]=ee[ne];for(;ne<ae;ne++)te[ne]=255&ee[ne]+te[ne-ie]}function L(ee,te,ae,ie){var ne=0;if(0===ae.length)for(;ne<ie;ne++)te[ne]=ee[ne];else for(;ne<ie;ne++)te[ne]=255&ee[ne]+ae[ne]}function E(ee,te,ae,ie,ne){var oe=0;if(0===ae.length){for(;oe<ne;oe++)te[oe]=ee[oe];for(;oe<ie;oe++)te[oe]=255&ee[oe]+(te[oe-ne]>>1)}else{for(;oe<ne;oe++)te[oe]=255&ee[oe]+(ae[oe]>>1);for(;oe<ie;oe++)te[oe]=255&ee[oe]+(te[oe-ne]+ae[oe]>>1)}}function T(ee,te,ae,ie,ne){var oe=0;if(0===ae.length){for(;oe<ne;oe++)te[oe]=ee[oe];for(;oe<ie;oe++)te[oe]=255&ee[oe]+te[oe-ne]}else{for(;oe<ne;oe++)te[oe]=255&ee[oe]+ae[oe];for(;oe<ie;oe++)te[oe]=255&ee[oe]+O(te[oe-ne],ae[oe],ae[oe-ne])}}function O(ee,te,ae){var ie=ee+te-ae,ne=_Mathabs(ie-ee),oe=_Mathabs(ie-te),le=_Mathabs(ie-ae);return ne<=oe&&ne<=le?ee:oe<=le?te:ae}const G=I(23),W=I(236).Inflate,Z=new Uint8Array(0),J=[137,80,78,71,13,10,26,10];_.exports=class extends G{constructor(ee){super(ee),this._decoded=!1,this._inflator=new W,this._png=null,this._end=!1,this.setBigEndian()}decode(){if(this._decoded)return this._png;for(this._png={tEXt:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var ee=0;8>ee;ee++)if(this.readUint8()!==J[ee])throw new Error(`Wrong PNG signature. Byte at ${ee} should be ${J[ee]}.`)}decodeChunk(){var ee=this.readUint32(),te=this.readChars(4),ae=this.offset;switch(te){case'IHDR':this.decodeIHDR();break;case'PLTE':this.decodePLTE(ee);break;case'IDAT':this.decodeIDAT(ee);break;case'tEXt':this.decodetEXt(ee);break;case'IEND':this._end=!0;break;default:this.skip(ee);}if(this.offset-ae!==ee)throw new Error('Length mismatch while decoding chunk '+te);this.readUint32()}decodeIHDR(){var ee=this._png;if(ee.width=this.readUint32(),ee.height=this.readUint32(),ee.bitDepth=this.readUint8(),ee.colourType=this.readUint8(),ee.compressionMethod=this.readUint8(),ee.filterMethod=this.readUint8(),ee.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error('Unsupported compression method: '+ee.compressionMethod)}decodePLTE(ee){if(0!=ee%3)throw new RangeError('PLTE field length must be a multiple of 3. Got '+ee);var te=ee/3;this._hasPalette=!0;for(var ae=this._palette=Array(te),ie=0;ie<te;ie++)ae[ie]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(ee){this._inflator.push(new Uint8Array(this.buffer,this.offset,ee)),this.skip(ee)}decodetEXt(ee){for(var te='',ae;(ae=this.readChar())!=='\0';)te+=ae;this._png.tEXt[te]=this.readChars(ee-te.length-1)}decodeImage(){if(this._inflator.push(Z,!0),this._inflator.err)throw new Error('Error while decompressing the data');var ee=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error('Filter method '+this._png.filterMethod+' not supported');if(0===this._png.interlaceMethod)this.decodeInterlaceNull(ee);else throw new Error('Interlace method '+this._png.interlaceMethod+' not supported')}decodeInterlaceNull(ee){var te;switch(this._png.colourType){case 0:te=1;break;case 2:te=3;break;case 3:if(!this._hasPalette)throw new Error('Missing palette');te=1;break;case 4:te=2;break;case 6:te=4;break;default:throw new Error('Unknown colour type: '+this._png.colourType);}const ae=this._png.height,ie=te*this._png.bitDepth/8,ne=this._png.width*ie,oe=new Uint8Array(this._png.height*ne);for(var le=Z,se=0,ue=0,de,he;ue<ae;ue++){switch(de=ee.subarray(se+1,se+1+ne),he=oe.subarray(ue*ne,(ue+1)*ne),ee[se]){case 0:S(de,he,ne);break;case 1:R(de,he,ne,ie);break;case 2:L(de,he,le,ne);break;case 3:E(de,he,le,ne,ie);break;case 4:T(de,he,le,ne,ie);break;default:throw new Error('Unsupported filter: '+ee[se]);}le=he,se+=ne+1}this._hasPalette&&(this._png.palette=this._palette),this._png.data=oe}}},function(_,P,I){'use strict';P.PNGDecoder=I(186)},function(_){'use strict';_.exports=(S)=>{const R=new Uint8Array(S);if(!(R&&1<R.length))return null;if(255===R[0]&&216===R[1]&&255===R[2])return{ext:'jpg',mime:'image/jpeg'};if(137===R[0]&&80===R[1]&&78===R[2]&&71===R[3])return{ext:'png',mime:'image/png'};if(71===R[0]&&73===R[1]&&70===R[2])return{ext:'gif',mime:'image/gif'};if(87===R[8]&&69===R[9]&&66===R[10]&&80===R[11])return{ext:'webp',mime:'image/webp'};if(70===R[0]&&76===R[1]&&73===R[2]&&70===R[3])return{ext:'flif',mime:'image/flif'};if((73===R[0]&&73===R[1]&&42===R[2]&&0===R[3]||77===R[0]&&77===R[1]&&0===R[2]&&42===R[3])&&67===R[8]&&82===R[9])return{ext:'cr2',mime:'image/x-canon-cr2'};if(73===R[0]&&73===R[1]&&42===R[2]&&0===R[3]||77===R[0]&&77===R[1]&&0===R[2]&&42===R[3])return{ext:'tif',mime:'image/tiff'};if(66===R[0]&&77===R[1])return{ext:'bmp',mime:'image/bmp'};if(73===R[0]&&73===R[1]&&188===R[2])return{ext:'jxr',mime:'image/vnd.ms-photo'};if(56===R[0]&&66===R[1]&&80===R[2]&&83===R[3])return{ext:'psd',mime:'image/vnd.adobe.photoshop'};if(80===R[0]&&75===R[1]&&3===R[2]&&4===R[3]&&109===R[30]&&105===R[31]&&109===R[32]&&101===R[33]&&116===R[34]&&121===R[35]&&112===R[36]&&101===R[37]&&97===R[38]&&112===R[39]&&112===R[40]&&108===R[41]&&105===R[42]&&99===R[43]&&97===R[44]&&116===R[45]&&105===R[46]&&111===R[47]&&110===R[48]&&47===R[49]&&101===R[50]&&112===R[51]&&117===R[52]&&98===R[53]&&43===R[54]&&122===R[55]&&105===R[56]&&112===R[57])return{ext:'epub',mime:'application/epub+zip'};if(80===R[0]&&75===R[1]&&3===R[2]&&4===R[3]&&77===R[30]&&69===R[31]&&84===R[32]&&65===R[33]&&45===R[34]&&73===R[35]&&78===R[36]&&70===R[37]&&47===R[38]&&109===R[39]&&111===R[40]&&122===R[41]&&105===R[42]&&108===R[43]&&108===R[44]&&97===R[45]&&46===R[46]&&114===R[47]&&115===R[48]&&97===R[49])return{ext:'xpi',mime:'application/x-xpinstall'};if(80===R[0]&&75===R[1]&&(3===R[2]||5===R[2]||7===R[2])&&(4===R[3]||6===R[3]||8===R[3]))return{ext:'zip',mime:'application/zip'};if(117===R[257]&&115===R[258]&&116===R[259]&&97===R[260]&&114===R[261])return{ext:'tar',mime:'application/x-tar'};if(82===R[0]&&97===R[1]&&114===R[2]&&33===R[3]&&26===R[4]&&7===R[5]&&(0===R[6]||1===R[6]))return{ext:'rar',mime:'application/x-rar-compressed'};if(31===R[0]&&139===R[1]&&8===R[2])return{ext:'gz',mime:'application/gzip'};if(66===R[0]&&90===R[1]&&104===R[2])return{ext:'bz2',mime:'application/x-bzip2'};if(55===R[0]&&122===R[1]&&188===R[2]&&175===R[3]&&39===R[4]&&28===R[5])return{ext:'7z',mime:'application/x-7z-compressed'};if(120===R[0]&&1===R[1])return{ext:'dmg',mime:'application/x-apple-diskimage'};if(0===R[0]&&0===R[1]&&0===R[2]&&(24===R[3]||32===R[3])&&102===R[4]&&116===R[5]&&121===R[6]&&112===R[7]||51===R[0]&&103===R[1]&&112===R[2]&&53===R[3]||0===R[0]&&0===R[1]&&0===R[2]&&28===R[3]&&102===R[4]&&116===R[5]&&121===R[6]&&112===R[7]&&109===R[8]&&112===R[9]&&52===R[10]&&50===R[11]&&109===R[16]&&112===R[17]&&52===R[18]&&49===R[19]&&109===R[20]&&112===R[21]&&52===R[22]&&50===R[23]&&105===R[24]&&115===R[25]&&111===R[26]&&109===R[27]||0===R[0]&&0===R[1]&&0===R[2]&&28===R[3]&&102===R[4]&&116===R[5]&&121===R[6]&&112===R[7]&&105===R[8]&&115===R[9]&&111===R[10]&&109===R[11]||0===R[0]&&0===R[1]&&0===R[2]&&28===R[3]&&102===R[4]&&116===R[5]&&121===R[6]&&112===R[7]&&109===R[8]&&112===R[9]&&52===R[10]&&50===R[11]&&0===R[12]&&0===R[13]&&0===R[14]&&0===R[15])return{ext:'mp4',mime:'video/mp4'};if(0===R[0]&&0===R[1]&&0===R[2]&&28===R[3]&&102===R[4]&&116===R[5]&&121===R[6]&&112===R[7]&&77===R[8]&&52===R[9]&&86===R[10])return{ext:'m4v',mime:'video/x-m4v'};if(77===R[0]&&84===R[1]&&104===R[2]&&100===R[3])return{ext:'mid',mime:'audio/midi'};if(26===R[0]&&69===R[1]&&223===R[2]&&163===R[3]){const L=R.subarray(4,4100),E=L.findIndex((T,O,G)=>66===G[O]&&130===G[O+1]);if(0<=E){const O=(G)=>Array.from(G).every((W,Z)=>L[E+3+Z]===W.charCodeAt(0));if(O('matroska'))return{ext:'mkv',mime:'video/x-matroska'};if(O('webm'))return{ext:'webm',mime:'video/webm'}}}return 0===R[0]&&0===R[1]&&0===R[2]&&20===R[3]&&102===R[4]&&116===R[5]&&121===R[6]&&112===R[7]?{ext:'mov',mime:'video/quicktime'}:82===R[0]&&73===R[1]&&70===R[2]&&70===R[3]&&65===R[8]&&86===R[9]&&73===R[10]?{ext:'avi',mime:'video/x-msvideo'}:48===R[0]&&38===R[1]&&178===R[2]&&117===R[3]&&142===R[4]&&102===R[5]&&207===R[6]&&17===R[7]&&166===R[8]&&217===R[9]?{ext:'wmv',mime:'video/x-ms-wmv'}:0===R[0]&&0===R[1]&&1===R[2]&&'b'===R[3].toString(16)[0]?{ext:'mpg',mime:'video/mpeg'}:73===R[0]&&68===R[1]&&51===R[2]||255===R[0]&&251===R[1]?{ext:'mp3',mime:'audio/mpeg'}:102===R[4]&&116===R[5]&&121===R[6]&&112===R[7]&&77===R[8]&&52===R[9]&&65===R[10]||77===R[0]&&52===R[1]&&65===R[2]&&32===R[3]?{ext:'m4a',mime:'audio/m4a'}:79===R[28]&&112===R[29]&&117===R[30]&&115===R[31]&&72===R[32]&&101===R[33]&&97===R[34]&&100===R[35]?{ext:'opus',mime:'audio/opus'}:79===R[0]&&103===R[1]&&103===R[2]&&83===R[3]?{ext:'ogg',mime:'audio/ogg'}:102===R[0]&&76===R[1]&&97===R[2]&&67===R[3]?{ext:'flac',mime:'audio/x-flac'}:82===R[0]&&73===R[1]&&70===R[2]&&70===R[3]&&87===R[8]&&65===R[9]&&86===R[10]&&69===R[11]?{ext:'wav',mime:'audio/x-wav'}:35===R[0]&&33===R[1]&&65===R[2]&&77===R[3]&&82===R[4]&&10===R[5]?{ext:'amr',mime:'audio/amr'}:37===R[0]&&80===R[1]&&68===R[2]&&70===R[3]?{ext:'pdf',mime:'application/pdf'}:77===R[0]&&90===R[1]?{ext:'exe',mime:'application/x-msdownload'}:(67===R[0]||70===R[0])&&87===R[1]&&83===R[2]?{ext:'swf',mime:'application/x-shockwave-flash'}:123===R[0]&&92===R[1]&&114===R[2]&&116===R[3]&&102===R[4]?{ext:'rtf',mime:'application/rtf'}:119===R[0]&&79===R[1]&&70===R[2]&&70===R[3]&&(0===R[4]&&1===R[5]&&0===R[6]&&0===R[7]||79===R[4]&&84===R[5]&&84===R[6]&&79===R[7])?{ext:'woff',mime:'application/font-woff'}:119===R[0]&&79===R[1]&&70===R[2]&&50===R[3]&&(0===R[4]&&1===R[5]&&0===R[6]&&0===R[7]||79===R[4]&&84===R[5]&&84===R[6]&&79===R[7])?{ext:'woff2',mime:'application/font-woff'}:76===R[34]&&80===R[35]&&(0===R[8]&&0===R[9]&&1===R[10]||1===R[8]&&0===R[9]&&2===R[10]||2===R[8]&&0===R[9]&&2===R[10])?{ext:'eot',mime:'application/octet-stream'}:0===R[0]&&1===R[1]&&0===R[2]&&0===R[3]&&0===R[4]?{ext:'ttf',mime:'application/font-sfnt'}:79===R[0]&&84===R[1]&&84===R[2]&&79===R[3]&&0===R[4]?{ext:'otf',mime:'application/font-sfnt'}:0===R[0]&&0===R[1]&&1===R[2]&&0===R[3]?{ext:'ico',mime:'image/x-icon'}:70===R[0]&&76===R[1]&&86===R[2]&&1===R[3]?{ext:'flv',mime:'video/x-flv'}:37===R[0]&&33===R[1]?{ext:'ps',mime:'application/postscript'}:253===R[0]&&55===R[1]&&122===R[2]&&88===R[3]&&90===R[4]&&0===R[5]?{ext:'xz',mime:'application/x-xz'}:83===R[0]&&81===R[1]&&76===R[2]&&105===R[3]?{ext:'sqlite',mime:'application/x-sqlite3'}:78===R[0]&&69===R[1]&&83===R[2]&&26===R[3]?{ext:'nes',mime:'application/x-nintendo-nes-rom'}:67===R[0]&&114===R[1]&&50===R[2]&&52===R[3]?{ext:'crx',mime:'application/x-google-chrome-extension'}:77===R[0]&&83===R[1]&&67===R[2]&&70===R[3]||73===R[0]&&83===R[1]&&99===R[2]&&40===R[3]?{ext:'cab',mime:'application/vnd.ms-cab-compressed'}:33===R[0]&&60===R[1]&&97===R[2]&&114===R[3]&&99===R[4]&&104===R[5]&&62===R[6]&&10===R[7]&&100===R[8]&&101===R[9]&&98===R[10]&&105===R[11]&&97===R[12]&&110===R[13]&&45===R[14]&&98===R[15]&&105===R[16]&&110===R[17]&&97===R[18]&&114===R[19]&&121===R[20]?{ext:'deb',mime:'application/x-deb'}:33===R[0]&&60===R[1]&&97===R[2]&&114===R[3]&&99===R[4]&&104===R[5]&&62===R[6]?{ext:'ar',mime:'application/x-unix-archive'}:237===R[0]&&171===R[1]&&238===R[2]&&219===R[3]?{ext:'rpm',mime:'application/x-rpm'}:31===R[0]&&160===R[1]||31===R[0]&&157===R[1]?{ext:'Z',mime:'application/x-compress'}:76===R[0]&&90===R[1]&&73===R[2]&&80===R[3]?{ext:'lz',mime:'application/x-lzip'}:208===R[0]&&207===R[1]&&17===R[2]&&224===R[3]&&161===R[4]&&177===R[5]&&26===R[6]&&225===R[7]?{ext:'msi',mime:'application/x-msi'}:6===R[0]&&14===R[1]&&43===R[2]&&52===R[3]&&2===R[4]&&5===R[5]&&1===R[6]&&1===R[7]&&13===R[8]&&1===R[9]&&2===R[10]&&1===R[11]&&1===R[12]&&2===R[13]?{ext:'mxf',mime:'application/mxf'}:null}},function(_){_.exports={name:'has-own',version:'1.0.0',description:'A safer .hasOwnProperty() - hasOwn(name, obj)',main:'index.js',scripts:{test:'make test'},author:'Aaron Heckmann <aaron.heckmann+github@gmail.com>',license:'MIT',repository:{type:'git',url:'git://github.com/pebble/has-own.git'},homepage:'https://github.com/pebble/has-own/',devDependencies:{mocha:'^1.21.0'}}},function(_,P,I){'use strict';const S=I(188),R=new Set(['jpg','png','gif','webp','tif','bmp','jxr','psd']);_.exports=(L)=>{const E=S(L);return R.has(E&&E.ext)?E:null}},function(_,P,I){'use strict';(function(S){function R(){Q=!0;for(var te=J.length,$,ee;te;){for(ee=J,J=[],$=-1;++$<te;)ee[$]();te=J.length}Q=!1}var E=S.MutationObserver||S.WebKitMutationObserver,T;if(E){var O=0,G=new E(R),W=S.document.createTextNode('');G.observe(W,{characterData:!0}),T=function(){W.data=O=++O%2}}else if(!S.setImmediate&&'undefined'!=typeof S.MessageChannel){var Z=new S.MessageChannel;Z.port1.onmessage=R,T=function(){Z.port2.postMessage(0)}}else T='document'in S&&'onreadystatechange'in S.document.createElement('script')?function(){var $=S.document.createElement('script');$.onreadystatechange=function(){R(),$.onreadystatechange=null,$.parentNode.removeChild($),$=null},S.document.documentElement.appendChild($)}:function(){setTimeout(R,0)};var Q,J=[];_.exports=function($){1!==J.push($)||Q||T()}}).call(P,I(28))},function(_){'use strict';var S=Object.prototype.toString;_.exports=function(L){return'Array'===S.call(L).substr(-6,5)}},function(_,P,I){'use strict';var S=I(48);_.exports=_NumberisFinite||function(R){return!('number'!=typeof R||S(R)||R===Infinity||R===-Infinity)}},function(_){var S,S;(function(R){_.exports=R()})(function(){return function T(O,G,W){function Z($,ee){if(!G[$]){if(!O[$]){if(!ee&&'function'==typeof S&&S)return S($,!0);if(Q)return Q($,!0);var ae=new Error('Cannot find module \''+$+'\'');throw ae.code='MODULE_NOT_FOUND',ae}var ie=G[$]={exports:{}};O[$][0].call(ie.exports,function(ne){var oe=O[$][1][ne];return Z(oe?oe:ne)},ie,ie.exports,T,O,G,W)}return G[$].exports}for(var Q='function'==typeof S&&S,J=0;J<W.length;J++)Z(W[J]);return Z}({1:[function(T,O){var ee=function(ae,ie){function ne(){this.constructor=ae}for(var oe in ie)te.call(ie,oe)&&(ae[oe]=ie[oe]);return ne.prototype=ie.prototype,ae.prototype=new ne,ae.__super__=ie.prototype,ae},te={}.hasOwnProperty,W,Z,Q,J,$;W=T('./PriorityQueue/AbstractPriorityQueue'),Z=T('./PriorityQueue/ArrayStrategy'),J=T('./PriorityQueue/BinaryHeapStrategy'),Q=T('./PriorityQueue/BHeapStrategy'),$=function(ae){function ie(ne){ne||(ne={}),ne.strategy||(ne.strategy=J),ne.comparator||(ne.comparator=function(oe,le){return(oe||0)-(le||0)}),ie.__super__.constructor.call(this,ne)}return ee(ie,ae),ie}(W),$.ArrayStrategy=Z,$.BinaryHeapStrategy=J,$.BHeapStrategy=Q,O.exports=$},{'./PriorityQueue/AbstractPriorityQueue':2,'./PriorityQueue/ArrayStrategy':3,'./PriorityQueue/BHeapStrategy':4,'./PriorityQueue/BinaryHeapStrategy':5}],2:[function(T,O){var W;O.exports=W=function(){function Z(Q){var J;if(null==(null==Q?void 0:Q.strategy))throw'Must pass options.strategy, a strategy';if(null==(null==Q?void 0:Q.comparator))throw'Must pass options.comparator, a comparator';this.priv=new Q.strategy(Q),this.length=(null==Q||null==(J=Q.initialValues)?void 0:J.length)||0}return Z.prototype.queue=function(Q){return this.length++,this.priv.queue(Q),void 0},Z.prototype.dequeue=function(){if(!this.length)throw'Empty queue';return this.length--,this.priv.dequeue()},Z.prototype.peek=function(){if(!this.length)throw'Empty queue';return this.priv.peek()},Z.prototype.clear=function(){return this.length=0,this.priv.clear()},Z}()},{}],3:[function(T,O){var W,Z;Z=function(Q,J,$){var ee,te,ae;for(te=0,ee=Q.length;te<ee;)ae=te+ee>>>1,0<=$(Q[ae],J)?te=ae+1:ee=ae;return te},O.exports=W=function(){function Q(J){var $;this.options=J,this.comparator=this.options.comparator,this.data=(null==($=this.options.initialValues)?void 0:$.slice(0))||[],this.data.sort(this.comparator).reverse()}return Q.prototype.queue=function(J){var $;return $=Z(this.data,J,this.comparator),this.data.splice($,0,J),void 0},Q.prototype.dequeue=function(){return this.data.pop()},Q.prototype.peek=function(){return this.data[this.data.length-1]},Q.prototype.clear=function(){return this.data.length=0,void 0},Q}()},{}],4:[function(T,O){var W;O.exports=W=function(){function Z(Q){var J,$,ee,te,ae,ie,ne,oe,le;for(this.comparator=(null==Q?void 0:Q.comparator)||function(se,de){return se-de},this.pageSize=(null==Q?void 0:Q.pageSize)||512,this.length=0,oe=0;1<<oe<this.pageSize;)oe+=1;if(1<<oe!==this.pageSize)throw'pageSize must be a power of two';for(this._shift=oe,this._emptyMemoryPageTemplate=J=[],($=ee=0,ie=this.pageSize);0<=ie?ee<ie:ee>ie;$=0<=ie?++ee:--ee)J.push(null);if(this._memory=[],this._mask=this.pageSize-1,Q.initialValues)for(ne=Q.initialValues,te=0,ae=ne.length;te<ae;te++)le=ne[te],this.queue(le)}return Z.prototype.queue=function(Q){return this.length+=1,this._write(this.length,Q),this._bubbleUp(this.length,Q),void 0},Z.prototype.dequeue=function(){var Q,J;return Q=this._read(1),J=this._read(this.length),this.length-=1,0<this.length&&(this._write(1,J),this._bubbleDown(1,J)),Q},Z.prototype.peek=function(){return this._read(1)},Z.prototype.clear=function(){return this.length=0,this._memory.length=0,void 0},Z.prototype._write=function(Q,J){var $;for($=Q>>this._shift;$>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[$][Q&this._mask]=J},Z.prototype._read=function(Q){return this._memory[Q>>this._shift][Q&this._mask]},Z.prototype._bubbleUp=function(Q,J){var $,ee,te,ae;for($=this.comparator;1<Q&&(ee=Q&this._mask,Q<this.pageSize||3<ee?te=Q&~this._mask|ee>>1:2>ee?(te=Q-this.pageSize>>this._shift,te+=te&~(this._mask>>1),te|=this.pageSize>>1):te=Q-2,ae=this._read(te),!(0>$(ae,J)));)this._write(te,J),this._write(Q,ae),Q=te},Z.prototype._bubbleDown=function(Q,J){var $,ee,te,ae,ie;for(ie=this.comparator;Q<this.length;)if(Q>this._mask&&!(Q&this._mask-1)?$=ee=Q+2:Q&this.pageSize>>1?($=(Q&~this._mask)>>1,$|=Q&this._mask>>1,$=$+1<<this._shift,ee=$+1):($=Q+(Q&this._mask),ee=$+1),$!==ee&&ee<=this.length){if(te=this._read($),ae=this._read(ee),0>ie(te,J)&&0>=ie(te,ae))this._write($,J),this._write(Q,te),Q=$;else if(0>ie(ae,J))this._write(ee,J),this._write(Q,ae),Q=ee;else break;}else if(!($<=this.length))break;else if(te=this._read($),0>ie(te,J))this._write($,J),this._write(Q,te),Q=$;else break},Z}()},{}],5:[function(T,O){var W;O.exports=W=function(){function Z(Q){var J;this.comparator=(null==Q?void 0:Q.comparator)||function($,ee){return $-ee},this.length=0,this.data=(null==(J=Q.initialValues)?void 0:J.slice(0))||[],this._heapify()}return Z.prototype._heapify=function(){var Q,J,$;if(0<this.data.length)for(Q=J=1,$=this.data.length;1<=$?J<$:J>$;Q=1<=$?++J:--J)this._bubbleUp(Q)},Z.prototype.queue=function(Q){return this.data.push(Q),this._bubbleUp(this.data.length-1),void 0},Z.prototype.dequeue=function(){var Q,J;return J=this.data[0],Q=this.data.pop(),0<this.data.length&&(this.data[0]=Q,this._bubbleDown(0)),J},Z.prototype.peek=function(){return this.data[0]},Z.prototype.clear=function(){return this.length=0,this.data.length=0,void 0},Z.prototype._bubbleUp=function(Q){for(var J,$;0<Q&&(J=Q-1>>>1,0>this.comparator(this.data[Q],this.data[J]));)$=this.data[J],this.data[J]=this.data[Q],this.data[Q]=$,Q=J},Z.prototype._bubbleDown=function(Q){var J,$,ee,te,ae;for(J=this.data.length-1;$=(Q<<1)+1,te=$+1,ee=Q,$<=J&&0>this.comparator(this.data[$],this.data[ee])&&(ee=$),te<=J&&0>this.comparator(this.data[te],this.data[ee])&&(ee=te),ee!==Q;)ae=this.data[ee],this.data[ee]=this.data[Q],this.data[Q]=ae,Q=ee},Z}()},{}]},{},[1])(1)})},function(_,P,I){'use strict';function S(){}function R(ne){if('function'!=typeof ne)throw new TypeError('resolver must be a function');this.state=ie,this.queue=[],this.outcome=void 0,ne!==S&&O(this,ne)}function L(ne,oe,le){this.promise=ne,'function'==typeof oe&&(this.onFulfilled=oe,this.callFulfilled=this.otherCallFulfilled),'function'==typeof le&&(this.onRejected=le,this.callRejected=this.otherCallRejected)}function E(ne,oe,le){$(function(){var se;try{se=oe(le)}catch(de){return ee.reject(ne,de)}se===ne?ee.reject(ne,new TypeError('Cannot resolve promise with itself')):ee.resolve(ne,se)})}function T(ne){var oe=ne&&ne.then;if(ne&&('object'==typeof ne||'function'==typeof ne)&&'function'==typeof oe)return function(){oe.apply(ne,arguments)}}function O(ne,oe){function le(ce){he||(he=!0,ee.reject(ne,ce))}function se(ce){he||(he=!0,ee.resolve(ne,ce))}var he=!1,ue=G(function(){oe(se,le)});'error'===ue.status&&le(ue.value)}function G(ne,oe){var le={};try{le.value=ne(oe),le.status='success'}catch(se){le.status='error',le.value=se}return le}var $=I(191),ee={},te=['REJECTED'],ae=['FULFILLED'],ie=['PENDING'];_.exports=R,R.prototype['catch']=function(ne){return this.then(null,ne)},R.prototype.then=function(ne,oe){if('function'!=typeof ne&&this.state===ae||'function'!=typeof oe&&this.state===te)return this;var le=new this.constructor(S);if(this.state!==ie){var se=this.state===ae?ne:oe;E(le,se,this.outcome)}else this.queue.push(new L(le,ne,oe));return le},L.prototype.callFulfilled=function(ne){ee.resolve(this.promise,ne)},L.prototype.otherCallFulfilled=function(ne){E(this.promise,this.onFulfilled,ne)},L.prototype.callRejected=function(ne){ee.reject(this.promise,ne)},L.prototype.otherCallRejected=function(ne){E(this.promise,this.onRejected,ne)},ee.resolve=function(ne,oe){var le=G(T,oe);if('error'===le.status)return ee.reject(ne,le.value);var se=le.value;if(se)O(ne,se);else{ne.state=ae,ne.outcome=oe;for(var de=-1,he=ne.queue.length;++de<he;)ne.queue[de].callFulfilled(oe)}return ne},ee.reject=function(ne,oe){ne.state=te,ne.outcome=oe;for(var le=-1,se=ne.queue.length;++le<se;)ne.queue[le].callRejected(oe);return ne},R.resolve=function(ne){return ne instanceof this?ne:ee.resolve(new this(S),ne)},R.reject=function(ne){var oe=new this(S);return ee.reject(oe,ne)},R.all=function(ne){function oe(ge,fe){le.resolve(ge).then(function(be){he[fe]=be,++ue!==se||de||(de=!0,ee.resolve(pe,he))},function(be){de||(de=!0,ee.reject(pe,be))})}var le=this;if('[object Array]'!==Object.prototype.toString.call(ne))return this.reject(new TypeError('must be an array'));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var he=Array(se),ue=0,ce=-1,pe=new this(S);++ce<se;)oe(ne[ce],ce);return pe},R.race=function(ne){function oe(ce){le.resolve(ce).then(function(pe){de||(de=!0,ee.resolve(ue,pe))},function(pe){de||(de=!0,ee.reject(ue,pe))})}var le=this;if('[object Array]'!==Object.prototype.toString.call(ne))return this.reject(new TypeError('must be an array'));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var he=-1,ue=new this(S);++he<se;)oe(ne[he]);return ue}},function(_,P,I){'use strict';function E(Z){for(var Q=Array(Z[0].length),J=0;J<Q.length;++J)Q[J]=Array(Z.length);for(J=0;J<Z.length;++J)for(var $=0;$<Z[0].length;++$)Q[$][J]=Z[J][$];return Q}const W=I(46).array;_.exports={coordArrayToPoints:function(Z,Q){if(0!=Z.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var J=Z.length/Q,$=Array(J),ee=0,te=0,ae;te<Z.length;te+=Q){ae=Array(Q);for(var ie=0;ie<Q;++ie)ae[ie]=Z[te+ie];$[ee]=ae,ee++}return $},coordArrayToCoordMatrix:function(Z,Q){if(0!=Z.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var J=Array(Q),$=Z.length/Q,ee=0;ee<J.length;ee++)J[ee]=Array($);for(ee=0;ee<Z.length;ee+=Q)for(var te=0,ae;te<Q;++te)ae=_Mathfloor(ee/Q),J[te][ae]=Z[ee+te];return J},coordMatrixToCoordArray:function(Z){for(var Q=Array(Z.length*Z[0].length),J=0,$=0;$<Z[0].length;++$)for(var ee=0;ee<Z.length;++ee)Q[J]=Z[ee][$],++J;return Q},coordMatrixToPoints:E,pointsToCoordArray:function(Z){for(var Q=Array(Z.length*Z[0].length),J=0,$=0;$<Z.length;++$)for(var ee=0;ee<Z[0].length;++ee)Q[J]=Z[$][ee],++J;return Q},pointsToCoordMatrix:E,applyDotProduct:function(Z,Q){var J,$;Z.length<=Q.length?($=Z,J=Q):($=Q,J=Z);for(var ee=J.length-$.length+1,te=Array(ee),ae=0,ie;ae<ee;++ae){ie=0;for(var ne=0;ne<$.length;++ne)ie+=$[ne]*J[ae+ne];te[ae]=ie}return te},scale:function(Z,Q){var J=Q.inPlace?Z:Array(Z.length);const $=Q.max,ee=Q.min;if('number'==typeof $){if('number'==typeof ee)for(var te=W.minMax(Z),ae=($-ee)/(te.max-te.min),ie=0;ie<J.length;ie++)J[ie]=(Z[ie]-te.min)*ae+ee;else for(var ne=W.max(Z),ae=$/ne,ie=0;ie<J.length;ie++)J[ie]=Z[ie]*ae;}else if('number'==typeof ee)for(var ne=W.min(Z),ae=ee/ne,ie=0;ie<J.length;ie++)J[ie]=Z[ie]*ae;return J}}},function(_,P){'use strict';function R(T,O,G,W,Z){function Q(we,ke,ve,Me){return(Me-ke)/(ve-we)}var J=T.length,$=(W-G)/(Z-1),te=G-$/2,ae=Array(Z),ie=T[1]-T[0],ne=T[T.length-1]-T[T.length-2],oe=te,le=te+$,se=_NumberMIN_VALUE,de=0,he=T[0]-ie,ue=0,ce=0,pe=0,ge=0,fe=0,_e=0,be=0,xe=0;main:for(;;){for(;0<=he-le;){var ye=E(0,le-se,pe,de);if(_e=ce+ye,ae[xe]=(_e-fe)/$,xe++,xe===Z)break main;oe=le,le+=$,fe=_e}se<=oe&&oe<=he&&(ye=E(0,oe-se,pe,de),fe=ce+ye),ce+=E(se,he,pe,ge),se=he,de=ue,be<J?(he=T[be],ue=O[be],be++):be===J&&(he+=ne,ue=0),pe=Q(se,de,he,ue),ge=-pe*se+de}return ae}function L(T,O,G,W,Z){var Q=T.length,J=(W-G)/(Z-1),ee=T[T.length-1]-T[T.length-2],te=G-J/2,ae=Array(Z),ie=te,ne=te+J,oe=-_NumberMAX_VALUE,le=0,se=T[0],de=O[0],he=0,ue=!0,ce=0,pe=0,ge=1,fe=0;main:for(;;){if(oe>=se)throw new Error('x must be an increasing serie');for(;0<oe-ne;){if(ue&&(pe++,ue=!1),ae[fe]=0>=pe?0:ce/pe,fe++,fe===Z)break main;ie=ne,ne+=J,ce=0,pe=0}oe>ie&&(ce+=le,pe++),(oe==-_NumberMAX_VALUE||1<he)&&pe--,oe=se,le=de,ge<Q?(se=T[ge],de=O[ge],ge++):(se+=ee,de=0,he++)}return ae}function E(T,O,G,W){return 0.5*G*O*O+W*O-(0.5*G*T*T+W*T)}P.getEquallySpacedData=function(T,O,G){1<T.length&&T[0]>T[1]&&(T=T.slice().reverse(),O=O.slice().reverse());var W=T.length;if(W!==O.length)throw new RangeError('the x and y vector doesn\'t have the same size.');G===void 0&&(G={});var Z=G.from===void 0?T[0]:G.from;if(isNaN(Z)||!isFinite(Z))throw new RangeError('\'From\' value must be a number');var Q=G.to===void 0?T[T.length-1]:G.to;if(isNaN(Q)||!isFinite(Q))throw new RangeError('\'To\' value must be a number');var J=Z>Q;if(J){var $=Z;Z=Q,Q=$}var ee=G.numberOfPoints===void 0?100:G.numberOfPoints;if(isNaN(ee)||!isFinite(ee))throw new RangeError('\'Number of points\' value must be a number');if(1>ee)throw new RangeError('the number of point must be higher than 1');var te='slot'===G.variant?'slot':'smooth',ae='slot'==te?L(T,O,Z,Q,ee):R(T,O,Z,Q,ee);return J?ae.reverse():ae},P.integral=E},function(_,P,I){_.exports=P=I(196),P.getEquallySpacedData=I(197).getEquallySpacedData,P.SNV=I(199).SNV},function(_,P,I){'use strict';P.SNV=function(L){for(var E=R.mean(L),T=R.standardDeviation(L),O=L.slice(),G=0;G<L.length;G++)O[G]=(O[G]-E)/T;return O};var R=I(46).array},function(_){'use strict';function S(L){this.value=L,this.parent=null,this.rank=0}_.exports=class{constructor(){this.nodes=new Map}add(L){var E=this.nodes.get(L);return E||(E=new S(L),this.nodes.set(L,E)),E}union(L,E){const T=this.find(L),O=this.find(E);T===O||(T.rank<O.rank?T.parent=O:T.rank>O.rank?O.parent=T:(O.parent=T,T.rank++))}find(L){for(var E=L;null!==E.parent;)E=E.parent;for(var T=L,O;null!==T.parent;)O=T,T=T.parent,O.parent=E;return E}connected(L,E){return this.find(L)===this.find(E)}}},function(_,P,I){'use strict';var S=I(41);_.exports={DEBUG:!1,ifft2DArray:function(L,E,T){var O=Array(E*T),G=E/2,W=2*(T-1);S.init(G);for(var Z={re:Array(G),im:Array(G)},Q=0;Q<T;Q++){for(var J=G-1;0<=J;J--)Z.re[J]=L[2*J*T+Q],Z.im[J]=L[(2*J+1)*T+Q];S.bt(Z.re,Z.im);for(var J=G-1;0<=J;J--)O[2*J*T+Q]=Z.re[J],O[(2*J+1)*T+Q]=Z.im[J]}var $=Array(G*W);S.init(W);for(var ee={re:Array(W),im:Array(W)},J=0;J<E;J+=2){ee.re[0]=O[J*T],ee.im[0]=O[(J+1)*T];for(var Q=1;Q<T;Q++)ee.re[Q]=O[J*T+Q],ee.im[Q]=O[(J+1)*T+Q],ee.re[W-Q]=O[J*T+Q],ee.im[W-Q]=-O[(J+1)*T+Q];S.bt(ee.re,ee.im);for(var ae=J/2*W,Q=W-1;0<=Q;Q--)$[ae+Q]=ee.re[Q]/(W*G)}return $},fft2DArray:function(L,E,T){var G=Object.assign({},{inplace:!0}),W=T/2+1,Z=2*E,Q=Array(Z*W);S.init(T);for(var J={re:Array(T),im:Array(T)},$={re:Array(T),im:Array(T)},ee={re:Array(T),im:Array(T)},le=0,te,ae,ie,ne,oe;le<E/2;le++){te=2*le*T,J.re=L.slice(te,te+T),te=(2*le+1)*T,J.im=L.slice(te,te+T),S.fft1d(J.re,J.im),this.reconstructTwoRealFFT(J,$,ee),ae=4*le*W,ie=(4*le+1)*W,ne=(4*le+2)*W,oe=(4*le+3)*W;for(var se=W-1;0<=se;se--)Q[ae+se]=$.re[se],Q[ie+se]=$.im[se],Q[ne+se]=ee.re[se],Q[oe+se]=ee.im[se]}$=null,ee=null;var de=Array(Z*W);S.init(E);for(var he={re:Array(E),im:Array(E)},ue=W-1;0<=ue;ue--){for(var le=E-1;0<=le;le--)he.re[le]=Q[2*le*W+ue],he.im[le]=Q[(2*le+1)*W+ue],isNaN(he.re[le])&&(he.re[le]=0),isNaN(he.im[le])&&(he.im[le]=0);S.fft1d(he.re,he.im);for(var le=E-1;0<=le;le--)de[2*le*W+ue]=he.re[le],de[(2*le+1)*W+ue]=he.im[le]}return de},reconstructTwoRealFFT:function(L,E,T){var O=L.re.length;E.re[0]=L.re[0],E.im[0]=0,T.re[0]=L.im[0],T.im[0]=0;for(var $=O/2,G,W,Z,Q,J;0<$;$--)J=O-$,G=0.5*(L.re[$]-L.re[J]),W=0.5*(L.re[$]+L.re[J]),Z=0.5*(L.im[$]-L.im[J]),Q=0.5*(L.im[$]+L.im[J]),E.re[$]=W,E.im[$]=Z,E.re[J]=W,E.im[J]=-Z,T.re[$]=Q,T.im[$]=-G,T.re[J]=Q,T.im[J]=G},convolute2DI:function(L,E,T,O){for(var Z=0,G,W;Z<T/2;Z++)for(var Q=0;Q<O;Q++)G=L[2*Z*O+Q]*E[2*Z*O+Q]-L[(2*Z+1)*O+Q]*E[(2*Z+1)*O+Q],W=L[2*Z*O+Q]*E[(2*Z+1)*O+Q]+L[(2*Z+1)*O+Q]*E[2*Z*O+Q],L[2*Z*O+Q]=G,L[(2*Z+1)*O+Q]=W},convolute:function(L,E,T,O){for(var W=Array(O*T),Z=0;Z<T*O;Z++)W[Z]=L[Z];W=this.fft2DArray(W,T,O);for(var Q=E.length,J=E[0].length,$=Array(O*T),Z=0;Z<O*T;Z++)$[Z]=0;for(var ae=_Mathfloor((Q-1)/2),ie=_Mathfloor((J-1)/2),ne=0,ee,te;ne<Q;ne++){ee=(ne-ae+T)%T;for(var oe=0;oe<J;oe++)te=(oe-ie+O)%O,$[ee*O+te]=E[ne][oe]}$=this.fft2DArray($,T,O);var le=2*T,se=O/2+1;return this.convolute2DI(W,$,le,se),this.ifft2DArray(W,le,se)},toRadix2:function(L,E,T){var O,G,W,Z,Q=T,J=E,$=0,ee=0;if(0===T||0!=(T&T-1)){for(Q=0;0!=T>>++Q;);Q=1<<Q,ee=Q-T}if(0===E||0!=(E&E-1)){for(J=0;0!=E>>++J;);J=1<<J,$=(J-E)*Q}if(J==E&&Q==T)return{data:L,rows:E,cols:T};var te=Array(J*Q),ae=_Mathfloor((J-E)/2)-E,ie=_Mathfloor((Q-T)/2)-T;for(O=0;O<J;O++)for(W=O*Q,Z=(O-ae)%E*T,G=0;G<Q;G++)te[W+G]=L[Z+(G-ie)%T];return{data:te,rows:J,cols:Q}},crop:function(L,E,T,O,G,W){if(E==O&&T==G)return L;var Z=Object.assign({},W),Q=Array(G*O),J=_Mathfloor((E-O)/2),$=_Mathfloor((T-G)/2),ee,te,ae,ie;for(ae=0;ae<O;ae++)for(ee=ae*G,te=(ae+J)*T,ie=0;ie<G;ie++)Q[ee+ie]=L[te+(ie+$)];return Q}}},function(_,P,I){'use strict';P.FFTUtils=I(201),P.FFT=I(41)},function(_,P,I){'use strict';const S=I(10).squared,R={sigma:1};_.exports=class{constructor(E){E=Object.assign({},R,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,T){const O=S(E,T);return _Mathexp(-O/this.divisor)}}},function(_){'use strict';const S={degree:1,constant:1,scale:1};_.exports=class{constructor(L){L=Object.assign({},S,L),this.degree=L.degree,this.constant=L.constant,this.scale=L.scale}compute(L,E){for(var T=0,O=0;O<L.length;O++)T+=L[O]*E[O];return _Mathpow(this.scale*T+this.constant,this.degree)}}},function(_){'use strict';const S={alpha:0.01,constant:-Math.E};_.exports=class{constructor(L){L=Object.assign({},S,L),this.alpha=L.alpha,this.constant=L.constant}compute(L,E){for(var T=0,O=0;O<L.length;O++)T+=L[O]*E[O];return Math.tanh(this.alpha*T+this.constant)}}},function(_,P,I){'use strict';const S=I(7),R=I(203),L=I(204),E=I(207),T=I(208),O=I(209),G=I(210),W=I(211),Z=I(212),Q=I(213),J=I(205),$={gaussian:R,rbf:R,polynomial:L,poly:L,anova:E,cauchy:T,exponential:O,histogram:G,min:G,laplacian:W,multiquadratic:Z,rational:Q,sigmoid:J,mlp:J};_.exports=class{constructor(te,ae){if(this.kernelType=te,'linear'!==te)if('string'==typeof te){te=te.toLowerCase();var ie=$[te];if(ie)this.kernelFunction=new ie(ae);else throw new Error('unsupported kernel type: '+te)}else if('object'==typeof te&&'function'==typeof te.compute)this.kernelFunction=te;else throw new TypeError('first argument must be a valid kernel type or instance')}compute(te,ae){if(void 0===ae&&(ae=te),'linear'===this.kernelType){var ie=new S(te);return ie.mmul(new S(ae).transpose())}const ne=new S(te.length,ae.length);var oe,le;if(te===ae)for(oe=0;oe<te.length;oe++)for(le=oe;le<te.length;le++)ne[oe][le]=ne[le][oe]=this.kernelFunction.compute(te[oe],te[le]);else for(oe=0;oe<te.length;oe++)for(le=0;le<ae.length;le++)ne[oe][le]=this.kernelFunction.compute(te[oe],ae[le]);return ne}}},function(_){'use strict';const S={sigma:1,degree:1};_.exports=class{constructor(L){L=Object.assign({},S,L),this.sigma=L.sigma,this.degree=L.degree}compute(L,E){for(var T=0,O=_Mathmin(L.length,E.length),G=1;G<=O;++G)T+=_Mathpow(_Mathexp(-this.sigma*_Mathpow(_Mathpow(L[G-1],G)-_Mathpow(E[G-1],G),2)),this.degree);return T}}},function(_,P,I){'use strict';const S=I(10).squared,R={sigma:1};_.exports=class{constructor(E){E=Object.assign({},R,E),this.sigma=E.sigma}compute(E,T){return 1/(1+S(E,T)/(this.sigma*this.sigma))}}},function(_,P,I){'use strict';const S=I(10),R={sigma:1};_.exports=class{constructor(E){E=Object.assign({},R,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,T){const O=S(E,T);return _Mathexp(-O/this.divisor)}}},function(_){'use strict';_.exports=class{compute(R,L){for(var E=_Mathmin(R.length,L.length),T=0,O=0;O<E;++O)T+=_Mathmin(R[O],L[O]);return T}}},function(_,P,I){'use strict';const S=I(10),R={sigma:1};_.exports=class{constructor(E){E=Object.assign({},R,E),this.sigma=E.sigma}compute(E,T){const O=S(E,T);return _Mathexp(-O/this.sigma)}}},function(_,P,I){'use strict';const S=I(10).squared,R={constant:1};_.exports=class{constructor(E){E=Object.assign({},R,E),this.constant=E.constant}compute(E,T){return _Mathsqrt(S(E,T)+this.constant*this.constant)}}},function(_,P,I){'use strict';const S=I(10).squared,R={constant:1};_.exports=class{constructor(E){E=Object.assign({},R,E),this.constant=E.constant}compute(E,T){const O=S(E,T);return 1-O/(O+this.constant)}}},function(_,P,I){'use strict;';function E(O){var G=O,W,Z;if('number'!=typeof O[0]){W=O.length,Z=O[0].length,G=Array(W*Z);for(var Q=0;Q<W;Q++)for(var J=0;J<Z;J++)G[Q*Z+J]=O[Q][J]}else{var $=_Mathsqrt(O.length);_NumberisInteger($)&&(W=$,Z=$)}return{data:G,rows:W,cols:Z}}var T=I(202).FFTUtils;_.exports={fft:function(O,G,W){var Z=E(O),Q=Z.data,J=Object.assign({normalize:!1,divisor:1,rows:Z.rows,cols:Z.cols},W),$,ee;if(J.rows&&J.cols)$=J.rows,ee=J.cols;else throw new Error('Invalid number of rows or columns '+$+' '+ee);var te=J.divisor,ne=G.length,oe=G[0].length,ae,ie;if(J.normalize)for(te=0,ae=0;ae<ne;ae++)for(ie=0;ie<oe;ie++)te+=G[ae][ie];if(0===te)throw new RangeError('convolution: The divisor is equal to zero');var le=T.toRadix2(Q,$,ee),se=T.convolute(le.data,G,le.rows,le.cols);if(se=T.crop(se,le.rows,le.cols,$,ee),0!=te&&1!=te)for(ae=0;ae<se.length;ae++)se[ae]/=te;return se},direct:function(O,G,W){var Z=E(O),Q=Z.data,J=Object.assign({normalize:!1,divisor:1,rows:Z.rows,cols:Z.cols},W),$,ee;if(J.rows&&J.cols)$=J.rows,ee=J.cols;else throw new Error('Invalid number of rows or columns '+$+' '+ee);var te=J.divisor,ae=G.length,ie=G[0].length,ne,oe,le,se,de,he,ue,ce,pe;if(J.normalize)for(te=0,ne=0;ne<ae;ne++)for(oe=0;oe<ie;oe++)te+=G[ne][oe];if(0===te)throw new RangeError('convolution: The divisor is equal to zero');var ge=Array($*ee),fe=_Mathfloor(ae/2),_e=_Mathfloor(ie/2);for(se=0;se<$;se++)for(le=0;le<ee;le++){for(he=0,oe=0;oe<ae;oe++)for(ne=0;ne<ie;ne++)ue=G[ae-oe-1][ie-ne-1],ce=(se+oe-fe+$)%$,pe=(le+ne-_e+ee)%ee,de=ce*ee+pe,he+=Q[de]*ue;de=se*ee+le,ge[de]=he/te}return ge},kernelFactory:{LoG:function(O,G,W){var Z=1e3;W&&W.factor&&(Z=W.factor);var Q=Array(G),J,$,ee,te;Z*=-1;var ie=(G-1)/2;for(J=0;J<G;J++)for(Q[J]=Array(G),te=(J-ie)*(J-ie),$=0;$<G;$++)ee=-(($-ie)*($-ie)+te)/(2*O*O),Q[J][$]=_Mathround(Z*(1+ee)*_Mathexp(ee));return Q}},matrix2Array:E}},function(_,P,I){'use strict';function S(L){if(!(this instanceof S))return new S(L);if(L=R.checkMatrix(L),!L.isSymmetric())throw new Error('Matrix is not symmetric');var E=L,T=E.rows,O=new R(T,T),G=!0,W,Z,Q;for(Z=0;Z<T;Z++){var J=O[Z],$=0;for(Q=0;Q<Z;Q++){var ee=O[Q],te=0;for(W=0;W<Q;W++)te+=ee[W]*J[W];J[Q]=te=(E[Z][Q]-te)/O[Q][Q],$+=te*te}for($=E[Z][Z]-$,G&=0<$,O[Z][Z]=_Mathsqrt(_Mathmax($,0)),Q=Z+1;Q<T;Q++)O[Z][Q]=0}if(!G)throw new Error('Matrix is not positive definite');this.L=O}var R=I(3).Matrix;S.prototype={get lowerTriangularMatrix(){return this.L},solve:function(L){L=R.checkMatrix(L);var E=this.L,T=E.rows;if(L.rows!==T)throw new Error('Matrix dimensions do not match');var O=L.columns,G=L.clone(),W,Z,Q;for(Q=0;Q<T;Q++)for(Z=0;Z<O;Z++){for(W=0;W<Q;W++)G[Q][Z]-=G[W][Z]*E[Q][W];G[Q][Z]/=E[Q][Q]}for(Q=T-1;0<=Q;Q--)for(Z=0;Z<O;Z++){for(W=Q+1;W<T;W++)G[Q][Z]-=G[W][Z]*E[W][Q];G[Q][Z]/=E[Q][Q]}return G}},_.exports=S},function(_,P,I){'use strict';function S($,ee){if(ee=Object.assign({},J,ee),!(this instanceof S))return new S($,ee);if($=G.checkMatrix($),!$.isSquare())throw new Error('Matrix is not a square matrix');var te=$.columns,ae=Q(te,te,0),ie=Array(te),ne=Array(te),oe=$,de=!1,le,se;if(de=!!ee.assumeSymmetric||$.isSymmetric(),de){for(le=0;le<te;le++)for(se=0;se<te;se++)ae[le][se]=oe.get(le,se);R(te,ne,ie,ae),L(te,ne,ie,ae)}else{var he=Q(te,te,0),ue=Array(te);for(se=0;se<te;se++)for(le=0;le<te;le++)he[le][se]=oe.get(le,se);E(te,he,ue,ae),T(te,ne,ie,ae,he)}this.n=te,this.e=ne,this.d=ie,this.V=ae}function R($,ee,te,ae){var ie,ne,oe,le,se,de,he,ue;for(se=0;se<$;se++)te[se]=ae[$-1][se];for(le=$-1;0<le;le--){for(ue=0,oe=0,de=0;de<le;de++)ue+=_Mathabs(te[de]);if(0===ue)for(ee[le]=te[le-1],se=0;se<le;se++)te[se]=ae[le-1][se],ae[le][se]=0,ae[se][le]=0;else{for(de=0;de<le;de++)te[de]/=ue,oe+=te[de]*te[de];for(ie=te[le-1],ne=_Mathsqrt(oe),0<ie&&(ne=-ne),ee[le]=ue*ne,oe-=ie*ne,te[le-1]=ie-ne,se=0;se<le;se++)ee[se]=0;for(se=0;se<le;se++){for(ie=te[se],ae[se][le]=ie,ne=ee[se]+ae[se][se]*ie,de=se+1;de<=le-1;de++)ne+=ae[de][se]*te[de],ee[de]+=ae[de][se]*ie;ee[se]=ne}for(ie=0,se=0;se<le;se++)ee[se]/=oe,ie+=ee[se]*te[se];for(he=ie/(oe+oe),se=0;se<le;se++)ee[se]-=he*te[se];for(se=0;se<le;se++){for(ie=te[se],ne=ee[se],de=se;de<=le-1;de++)ae[de][se]-=ie*ee[de]+ne*te[de];te[se]=ae[le-1][se],ae[le][se]=0}}te[le]=oe}for(le=0;le<$-1;le++){if(ae[$-1][le]=ae[le][le],ae[le][le]=1,oe=te[le+1],0!==oe){for(de=0;de<=le;de++)te[de]=ae[de][le+1]/oe;for(se=0;se<=le;se++){for(ne=0,de=0;de<=le;de++)ne+=ae[de][le+1]*ae[de][se];for(de=0;de<=le;de++)ae[de][se]-=ne*te[de]}}for(de=0;de<=le;de++)ae[de][le+1]=0}for(se=0;se<$;se++)te[se]=ae[$-1][se],ae[$-1][se]=0;ae[$-1][$-1]=1,ee[0]=0}function L($,ee,te,ae){var ie,ne,oe,le,se,de,he,ue,ce,pe,ge,fe,_e,be,xe,ye,we;for(oe=1;oe<$;oe++)ee[oe-1]=ee[oe];ee[$-1]=0;var ke=0,ve=0,Me=2.220446049250313e-16;for(de=0;de<$;de++){for(ve=_Mathmax(ve,_Mathabs(te[de])+_Mathabs(ee[de])),he=de;he<$&&!(_Mathabs(ee[he])<=Me*ve);)he++;if(he>de){we=0;do{for(++we,ie=te[de],ue=(te[de+1]-ie)/(2*ee[de]),ce=Z(ue,1),0>ue&&(ce=-ce),te[de]=ee[de]/(ue+ce),te[de+1]=ee[de]*(ue+ce),pe=te[de+1],ne=ie-te[de],oe=de+2;oe<$;oe++)te[oe]-=ne;for(ke+=ne,ue=te[he],ge=1,fe=ge,_e=ge,be=ee[de+1],xe=0,ye=0,oe=he-1;oe>=de;oe--)for(_e=fe,fe=ge,ye=xe,ie=ge*ee[oe],ne=ge*ue,ce=Z(ue,ee[oe]),ee[oe+1]=xe*ce,xe=ee[oe]/ce,ge=ue/ce,ue=ge*te[oe]-xe*ie,te[oe+1]=ne+xe*(ge*ie+xe*te[oe]),se=0;se<$;se++)ne=ae[se][oe+1],ae[se][oe+1]=xe*ae[se][oe]+ge*ne,ae[se][oe]=ge*ae[se][oe]-xe*ne;ue=-xe*ye*_e*be*ee[de]/pe,ee[de]=xe*ue,te[de]=ge*ue}while(_Mathabs(ee[de])>Me*ve)}te[de]+=ke,ee[de]=0}for(oe=0;oe<$-1;oe++){for(se=oe,ue=te[oe],le=oe+1;le<$;le++)te[le]<ue&&(se=le,ue=te[le]);if(se!==oe)for(te[se]=te[oe],te[oe]=ue,le=0;le<$;le++)ue=ae[le][oe],ae[le][oe]=ae[le][se],ae[le][se]=ue}}function E($,ee,te,ae){var ie=0,ne=$-1,oe,le,se,de,he,ue,ce;for(ue=ie+1;ue<=ne-1;ue++){for(ce=0,de=ue;de<=ne;de++)ce+=_Mathabs(ee[de][ue-1]);if(0!==ce){for(se=0,de=ne;de>=ue;de--)te[de]=ee[de][ue-1]/ce,se+=te[de]*te[de];for(le=_Mathsqrt(se),0<te[ue]&&(le=-le),se-=te[ue]*le,te[ue]-=le,he=ue;he<$;he++){for(oe=0,de=ne;de>=ue;de--)oe+=te[de]*ee[de][he];for(oe/=se,de=ue;de<=ne;de++)ee[de][he]-=oe*te[de]}for(de=0;de<=ne;de++){for(oe=0,he=ne;he>=ue;he--)oe+=te[he]*ee[de][he];for(oe/=se,he=ue;he<=ne;he++)ee[de][he]-=oe*te[he]}te[ue]=ce*te[ue],ee[ue][ue-1]=ce*le}}for(de=0;de<$;de++)for(he=0;he<$;he++)ae[de][he]=de===he?1:0;for(ue=ne-1;ue>=ie+1;ue--)if(0!==ee[ue][ue-1]){for(de=ue+1;de<=ne;de++)te[de]=ee[de][ue-1];for(he=ue;he<=ne;he++){for(le=0,de=ue;de<=ne;de++)le+=te[de]*ae[de][he];for(le=le/te[ue]/ee[ue][ue-1],de=ue;de<=ne;de++)ae[de][he]+=le*te[de]}}}function T($,ee,te,ae,ie){var ne=$-1,oe=0,le=$-1,se=2.220446049250313e-16,de=0,he=0,ue=0,ce=0,pe=0,ge=0,fe=0,_e=0,be,xe,ye,we,ke,ve,Me,Pe,De,je,Ie,Se,Ce,Re,Ae;for(be=0;be<$;be++)for((be<oe||be>le)&&(te[be]=ie[be][be],ee[be]=0),xe=_Mathmax(be-1,0);xe<$;xe++)he+=_Mathabs(ie[be][xe]);for(;ne>=oe;){for(we=ne;we>oe&&(ge=_Mathabs(ie[we-1][we-1])+_Mathabs(ie[we][we]),0===ge&&(ge=he),!(_Mathabs(ie[we][we-1])<se*ge));)we--;if(we===ne)ie[ne][ne]+=de,te[ne]=ie[ne][ne],ee[ne]=0,ne--,_e=0;else if(we===ne-1){if(Me=ie[ne][ne-1]*ie[ne-1][ne],ue=(ie[ne-1][ne-1]-ie[ne][ne])/2,ce=ue*ue+Me,fe=_Mathsqrt(_Mathabs(ce)),ie[ne][ne]+=de,ie[ne-1][ne-1]=ie[ne-1][ne-1]+de,Pe=ie[ne][ne],0<=ce){for(fe=0<=ue?ue+fe:ue-fe,te[ne-1]=Pe+fe,te[ne]=te[ne-1],0!==fe&&(te[ne]=Pe-Me/fe),ee[ne-1]=0,ee[ne]=0,Pe=ie[ne][ne-1],ge=_Mathabs(Pe)+_Mathabs(fe),ue=Pe/ge,ce=fe/ge,pe=_Mathsqrt(ue*ue+ce*ce),ue/=pe,ce/=pe,xe=ne-1;xe<$;xe++)fe=ie[ne-1][xe],ie[ne-1][xe]=ce*fe+ue*ie[ne][xe],ie[ne][xe]=ce*ie[ne][xe]-ue*fe;for(be=0;be<=ne;be++)fe=ie[be][ne-1],ie[be][ne-1]=ce*fe+ue*ie[be][ne],ie[be][ne]=ce*ie[be][ne]-ue*fe;for(be=oe;be<=le;be++)fe=ae[be][ne-1],ae[be][ne-1]=ce*fe+ue*ae[be][ne],ae[be][ne]=ce*ae[be][ne]-ue*fe}else te[ne-1]=Pe+ue,te[ne]=Pe+ue,ee[ne-1]=fe,ee[ne]=-fe;ne-=2,_e=0}else{if(Pe=ie[ne][ne],De=0,Me=0,we<ne&&(De=ie[ne-1][ne-1],Me=ie[ne][ne-1]*ie[ne-1][ne]),10==_e){for(de+=Pe,be=oe;be<=ne;be++)ie[be][be]-=Pe;ge=_Mathabs(ie[ne][ne-1])+_Mathabs(ie[ne-1][ne-2]),Pe=De=0.75*ge,Me=-0.4375*ge*ge}if(30==_e&&(ge=(De-Pe)/2,ge=ge*ge+Me,0<ge)){for(ge=_Mathsqrt(ge),De<Pe&&(ge=-ge),ge=Pe-Me/((De-Pe)/2+ge),be=oe;be<=ne;be++)ie[be][be]-=ge;de+=ge,Pe=De=Me=0.964}for(++_e,ke=ne-2;ke>=we&&(fe=ie[ke][ke],pe=Pe-fe,ge=De-fe,ue=(pe*ge-Me)/ie[ke+1][ke]+ie[ke][ke+1],ce=ie[ke+1][ke+1]-fe-pe-ge,pe=ie[ke+2][ke+1],ge=_Mathabs(ue)+_Mathabs(ce)+_Mathabs(pe),ue/=ge,ce/=ge,pe/=ge,ke!==we)&&!(_Mathabs(ie[ke][ke-1])*(_Mathabs(ce)+_Mathabs(pe))<se*(_Mathabs(ue)*(_Mathabs(ie[ke-1][ke-1])+_Mathabs(fe)+_Mathabs(ie[ke+1][ke+1]))));)ke--;for(be=ke+2;be<=ne;be++)ie[be][be-2]=0,be>ke+2&&(ie[be][be-3]=0);for(ye=ke;ye<=ne-1&&(Re=ye!==ne-1,ye!==ke&&(ue=ie[ye][ye-1],ce=ie[ye+1][ye-1],pe=Re?ie[ye+2][ye-1]:0,Pe=_Mathabs(ue)+_Mathabs(ce)+_Mathabs(pe),0!==Pe&&(ue/=Pe,ce/=Pe,pe/=Pe)),0!==Pe);ye++)if(ge=_Mathsqrt(ue*ue+ce*ce+pe*pe),0>ue&&(ge=-ge),0!==ge){for(ye===ke?we!==ke&&(ie[ye][ye-1]=-ie[ye][ye-1]):ie[ye][ye-1]=-ge*Pe,ue+=ge,Pe=ue/ge,De=ce/ge,fe=pe/ge,ce/=ue,pe/=ue,xe=ye;xe<$;xe++)ue=ie[ye][xe]+ce*ie[ye+1][xe],Re&&(ue+=pe*ie[ye+2][xe],ie[ye+2][xe]=ie[ye+2][xe]-ue*fe),ie[ye][xe]-=ue*Pe,ie[ye+1][xe]=ie[ye+1][xe]-ue*De;for(be=0;be<=_Mathmin(ne,ye+3);be++)ue=Pe*ie[be][ye]+De*ie[be][ye+1],Re&&(ue+=fe*ie[be][ye+2],ie[be][ye+2]=ie[be][ye+2]-ue*pe),ie[be][ye]-=ue,ie[be][ye+1]=ie[be][ye+1]-ue*ce;for(be=oe;be<=le;be++)ue=Pe*ae[be][ye]+De*ae[be][ye+1],Re&&(ue+=fe*ae[be][ye+2],ae[be][ye+2]=ae[be][ye+2]-ue*pe),ae[be][ye]-=ue,ae[be][ye+1]=ae[be][ye+1]-ue*ce}}}if(0!==he){for(ne=$-1;0<=ne;ne--)if(ue=te[ne],ce=ee[ne],0===ce)for(we=ne,ie[ne][ne]=1,be=ne-1;0<=be;be--){for(Me=ie[be][be]-ue,pe=0,xe=we;xe<=ne;xe++)pe+=ie[be][xe]*ie[xe][ne];if(0>ee[be])fe=Me,ge=pe;else if(we=be,0===ee[be]?ie[be][ne]=0===Me?-pe/(se*he):-pe/Me:(Pe=ie[be][be+1],De=ie[be+1][be],ce=(te[be]-ue)*(te[be]-ue)+ee[be]*ee[be],ve=(Pe*ge-fe*pe)/ce,ie[be][ne]=ve,ie[be+1][ne]=_Mathabs(Pe)>_Mathabs(fe)?(-pe-Me*ve)/Pe:(-ge-De*ve)/fe),ve=_Mathabs(ie[be][ne]),1<se*ve*ve)for(xe=be;xe<=ne;xe++)ie[xe][ne]/=ve}else if(0>ce)for(we=ne-1,_Mathabs(ie[ne][ne-1])>_Mathabs(ie[ne-1][ne])?(ie[ne-1][ne-1]=ce/ie[ne][ne-1],ie[ne-1][ne]=-(ie[ne][ne]-ue)/ie[ne][ne-1]):(Ae=O(0,-ie[ne-1][ne],ie[ne-1][ne-1]-ue,ce),ie[ne-1][ne-1]=Ae[0],ie[ne-1][ne]=Ae[1]),ie[ne][ne-1]=0,ie[ne][ne]=1,be=ne-2;0<=be;be--){for(je=0,Ie=0,xe=we;xe<=ne;xe++)je+=ie[be][xe]*ie[xe][ne-1],Ie+=ie[be][xe]*ie[xe][ne];if(Me=ie[be][be]-ue,0>ee[be])fe=Me,pe=je,ge=Ie;else if(we=be,0===ee[be]?(Ae=O(-je,-Ie,Me,ce),ie[be][ne-1]=Ae[0],ie[be][ne]=Ae[1]):(Pe=ie[be][be+1],De=ie[be+1][be],Se=(te[be]-ue)*(te[be]-ue)+ee[be]*ee[be]-ce*ce,Ce=2*(te[be]-ue)*ce,0===Se&&0===Ce&&(Se=se*he*(_Mathabs(Me)+_Mathabs(ce)+_Mathabs(Pe)+_Mathabs(De)+_Mathabs(fe))),Ae=O(Pe*pe-fe*je+ce*Ie,Pe*ge-fe*Ie-ce*je,Se,Ce),ie[be][ne-1]=Ae[0],ie[be][ne]=Ae[1],_Mathabs(Pe)>_Mathabs(fe)+_Mathabs(ce)?(ie[be+1][ne-1]=(-je-Me*ie[be][ne-1]+ce*ie[be][ne])/Pe,ie[be+1][ne]=(-Ie-Me*ie[be][ne]-ce*ie[be][ne-1])/Pe):(Ae=O(-pe-De*ie[be][ne-1],-ge-De*ie[be][ne],fe,ce),ie[be+1][ne-1]=Ae[0],ie[be+1][ne]=Ae[1])),ve=_Mathmax(_Mathabs(ie[be][ne-1]),_Mathabs(ie[be][ne])),1<se*ve*ve)for(xe=be;xe<=ne;xe++)ie[xe][ne-1]=ie[xe][ne-1]/ve,ie[xe][ne]/=ve}for(be=0;be<$;be++)if(be<oe||be>le)for(xe=be;xe<$;xe++)ae[be][xe]=ie[be][xe];for(xe=$-1;xe>=oe;xe--)for(be=oe;be<=le;be++){for(fe=0,ye=oe;ye<=_Mathmin(xe,le);ye++)fe+=ae[be][ye]*ie[ye][xe];ae[be][xe]=fe}}}function O($,ee,te,ae){var ie,ne;return _Mathabs(te)>_Mathabs(ae)?(ie=ae/te,ne=te+ie*ae,[($+ie*ee)/ne,(ee-ie*$)/ne]):(ie=te/ae,ne=ae+ie*te,[(ie*$+ee)/ne,(ie*ee-$)/ne])}const G=I(3).Matrix,W=I(24),Z=W.hypotenuse,Q=W.getFilled2DArray,J={assumeSymmetric:!1};S.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return G.isMatrix(this.V)||(this.V=new G(this.V)),this.V},get diagonalMatrix(){var $=this.n,ee=this.e,te=this.d,ae=new G($,$),ie,ne;for(ie=0;ie<$;ie++){for(ne=0;ne<$;ne++)ae[ie][ne]=0;ae[ie][ie]=te[ie],0<ee[ie]?ae[ie][ie+1]=ee[ie]:0>ee[ie]&&(ae[ie][ie-1]=ee[ie])}return ae}},_.exports=S},function(_,P,I){'use strict';function S(E){if(!(this instanceof S))return new S(E);E=R.checkMatrix(E);var T=E.clone(),O=E.rows,G=E.columns,W=Array(G),Z,Q,J,$;for(J=0;J<G;J++){var ee=0;for(Z=J;Z<O;Z++)ee=L(ee,T[Z][J]);if(0!==ee){for(0>T[J][J]&&(ee=-ee),Z=J;Z<O;Z++)T[Z][J]/=ee;for(T[J][J]+=1,Q=J+1;Q<G;Q++){for($=0,Z=J;Z<O;Z++)$+=T[Z][J]*T[Z][Q];for($=-$/T[J][J],Z=J;Z<O;Z++)T[Z][Q]+=$*T[Z][J]}}W[J]=-ee}this.QR=T,this.Rdiag=W}var R=I(3).Matrix,L=I(24).hypotenuse;S.prototype={solve:function(E){E=R.checkMatrix(E);var T=this.QR,O=T.rows;if(E.rows!==O)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var G=E.columns,W=E.clone(),Z=T.columns,Q,J,$,ee;for($=0;$<Z;$++)for(J=0;J<G;J++){for(ee=0,Q=$;Q<O;Q++)ee+=T[Q][$]*W[Q][J];for(ee=-ee/T[$][$],Q=$;Q<O;Q++)W[Q][J]+=ee*T[Q][$]}for($=Z-1;0<=$;$--){for(J=0;J<G;J++)W[$][J]/=this.Rdiag[$];for(Q=0;Q<$;Q++)for(J=0;J<G;J++)W[Q][J]-=W[$][J]*T[Q][$]}return W.subMatrix(0,Z-1,0,G-1)},isFullRank:function(){for(var E=this.QR.columns,T=0;T<E;T++)if(0===this.Rdiag[T])return!1;return!0},get upperTriangularMatrix(){var E=this.QR,T=E.columns,O=new R(T,T),G,W;for(G=0;G<T;G++)for(W=0;W<T;W++)O[G][W]=G<W?E[G][W]:G===W?this.Rdiag[G]:0;return O},get orthogonalMatrix(){var E=this.QR,T=E.rows,O=E.columns,G=new R(T,O),W,Z,Q,J;for(Q=O-1;0<=Q;Q--){for(W=0;W<T;W++)G[W][Q]=0;for(G[Q][Q]=1,Z=Q;Z<O;Z++)if(0!==E[Q][Q]){for(J=0,W=Q;W<T;W++)J+=E[W][Q]*G[W][Z];for(J=-J/E[Q][Q],W=Q;W<T;W++)G[W][Z]+=J*E[W][Q]}}return G}},_.exports=S},function(_,P,I){'use strict';function S(Z){return Z=L.checkMatrix(Z),R(Z,L.eye(Z.rows))}function R(Z,Q){return Z=L.checkMatrix(Z),Q=L.checkMatrix(Q),Z.isSquare()?new O(Z).solve(Q):new G(Z).solve(Q)}var L=I(3).Matrix,E=I(44),T=I(216),O=I(43),G=I(217),W=I(215);L.inverse=L.inv=S,L.prototype.inverse=L.prototype.inv=function(){return S(this)},L.solve=R,L.prototype.solve=function(Z){return R(this,Z)},_.exports={SingularValueDecomposition:E,SVD:E,EigenvalueDecomposition:T,EVD:T,LuDecomposition:O,LU:O,QrDecomposition:G,QR:G,CholeskyDecomposition:W,CHO:W,inverse:S,solve:R}},function(){'use strict';Symbol.species||(Symbol.species=Symbol.for('@@species'))},function(_,P,I){'use strict';var S=I(8);_.exports=class extends S{constructor(L,E){super(L,L.rows,1),this.column=E}set(L,E,T){return this.matrix.set(L,this.column,T),this}get(L){return this.matrix.get(L,this.column)}}},function(_,P,I){'use strict';var S=I(8);_.exports=class extends S{constructor(L){super(L,L.rows,L.columns)}set(L,E,T){return this.matrix.set(L,this.columns-E-1,T),this}get(L,E){return this.matrix.get(L,this.columns-E-1)}}},function(_,P,I){'use strict';var S=I(8);_.exports=class extends S{constructor(L){super(L,L.rows,L.columns)}set(L,E,T){return this.matrix.set(this.rows-L-1,E,T),this}get(L,E){return this.matrix.get(this.rows-L-1,E)}}},function(_,P,I){'use strict';var S=I(8);_.exports=class extends S{constructor(L,E){super(L,1,L.columns),this.row=E}set(L,E,T){return this.matrix.set(this.row,E,T),this}get(L,E){return this.matrix.get(this.row,E)}}},function(_,P,I){'use strict';var S=I(8),R=I(16);_.exports=class extends S{constructor(E,T,O){var G=R.checkIndices(E,T,O);super(E,G.row.length,G.column.length),this.rowIndices=G.row,this.columnIndices=G.column}set(E,T,O){return this.matrix.set(this.rowIndices[E],this.columnIndices[T],O),this}get(E,T){return this.matrix.get(this.rowIndices[E],this.columnIndices[T])}}},function(_,P,I){'use strict';var S=I(8),R=I(16);_.exports=class extends S{constructor(E,T,O,G,W){R.checkRange(E,T,O,G,W),super(E,O-T+1,W-G+1),this.startRow=T,this.startColumn=G}set(E,T,O){return this.matrix.set(this.startRow+E,this.startColumn+T,O),this}get(E,T){return this.matrix.get(this.startRow+E,this.startColumn+T)}}},function(_,P,I){'use strict';var S=I(8);_.exports=class extends S{constructor(L){super(L,L.columns,L.rows)}set(L,E,T){return this.matrix.set(E,L,T),this}get(L,E){return this.matrix.get(E,L)}}},function(_,P,I){'use strict';P.SimpleLinearRegression=P.SLR=I(25),P.NonLinearRegression=P.NLR={PolynomialRegression:I(45),PotentialRegression:I(231),ExpRegression:I(228),PowerRegression:I(232)},P.KernelRidgeRegression=P.KRR=I(229),P.PolinomialFitting2D=I(230),P.TheilSenRegression=I(233)},function(_,P,I){'use strict';const S=I(11).maybeToPrecision,R=I(25),L=I(5);class E extends L{constructor(T,O,G){super();if(!0===T)this.A=O.A,this.C=O.C,O.quality&&(this.quality=O.quality);else{var Z=T.length;if(Z!==O.length)throw new RangeError('input and output array have a different length');for(var Q=Array(Z),J=0;J<Z;J++)Q[J]=_Mathlog(O[J]);var $=new R(T,Q,{computeCoefficient:!1});this.A=$.slope,this.C=_Mathexp($.intercept),(G||{}).computeQuality&&(this.quality=this.modelQuality(T,O))}}_predict(T){return this.C*_Mathexp(T*this.A)}toJSON(){var T={name:'expRegression',A:this.A,C:this.C};return this.quality&&(T.quality=this.quality),T}toString(T){return'f(x) = '+S(this.C,T)+' * exp('+S(this.A,T)+' * x)'}toLaTeX(T){return 0<=this.A?'f(x) = '+S(this.C,T)+'e^{'+S(this.A,T)+'x}':'f(x) = \\frac{'+S(this.C,T)+'}{e^{'+S(-this.A,T)+'x}}'}static load(T){if('expRegression'!==T.name)throw new TypeError('not a exp regression model');return new E(!0,T)}}_.exports=E},function(_,P,I){'use strict';const S=I(7),R=I(206),L=I(5),E={lambda:0.1,kernelType:'gaussian',kernelOptions:{},computeCoefficient:!1};class T extends L{constructor(O,G,W){if(super(),!0===O)this.alpha=G.alpha,this.inputs=G.inputs,this.kernelType=G.kernelType,this.kernelOptions=G.kernelOptions,this.kernel=new R(G.kernelType,G.kernelOptions),G.quality&&(this.quality=G.quality);else{W=Object.assign({},E,W);const Z=new R(W.kernelType,W.kernelOptions),Q=Z.compute(O),J=O.length;Q.add(S.eye(J,J).mul(W.lambda)),this.alpha=Q.solve(G),this.inputs=O,this.kernelType=W.kernelType,this.kernelOptions=W.kernelOptions,this.kernel=Z,W.computeQuality&&(this.quality=this.modelQuality(O,G))}}_predict(O){return this.kernel.compute([O],this.inputs).mmul(this.alpha)[0]}toJSON(){var O={name:'kernelRidgeRegression',alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions};return this.quality&&(O.quality=this.quality),O}static load(O){if('kernelRidgeRegression'!==O.name)throw new TypeError('not a KRR model');return new T(!0,O)}}_.exports=T},function(_,P,I){'use strict';function S(W,Z){for(var Q=W.clone(),J=0;J<W.rows;++J)Q[J][0]=_Mathpow(Q[J][0],Z);return Q}function R(W,Z){this[W][Z]=_Mathabs(this[W][Z])}const L=I(7),E=L.DC.SingularValueDecomposition,T=I(5),O={order:2};class G extends T{constructor(W,Z,Q){super(),!0===W?(this.coefficients=L.columnVector(Z.coefficients),this.order=Z.order,Z.r&&(this.r=Z.r,this.r2=Z.r2),Z.chi2&&(this.chi2=Z.chi2)):(Q=Object.assign({},O,Q),this.order=Q.order,this.coefficients=[],this.X=W,this.y=Z,this.train(this.X,this.y,Q),Q.computeQuality&&(this.quality=this.modelQuality(W,Z)))}train(W,Z){if(L.isMatrix(W)||(W=new L(W)),L.isMatrix(Z)||(Z=L.columnVector(Z)),Z.rows!==W.rows&&(Z=Z.transpose()),2!==W.columns)throw new RangeError('You give X with '+W.columns+' columns and it must be 2');if(W.rows!==Z.rows)throw new RangeError('X and y must have the same rows');var Q=W.rows,J=(this.order+2)*(this.order+1)/2;this.coefficients=Array(J);var $=W.getColumnVector(0),ee=W.getColumnVector(1),te=1/$.clone().apply(R).max(),ae=1/ee.clone().apply(R).max(),ie=1/Z.clone().apply(R).max();$.mulColumn(0,te),ee.mulColumn(0,ae),Z.mulColumn(0,ie);for(var ne=new L(Q,J),oe=0,le=0,se;le<=this.order;++le){se=this.order-le;for(var de=0,he;de<=se;++de)he=S($,le).mulColumnVector(S(ee,de)),ne.setColumn(oe,he),oe++}var ue=new E(ne.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),ce=L.rowVector(ue.diagonal);ce=ce.apply(function(_e,be){this[_e][be]=1e-15<=this[_e][be]?1/this[_e][be]:0});var pe=L.zeros(Q,J);for(le=0;le<J;++le)pe[le][le]=ce[0][le];ce=pe;var ge=ue.rightSingularVectors,fe=ue.leftSingularVectors;for(this.coefficients=fe.mmul(ce.transpose()).mmul(ge.transpose()).mmul(Z),oe=0,le=0;le<=J;++le)for(se=this.order-le,de=0;de<=se;++de)this.coefficients[oe][0]=this.coefficients[oe][0]*_Mathpow(te,le)*_Mathpow(ae,de)/ie,oe++}_predict(W){for(var Z=W[0],Q=W[1],J=0,$=0,ee=0;ee<=this.order;ee++)for(var te=0;te<=this.order-ee;te++)J+=_Mathpow(Z,ee)*_Mathpow(Q,te)*this.coefficients[$][0],$++;return J}toJSON(){var W={name:'polyfit2D',order:this.order,coefficients:this.coefficients};return this.quality&&(W.quality=this.quality),W}static load(W){if('polyfit2D'!==W.name)throw new TypeError('not a polyfit2D model');return new G(!0,W)}}_.exports=G},function(_,P,I){'use strict';const S=I(11).maybeToPrecision,R=I(45),L=I(5);class E extends L{constructor(T,O,G,W){super();if(!0===T)this.A=O.A,this.M=O.M,O.quality&&(this.quality=O.quality);else{var Q=T.length;if(Q!==O.length)throw new RangeError('input and output array have a different length');var J=new R(T,O,[G],{computeCoefficient:!0});this.A=J.coefficients[0],this.M=G,(W||{}).computeQuality&&(this.quality=this.modelQuality(T,O))}}_predict(T){return this.A*_Mathpow(T,this.M)}toJSON(){var T={name:'potentialRegression',A:this.A,M:this.M};return this.quality&&(T.quality=this.quality),T}toString(T){return'f(x) = '+S(this.A,T)+' * x^'+this.M}toLaTeX(T){return 0<=this.M?'f(x) = '+S(this.A,T)+'x^{'+this.M+'}':'f(x) = \\frac{'+S(this.A,T)+'}{x^{'+-this.M+'}}'}static load(T){if('potentialRegression'!==T.name)throw new TypeError('not a potential regression model');return new E(!0,T)}}_.exports=E},function(_,P,I){'use strict';const S=I(11).maybeToPrecision,R=I(25),L=I(5);class E extends L{constructor(T,O,G){super();if(!0===T)this.A=O.A,this.B=O.B,this.quality=O.quality||{},O.quality.r&&(this.quality.r=O.quality.r,this.quality.r2=O.quality.r2),O.quality.chi2&&(this.quality.chi2=O.quality.chi2);else{var Z=T.length;if(Z!==O.length)throw new RangeError('input and output array have a different length');for(var Q=Array(Z),J=Array(Z),$=0;$<Z;$++)Q[$]=_Mathlog(T[$]),J[$]=_Mathlog(O[$]);var ee=new R(Q,J,{computeCoefficient:!1});this.A=_Mathexp(ee.intercept),this.B=ee.slope,(G||{}).computeQuality&&(this.quality=this.modelQuality(T,O))}}_predict(T){return this.A*_Mathpow(T,this.B)}toJSON(){var T={name:'powerRegression',A:this.A,B:this.B};return this.quality&&(T.quality=this.quality),T}toString(T){return'f(x) = '+S(this.A,T)+' * x^'+S(this.B,T)}toLaTeX(T){return 0<=this.B?'f(x) = '+S(this.A,T)+'x^{'+S(this.B,T)+'}':'f(x) = \\frac{'+S(this.A,T)+'}{x^{'+S(-this.B,T)+'}}'}static load(T){if('powerRegression'!==T.name)throw new TypeError('not a power regression model');return new E(!0,T)}}_.exports=E},function(_,P,I){'use strict';const S=I(5),R=I(11).maybeToPrecision,L=I(26).median;class E extends S{constructor(T,O,G){if(G=G||{},super(),!0===T)this.slope=O.slope,this.intercept=O.intercept,this.quality=Object.assign({},O.quality,this.quality);else{let W=T.length;if(W!==O.length)throw new RangeError('Input and output array have a different length');let Z=Array(W*W),Q=0;for(let ee=0;ee<W;++ee)for(let te=ee+1;te<W;++te)T[ee]!==T[te]&&(Z[Q++]=(O[te]-O[ee])/(T[te]-T[ee]));Z.length=Q;let J=L(Z),$=Array(W);for(let ee=0;ee<W;++ee)$[ee]=O[ee]-J*T[ee];this.slope=J,this.intercept=L($),this.coefficients=[this.intercept,this.slope],G.computeQuality&&(this.quality=this.modelQuality(T,O))}}toJSON(){var T={name:'TheilSenRegression',slope:this.slope,intercept:this.intercept};return this.quality&&(T.quality=this.quality),T}_predict(T){return this.slope*T+this.intercept}computeX(T){return(T-this.intercept)/this.slope}toString(T){var O='f(x) = ';if(this.slope){var G=R(this.slope,T);if(O+=(1e-5>_Mathabs(G-1)?'':G+' * ')+'x',this.intercept){var W=_Mathabs(this.intercept),Z=W===this.intercept?'+':'-';O+=' '+Z+' '+R(W,T)}}else O+=R(this.intercept,T);return O}toLaTeX(T){return this.toString(T)}static load(T){if('TheilSenRegression'!==T.name)throw new TypeError('not a Theil-Sen model');return new E(!0,T)}}_.exports=E},function(_,P,I){'use strict';function S(L,E){return L-E}var R=I(26);P.max=function(E){for(var L=-Infinity,T=0;T<E.length;T++)for(var O=0;O<E[T].length;O++)E[T][O]>L&&(L=E[T][O]);return L},P.min=function(E){for(var L=Infinity,T=0;T<E.length;T++)for(var O=0;O<E[T].length;O++)E[T][O]<L&&(L=E[T][O]);return L},P.minMax=function(E){for(var T=Infinity,O=-Infinity,G=0;G<E.length;G++)for(var W=0;W<E[G].length;W++)E[G][W]<T&&(T=E[G][W]),E[G][W]>O&&(O=E[G][W]);return{min:T,max:O}},P.entropy=function(E,T){'undefined'==typeof T&&(T=0);for(var O=0,G=E.length,W=E[0].length,Z=0;Z<G;Z++)for(var Q=0;Q<W;Q++)O+=E[Z][Q]*_Mathlog(E[Z][Q]+T);return-O},P.mean=function(E,T){'undefined'==typeof T&&(T=0);var O=E.length,G=E[0].length,W,Z,Q,J;if(-1===T){for(W=[0],Z=O*G,Q=0;Q<O;Q++)for(J=0;J<G;J++)W[0]+=E[Q][J];W[0]/=Z}else if(0===T)for(W=Array(G),Z=O,J=0;J<G;J++){for(W[J]=0,Q=0;Q<O;Q++)W[J]+=E[Q][J];W[J]/=Z}else if(1===T)for(W=Array(O),Z=G,J=0;J<O;J++){for(W[J]=0,Q=0;Q<G;Q++)W[J]+=E[J][Q];W[J]/=Z}else throw new Error('Invalid dimension');return W},P.sum=function(E,T){'undefined'==typeof T&&(T=0);var O=E.length,G=E[0].length,W,Z,Q;if(-1===T)for(W=[0],Z=0;Z<O;Z++)for(Q=0;Q<G;Q++)W[0]+=E[Z][Q];else if(0===T)for(W=Array(G),Q=0;Q<G;Q++)for(W[Q]=0,Z=0;Z<O;Z++)W[Q]+=E[Z][Q];else if(1===T)for(W=Array(O),Q=0;Q<O;Q++)for(W[Q]=0,Z=0;Z<G;Z++)W[Q]+=E[Q][Z];else throw new Error('Invalid dimension');return W},P.product=function(E,T){'undefined'==typeof T&&(T=0);var O=E.length,G=E[0].length,W,Z,Q;if(-1===T)for(W=[1],Z=0;Z<O;Z++)for(Q=0;Q<G;Q++)W[0]*=E[Z][Q];else if(0===T)for(W=Array(G),Q=0;Q<G;Q++)for(W[Q]=1,Z=0;Z<O;Z++)W[Q]*=E[Z][Q];else if(1===T)for(W=Array(O),Q=0;Q<O;Q++)for(W[Q]=1,Z=0;Z<G;Z++)W[Q]*=E[Q][Z];else throw new Error('Invalid dimension');return W},P.standardDeviation=function(E,T,O){for(var G=P.variance(E,T,O),W=G.length,Z=0;Z<W;Z++)G[Z]=_Mathsqrt(G[Z]);return G},P.variance=function(E,T,O){'undefined'==typeof O&&(O=!0),T=T||P.mean(E);var G=E.length;if(0===G)return[];for(var W=E[0].length,Z=Array(W),Q=0;Q<W;Q++){for(var J=0,$=0,ee=0,te=0;te<G;te++)ee=E[te][Q]-T[Q],J+=ee,$+=ee*ee;Z[Q]=O?($-J*J/G)/(G-1):($-J*J/G)/G}return Z},P.median=function(E){for(var T=E.length,O=E[0].length,G=Array(O),W=0,Z;W<O;W++){Z=Array(T);for(var Q=0;Q<T;Q++)Z[Q]=E[Q][W];Z.sort(S);var J=Z.length;G[W]=0==J%2?0.5*(Z[J/2]+Z[J/2-1]):Z[_Mathfloor(J/2)]}return G},P.mode=function(E){var T=E.length,O=E[0].length,G=Array(O),W,Z;for(W=0;W<O;W++){for(var Q=Array(T),J=0;J<T;J++)Q[J]=0;var $=Array(T),ee=0;for(Z=0;Z<T;Z++){var te=$.indexOf(E[Z][W]);0<=te?Q[te]++:($[ee]=E[Z][W],Q[ee]=1,ee++)}var ae=0,ie=0;for(Z=0;Z<ee;Z++)Q[Z]>ae&&(ae=Q[Z],ie=Z);G[W]=$[ie]}return G},P.skewness=function(E,T){'undefined'==typeof T&&(T=!0);for(var O=P.mean(E),G=E.length,W=O.length,Z=Array(W),Q=0;Q<W;Q++){for(var J=0,$=0,ee=0,te;ee<G;ee++)te=E[ee][Q]-O[Q],J+=te*te,$+=te*te*te;var ae=J/G,ie=$/G,ne=ie/_Mathpow(ae,3/2);if(T){var oe=_Mathsqrt(G*(G-1));Z[Q]=oe/(G-2)*ne}else Z[Q]=ne}return Z},P.kurtosis=function(E,T){'undefined'==typeof T&&(T=!0);for(var O=P.mean(E),G=E.length,W=E[0].length,Z=Array(W),Q=0;Q<W;Q++){for(var J=0,$=0,ee=0,te;ee<G;ee++)te=E[ee][Q]-O[Q],J+=te*te,$+=te*te*te*te;var ae=J/G,ie=$/G;if(T){var ne=J/(G-1),le=$/(ne*ne);Z[Q]=G*(G+1)/((G-1)*(G-2)*(G-3))*le-3*((G-1)*(G-1)/((G-2)*(G-3)))}else Z[Q]=ie/(ae*ae)-3}return Z},P.standardError=function(E){for(var T=E.length,O=P.standardDeviation(E),G=O.length,W=Array(G),Z=_Mathsqrt(T),Q=0;Q<G;Q++)W[Q]=O[Q]/Z;return W},P.covariance=function(E,T){return P.scatter(E,void 0,T)},P.scatter=function(E,T,O){'undefined'==typeof O&&(O=0),'undefined'==typeof T&&(0===O?T=E.length-1:1===O&&(T=E[0].length-1));var G=P.mean(E,O),W=E.length;if(0===W)return[[]];var Z=E[0].length,Q,J,$,ee,te;if(0===O){for(Q=Array(Z),J=0;J<Z;J++)Q[J]=Array(Z);for(J=0;J<Z;J++)for($=J;$<Z;$++){for(ee=0,te=0;te<W;te++)ee+=(E[te][$]-G[$])*(E[te][J]-G[J]);ee/=T,Q[J][$]=ee,Q[$][J]=ee}}else if(1===O){for(Q=Array(W),J=0;J<W;J++)Q[J]=Array(W);for(J=0;J<W;J++)for($=J;$<W;$++){for(ee=0,te=0;te<Z;te++)ee+=(E[$][te]-G[$])*(E[J][te]-G[J]);ee/=T,Q[J][$]=ee,Q[$][J]=ee}}else throw new Error('Invalid dimension');return Q},P.correlation=function(E){var T=P.mean(E),O=P.standardDeviation(E,!0,T),G=P.zScores(E,T,O),W=E.length,Z=E[0].length,Q,J,$=Array(Z);for(Q=0;Q<Z;Q++)$[Q]=Array(Z);for(Q=0;Q<Z;Q++)for(J=Q;J<Z;J++){for(var ee=0,te=0,ae=G.length;te<ae;te++)ee+=G[te][J]*G[te][Q];ee/=W-1,$[Q][J]=ee,$[J][Q]=ee}return $},P.zScores=function(E,T,O){return T=T||P.mean(E),'undefined'==typeof O&&(O=P.standardDeviation(E,!0,T)),P.standardize(P.center(E,T,!1),O,!0)},P.center=function(E,T,O){T=T||P.mean(E);var G=E,W=E.length,Z,Q,J;if(!O)for(G=Array(W),Z=0;Z<W;Z++)G[Z]=Array(E[Z].length);for(Z=0;Z<W;Z++){var $=G[Z];for(Q=0,J=$.length;Q<J;Q++)$[Q]=E[Z][Q]-T[Q]}return G},P.standardize=function(E,T,O){'undefined'==typeof T&&(T=P.standardDeviation(E));var G=E,W=E.length,Z,Q,J;if(!O)for(G=Array(W),Z=0;Z<W;Z++)G[Z]=Array(E[Z].length);for(Z=0;Z<W;Z++){var $=G[Z],ee=E[Z];for(Q=0,J=$.length;Q<J;Q++)0===T[Q]||isNaN(T[Q])||($[Q]=ee[Q]/T[Q])}return G},P.weightedVariance=function(E,T){var O=P.mean(E),G=E.length;if(0===G)return[];for(var W=E[0].length,Z=Array(W),Q=0;Q<W;Q++){for(var J=0,$=0,ee=0,te=0;te<G;te++){var ae=E[te][Q]-O[Q],ie=T[te];J+=ie*(ae*ae),ee+=ie,$+=ie*ie}Z[Q]=J*(ee/(ee*ee-$))}return Z},P.weightedMean=function(E,T,O){'undefined'==typeof O&&(O=0);var G=E.length;if(0===G)return[];var W=E[0].length,Z,Q,J,$,ee,te;if(0===O){for(Z=Array(W),Q=0;Q<W;Q++)Z[Q]=0;for(Q=0;Q<G;Q++)for(te=E[Q],ee=T[Q],$=0;$<W;$++)Z[$]+=te[$]*ee}else if(1===O){for(Z=Array(G),Q=0;Q<G;Q++)Z[Q]=0;for($=0;$<G;$++)for(te=E[$],ee=T[$],Q=0;Q<W;Q++)Z[$]+=te[Q]*ee}else throw new Error('Invalid dimension');var ae=R.sum(T);if(0!==ae)for(Q=0,J=Z.length;Q<J;Q++)Z[Q]/=ae;return Z},P.weightedCovariance=function(E,T,O,G){G=G||0,O=O||P.weightedMean(E,T,G);for(var W=0,Z=0,Q=0,J=T.length;Q<J;Q++)W+=T[Q],Z+=T[Q]*T[Q];var $=W/(W*W-Z);return P.weightedScatter(E,T,O,$,G)},P.weightedScatter=function(E,T,O,G,W){W=W||0,O=O||P.weightedMean(E,T,W),'undefined'==typeof G&&(G=1);var Z=E.length;if(0===Z)return[[]];var Q=E[0].length,J,$,ee,te,ae;if(0===W){for(J=Array(Q),$=0;$<Q;$++)J[$]=Array(Q);for($=0;$<Q;$++)for(ee=$;ee<Q;ee++){for(ae=0,te=0;te<Z;te++)ae+=T[te]*(E[te][ee]-O[ee])*(E[te][$]-O[$]);J[$][ee]=ae*G,J[ee][$]=ae*G}}else if(1===W){for(J=Array(Z),$=0;$<Z;$++)J[$]=Array(Z);for($=0;$<Z;$++)for(ee=$;ee<Z;ee++){for(ae=0,te=0;te<Q;te++)ae+=T[te]*(E[ee][te]-O[ee])*(E[$][te]-O[$]);J[$][ee]=ae*G,J[ee][$]=ae*G}}else throw new Error('Invalid dimension');return J}},function(_,P,I){_.exports='function'==typeof Promise?Promise:I(195)},function(_,P,I){'use strict';var S=I(6).assign,R=I(237),L=I(238),E=I(51),T={};S(T,R,L,E),_.exports=T},function(_,P,I){'use strict';function S(le){if(!(this instanceof S))return new S(le);this.options=O.assign({level:ie,method:oe,chunkSize:16384,windowBits:15,memLevel:8,strategy:ne,to:''},le||{});var se=this.options;se.raw&&0<se.windowBits?se.windowBits=-se.windowBits:se.gzip&&0<se.windowBits&&16>se.windowBits&&(se.windowBits+=16),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new Z,this.strm.avail_out=0;var de=T.deflateInit2(this.strm,se.level,se.method,se.windowBits,se.memLevel,se.strategy);if(de!==ee)throw new Error(W[de]);if(se.header&&T.deflateSetHeader(this.strm,se.header),se.dictionary){var he;if(he='string'==typeof se.dictionary?G.string2buf(se.dictionary):'[object ArrayBuffer]'===Q.call(se.dictionary)?new Uint8Array(se.dictionary):se.dictionary,de=T.deflateSetDictionary(this.strm,he),de!==ee)throw new Error(W[de]);this._dict_set=!0}}function R(le,se){var de=new S(se);if(de.push(le,!0),de.err)throw de.msg||W[de.err];return de.result}var T=I(239),O=I(6),G=I(49),W=I(27),Z=I(53),Q=Object.prototype.toString,$=4,ee=0,te=1,ae=2,ie=-1,ne=0,oe=8;S.prototype.push=function(le,se){var de=this.strm,he=this.options.chunkSize,ue,ce;if(this.ended)return!1;ce=se===~~se?se:!0===se?$:0,de.input='string'==typeof le?G.string2buf(le):'[object ArrayBuffer]'===Q.call(le)?new Uint8Array(le):le,de.next_in=0,de.avail_in=de.input.length;do{if(0===de.avail_out&&(de.output=new O.Buf8(he),de.next_out=0,de.avail_out=he),ue=T.deflate(de,ce),ue!==te&&ue!==ee)return this.onEnd(ue),this.ended=!0,!1;(0===de.avail_out||0===de.avail_in&&(ce===$||ce===ae))&&('string'===this.options.to?this.onData(G.buf2binstring(O.shrinkBuf(de.output,de.next_out))):this.onData(O.shrinkBuf(de.output,de.next_out)))}while((0<de.avail_in||0===de.avail_out)&&ue!==te);return ce===$?(ue=T.deflateEnd(this.strm),this.onEnd(ue),this.ended=!0,ue===ee):ce!==ae||(this.onEnd(ee),de.avail_out=0,!0)},S.prototype.onData=function(le){this.chunks.push(le)},S.prototype.onEnd=function(le){le===ee&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=O.flattenChunks(this.chunks)),this.chunks=[],this.err=le,this.msg=this.strm.msg},P.Deflate=S,P.deflate=R,P.deflateRaw=function(le,se){return se=se||{},se.raw=!0,R(le,se)},P.gzip=function(le,se){return se=se||{},se.gzip=!0,R(le,se)}},function(_,P,I){'use strict';function S($){if(!(this instanceof S))return new S($);this.options=T.assign({chunkSize:16384,windowBits:0,to:''},$||{});var ee=this.options;ee.raw&&0<=ee.windowBits&&16>ee.windowBits&&(ee.windowBits=-ee.windowBits,0===ee.windowBits&&(ee.windowBits=-15)),0<=ee.windowBits&&16>ee.windowBits&&!($&&$.windowBits)&&(ee.windowBits+=32),15<ee.windowBits&&48>ee.windowBits&&0==(15&ee.windowBits)&&(ee.windowBits|=15),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new Z,this.strm.avail_out=0;var te=E.inflateInit2(this.strm,ee.windowBits);if(te!==G.Z_OK)throw new Error(W[te]);this.header=new Q,E.inflateGetHeader(this.strm,this.header)}function R($,ee){var te=new S(ee);if(te.push($,!0),te.err)throw te.msg||W[te.err];return te.result}var E=I(242),T=I(6),O=I(49),G=I(51),W=I(27),Z=I(53),Q=I(240),J=Object.prototype.toString;S.prototype.push=function($,ee){var te=this.strm,ae=this.options.chunkSize,ie=this.options.dictionary,ue=!1,ne,oe,le,se,de,he;if(this.ended)return!1;oe=ee===~~ee?ee:!0===ee?G.Z_FINISH:G.Z_NO_FLUSH,te.input='string'==typeof $?O.binstring2buf($):'[object ArrayBuffer]'===J.call($)?new Uint8Array($):$,te.next_in=0,te.avail_in=te.input.length;do{if(0===te.avail_out&&(te.output=new T.Buf8(ae),te.next_out=0,te.avail_out=ae),ne=E.inflate(te,G.Z_NO_FLUSH),ne===G.Z_NEED_DICT&&ie&&(he='string'==typeof ie?O.string2buf(ie):'[object ArrayBuffer]'===J.call(ie)?new Uint8Array(ie):ie,ne=E.inflateSetDictionary(this.strm,he)),ne===G.Z_BUF_ERROR&&!0==ue&&(ne=G.Z_OK,ue=!1),ne!==G.Z_STREAM_END&&ne!==G.Z_OK)return this.onEnd(ne),this.ended=!0,!1;te.next_out&&(0===te.avail_out||ne===G.Z_STREAM_END||0===te.avail_in&&(oe===G.Z_FINISH||oe===G.Z_SYNC_FLUSH))&&('string'===this.options.to?(le=O.utf8border(te.output,te.next_out),se=te.next_out-le,de=O.buf2string(te.output,le),te.next_out=se,te.avail_out=ae-se,se&&T.arraySet(te.output,te.output,le,se,0),this.onData(de)):this.onData(T.shrinkBuf(te.output,te.next_out))),0===te.avail_in&&0===te.avail_out&&(ue=!0)}while((0<te.avail_in||0===te.avail_out)&&ne!==G.Z_STREAM_END);return ne===G.Z_STREAM_END&&(oe=G.Z_FINISH),oe===G.Z_FINISH?(ne=E.inflateEnd(this.strm),this.onEnd(ne),this.ended=!0,ne===G.Z_OK):oe!==G.Z_SYNC_FLUSH||(this.onEnd(G.Z_OK),te.avail_out=0,!0)},S.prototype.onData=function($){this.chunks.push($)},S.prototype.onEnd=function($){$===G.Z_OK&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=T.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg},P.Inflate=S,P.inflate=R,P.inflateRaw=function($,ee){return ee=ee||{},ee.raw=!0,R($,ee)},P.ungzip=R},function(_,P,I){'use strict';function S(mt,gt){return mt.msg=ye[gt],gt}function R(mt){return(mt<<1)-(4<mt?9:0)}function L(mt){for(var gt=mt.length;0<=--gt;)mt[gt]=0}function E(mt){var gt=mt.state,_t=gt.pending;_t>mt.avail_out&&(_t=mt.avail_out);0===_t||(fe.arraySet(mt.output,gt.pending_buf,gt.pending_out,_t,mt.next_out),mt.next_out+=_t,gt.pending_out+=_t,mt.total_out+=_t,mt.avail_out-=_t,gt.pending-=_t,0===gt.pending&&(gt.pending_out=0))}function T(mt,gt){_e._tr_flush_block(mt,0<=mt.block_start?mt.block_start:-1,mt.strstart-mt.block_start,gt),mt.block_start=mt.strstart,E(mt.strm)}function O(mt,gt){mt.pending_buf[mt.pending++]=gt}function G(mt,gt){mt.pending_buf[mt.pending++]=255&gt>>>8,mt.pending_buf[mt.pending++]=255&gt}function W(mt,gt,_t,bt){var xt=mt.avail_in;return(xt>bt&&(xt=bt),0===xt)?0:(mt.avail_in-=xt,fe.arraySet(gt,mt.input,mt.next_in,xt,_t),1===mt.state.wrap?mt.adler=be(mt.adler,gt,xt,_t):2===mt.state.wrap&&(mt.adler=xe(mt.adler,gt,xt,_t)),mt.next_in+=xt,mt.total_in+=xt,xt)}function Z(mt,gt){var _t=mt.max_chain_length,bt=mt.strstart,xt,yt,wt=mt.prev_length,kt=mt.nice_match,vt=mt.strstart>mt.w_size-Qe?mt.strstart-(mt.w_size-Qe):0,Mt=mt.window,Pt=mt.w_mask,Dt=mt.prev,jt=mt.strstart+Ke,It=Mt[bt+wt-1],St=Mt[bt+wt];mt.prev_length>=mt.good_match&&(_t>>=2),kt>mt.lookahead&&(kt=mt.lookahead);do{if(xt=gt,Mt[xt+wt]!==St||Mt[xt+wt-1]!==It||Mt[xt]!==Mt[bt]||Mt[++xt]!==Mt[bt+1])continue;bt+=2,xt++;do;while(Mt[++bt]===Mt[++xt]&&Mt[++bt]===Mt[++xt]&&Mt[++bt]===Mt[++xt]&&Mt[++bt]===Mt[++xt]&&Mt[++bt]===Mt[++xt]&&Mt[++bt]===Mt[++xt]&&Mt[++bt]===Mt[++xt]&&Mt[++bt]===Mt[++xt]&&bt<jt);if(yt=Ke-(jt-bt),bt=jt-Ke,yt>wt){if(mt.match_start=gt,wt=yt,yt>=kt)break;It=Mt[bt+wt-1],St=Mt[bt+wt]}}while((gt=Dt[gt&Pt])>vt&&0!=--_t);return wt<=mt.lookahead?wt:mt.lookahead}function Q(mt){var gt=mt.w_size,_t,bt,xt,yt,wt;do{if(yt=mt.window_size-mt.lookahead-mt.strstart,mt.strstart>=gt+(gt-Qe)){fe.arraySet(mt.window,mt.window,gt,gt,0),mt.match_start-=gt,mt.strstart-=gt,mt.block_start-=gt,bt=mt.hash_size,_t=bt;do xt=mt.head[--_t],mt.head[_t]=xt>=gt?xt-gt:0;while(--bt);bt=gt,_t=bt;do xt=mt.prev[--_t],mt.prev[_t]=xt>=gt?xt-gt:0;while(--bt);yt+=gt}if(0===mt.strm.avail_in)break;if(bt=W(mt.strm,mt.window,mt.strstart+mt.lookahead,yt),mt.lookahead+=bt,mt.lookahead+mt.insert>=Ze)for(wt=mt.strstart-mt.insert,mt.ins_h=mt.window[wt],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[wt+1])&mt.hash_mask;mt.insert&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[wt+Ze-1])&mt.hash_mask,mt.prev[wt&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=wt,wt++,mt.insert--,!(mt.lookahead+mt.insert<Ze)););}while(mt.lookahead<Qe&&0!==mt.strm.avail_in)}function $(mt,gt){for(var _t,bt;;){if(mt.lookahead<Qe){if(Q(mt),mt.lookahead<Qe&&gt===we)return st;if(0===mt.lookahead)break}if(_t=0,mt.lookahead>=Ze&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Ze-1])&mt.hash_mask,_t=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),0!==_t&&mt.strstart-_t<=mt.w_size-Qe&&(mt.match_length=Z(mt,_t)),!(mt.match_length>=Ze))bt=_e._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++;else if(bt=_e._tr_tally(mt,mt.strstart-mt.match_start,mt.match_length-Ze),mt.lookahead-=mt.match_length,mt.match_length<=mt.max_lazy_match&&mt.lookahead>=Ze){mt.match_length--;do mt.strstart++,mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Ze-1])&mt.hash_mask,_t=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart;while(0!=--mt.match_length);mt.strstart++}else mt.strstart+=mt.match_length,mt.match_length=0,mt.ins_h=mt.window[mt.strstart],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+1])&mt.hash_mask;if(bt&&(T(mt,!1),0===mt.strm.avail_out))return st}return mt.insert=mt.strstart<Ze-1?mt.strstart:Ze-1,gt===Me?(T(mt,!0),0===mt.strm.avail_out?ht:ut):mt.last_lit&&(T(mt,!1),0===mt.strm.avail_out)?st:dt}function ee(mt,gt){for(var _t,bt,xt;;){if(mt.lookahead<Qe){if(Q(mt),mt.lookahead<Qe&&gt===we)return st;if(0===mt.lookahead)break}if(_t=0,mt.lookahead>=Ze&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Ze-1])&mt.hash_mask,_t=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),mt.prev_length=mt.match_length,mt.prev_match=mt.match_start,mt.match_length=Ze-1,0!==_t&&mt.prev_length<mt.max_lazy_match&&mt.strstart-_t<=mt.w_size-Qe&&(mt.match_length=Z(mt,_t),5>=mt.match_length&&(mt.strategy===Ae||mt.match_length===Ze&&4096<mt.strstart-mt.match_start)&&(mt.match_length=Ze-1)),mt.prev_length>=Ze&&mt.match_length<=mt.prev_length){xt=mt.strstart+mt.lookahead-Ze,bt=_e._tr_tally(mt,mt.strstart-1-mt.prev_match,mt.prev_length-Ze),mt.lookahead-=mt.prev_length-1,mt.prev_length-=2;do++mt.strstart<=xt&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Ze-1])&mt.hash_mask,_t=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart);while(0!=--mt.prev_length);if(mt.match_available=0,mt.match_length=Ze-1,mt.strstart++,bt&&(T(mt,!1),0===mt.strm.avail_out))return st}else if(!mt.match_available)mt.match_available=1,mt.strstart++,mt.lookahead--;else if(bt=_e._tr_tally(mt,0,mt.window[mt.strstart-1]),bt&&T(mt,!1),mt.strstart++,mt.lookahead--,0===mt.strm.avail_out)return st}return mt.match_available&&(bt=_e._tr_tally(mt,0,mt.window[mt.strstart-1]),mt.match_available=0),mt.insert=mt.strstart<Ze-1?mt.strstart:Ze-1,gt===Me?(T(mt,!0),0===mt.strm.avail_out?ht:ut):mt.last_lit&&(T(mt,!1),0===mt.strm.avail_out)?st:dt}function te(mt,gt){for(var wt=mt.window,_t,bt,xt,yt;;){if(mt.lookahead<=Ke){if(Q(mt),mt.lookahead<=Ke&&gt===we)return st;if(0===mt.lookahead)break}if(mt.match_length=0,mt.lookahead>=Ze&&0<mt.strstart&&(xt=mt.strstart-1,bt=wt[xt],bt===wt[++xt]&&bt===wt[++xt]&&bt===wt[++xt])){yt=mt.strstart+Ke;do;while(bt===wt[++xt]&&bt===wt[++xt]&&bt===wt[++xt]&&bt===wt[++xt]&&bt===wt[++xt]&&bt===wt[++xt]&&bt===wt[++xt]&&bt===wt[++xt]&&xt<yt);mt.match_length=Ke-(yt-xt),mt.match_length>mt.lookahead&&(mt.match_length=mt.lookahead)}if(mt.match_length>=Ze?(_t=_e._tr_tally(mt,1,mt.match_length-Ze),mt.lookahead-=mt.match_length,mt.strstart+=mt.match_length,mt.match_length=0):(_t=_e._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++),_t&&(T(mt,!1),0===mt.strm.avail_out))return st}return mt.insert=0,gt===Me?(T(mt,!0),0===mt.strm.avail_out?ht:ut):mt.last_lit&&(T(mt,!1),0===mt.strm.avail_out)?st:dt}function ae(mt,gt){for(var _t;;){if(0===mt.lookahead&&(Q(mt),0===mt.lookahead)){if(gt===we)return st;break}if(mt.match_length=0,_t=_e._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++,_t&&(T(mt,!1),0===mt.strm.avail_out))return st}return mt.insert=0,gt===Me?(T(mt,!0),0===mt.strm.avail_out?ht:ut):mt.last_lit&&(T(mt,!1),0===mt.strm.avail_out)?st:dt}function ie(mt,gt,_t,bt,xt){this.good_length=mt,this.max_lazy=gt,this.nice_length=_t,this.max_chain=bt,this.func=xt}function ne(mt){mt.window_size=2*mt.w_size,L(mt.head),mt.max_lazy_match=pt[mt.level].max_lazy,mt.good_match=pt[mt.level].good_length,mt.nice_match=pt[mt.level].nice_length,mt.max_chain_length=pt[mt.level].max_chain,mt.strstart=0,mt.block_start=0,mt.lookahead=0,mt.insert=0,mt.match_length=mt.prev_length=Ze-1,mt.match_available=0,mt.ins_h=0}function oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ve,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new fe.Buf16(2*He),this.dyn_dtree=new fe.Buf16(2*(2*Ne+1)),this.bl_tree=new fe.Buf16(2*(2*Ge+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new fe.Buf16(We+1),this.heap=new fe.Buf16(2*Xe+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new fe.Buf16(2*Xe+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(mt){var gt;return mt&&mt.state?(mt.total_in=mt.total_out=0,mt.data_type=Te,gt=mt.state,gt.pending=0,gt.pending_out=0,0>gt.wrap&&(gt.wrap=-gt.wrap),gt.status=gt.wrap?$e:lt,mt.adler=2===gt.wrap?0:1,gt.last_flush=we,_e._tr_init(gt),De):S(mt,Ie)}function se(mt){var gt=le(mt);return gt===De&&ne(mt.state),gt}function he(mt,gt,_t,bt,xt,yt){if(!mt)return Ie;var wt=1;if(gt===Re&&(gt=6),0>bt?(wt=0,bt=-bt):15<bt&&(wt=2,bt-=16),1>xt||xt>Ye||_t!==Ve||8>bt||15<bt||0>gt||9<gt||0>yt||yt>Le)return S(mt,Ie);8===bt&&(bt=9);var kt=new oe;return mt.state=kt,kt.strm=mt,kt.wrap=wt,kt.gzhead=null,kt.w_bits=bt,kt.w_size=1<<kt.w_bits,kt.w_mask=kt.w_size-1,kt.hash_bits=xt+7,kt.hash_size=1<<kt.hash_bits,kt.hash_mask=kt.hash_size-1,kt.hash_shift=~~((kt.hash_bits+Ze-1)/Ze),kt.window=new fe.Buf8(2*kt.w_size),kt.head=new fe.Buf16(kt.hash_size),kt.prev=new fe.Buf16(kt.w_size),kt.lit_bufsize=1<<xt+6,kt.pending_buf_size=4*kt.lit_bufsize,kt.pending_buf=new fe.Buf8(kt.pending_buf_size),kt.d_buf=1*kt.lit_bufsize,kt.l_buf=3*kt.lit_bufsize,kt.level=gt,kt.strategy=yt,kt.method=_t,se(mt)}var fe=I(6),_e=I(244),be=I(50),xe=I(52),ye=I(27),we=0,Me=4,Pe=5,De=0,je=1,Ie=-2,Ce=-5,Re=-1,Ae=1,Be=2,Le=4,Te=2,Ve=8,Ye=9,Xe=256+1+29,Ne=30,Ge=19,He=2*Xe+1,We=15,Ze=3,Ke=258,Qe=Ke+Ze+1,$e=42,et=69,at=73,nt=91,ot=103,lt=113,rt=666,st=1,dt=2,ht=3,ut=4,pt;pt=[new ie(0,0,0,0,function(mt,gt){var _t=65535;for(_t>mt.pending_buf_size-5&&(_t=mt.pending_buf_size-5);;){if(1>=mt.lookahead){if(Q(mt),0===mt.lookahead&&gt===we)return st;if(0===mt.lookahead)break}mt.strstart+=mt.lookahead,mt.lookahead=0;var bt=mt.block_start+_t;if((0===mt.strstart||mt.strstart>=bt)&&(mt.lookahead=mt.strstart-bt,mt.strstart=bt,T(mt,!1),0===mt.strm.avail_out))return st;if(mt.strstart-mt.block_start>=mt.w_size-Qe&&(T(mt,!1),0===mt.strm.avail_out))return st}return mt.insert=0,gt===Me?(T(mt,!0),0===mt.strm.avail_out?ht:ut):mt.strstart>mt.block_start&&(T(mt,!1),0===mt.strm.avail_out)?st:st}),new ie(4,4,8,4,$),new ie(4,5,16,8,$),new ie(4,6,32,32,$),new ie(4,4,16,16,ee),new ie(8,16,32,32,ee),new ie(8,16,128,128,ee),new ie(8,32,128,256,ee),new ie(32,128,258,1024,ee),new ie(32,258,258,4096,ee)],P.deflateInit=function(mt,gt){return he(mt,gt,Ve,15,8,0)},P.deflateInit2=he,P.deflateReset=se,P.deflateResetKeep=le,P.deflateSetHeader=function(mt,gt){return mt&&mt.state?2===mt.state.wrap?(mt.state.gzhead=gt,De):Ie:Ie},P.deflate=function(mt,gt){var _t,bt,xt,yt;if(!mt||!mt.state||gt>Pe||0>gt)return mt?S(mt,Ie):Ie;if(bt=mt.state,!mt.output||!mt.input&&0!==mt.avail_in||bt.status===rt&&gt!==Me)return S(mt,0===mt.avail_out?Ce:Ie);if(bt.strm=mt,_t=bt.last_flush,bt.last_flush=gt,bt.status===$e)if(2===bt.wrap)mt.adler=0,O(bt,31),O(bt,139),O(bt,8),bt.gzhead?(O(bt,(bt.gzhead.text?1:0)+(bt.gzhead.hcrc?2:0)+(bt.gzhead.extra?4:0)+(bt.gzhead.name?8:0)+(bt.gzhead.comment?16:0)),O(bt,255&bt.gzhead.time),O(bt,255&bt.gzhead.time>>8),O(bt,255&bt.gzhead.time>>16),O(bt,255&bt.gzhead.time>>24),O(bt,9===bt.level?2:bt.strategy>=Be||2>bt.level?4:0),O(bt,255&bt.gzhead.os),bt.gzhead.extra&&bt.gzhead.extra.length&&(O(bt,255&bt.gzhead.extra.length),O(bt,255&bt.gzhead.extra.length>>8)),bt.gzhead.hcrc&&(mt.adler=xe(mt.adler,bt.pending_buf,bt.pending,0)),bt.gzindex=0,bt.status=et):(O(bt,0),O(bt,0),O(bt,0),O(bt,0),O(bt,0),O(bt,9===bt.level?2:bt.strategy>=Be||2>bt.level?4:0),O(bt,3),bt.status=lt);else{var wt=Ve+(bt.w_bits-8<<4)<<8,kt=-1;kt=bt.strategy>=Be||2>bt.level?0:6>bt.level?1:6===bt.level?2:3,wt|=kt<<6,0!==bt.strstart&&(wt|=32),wt+=31-wt%31,bt.status=lt,G(bt,wt),0!==bt.strstart&&(G(bt,mt.adler>>>16),G(bt,65535&mt.adler)),mt.adler=1}if(bt.status===et)if(bt.gzhead.extra){for(xt=bt.pending;bt.gzindex<(65535&bt.gzhead.extra.length)&&!(bt.pending===bt.pending_buf_size&&(bt.gzhead.hcrc&&bt.pending>xt&&(mt.adler=xe(mt.adler,bt.pending_buf,bt.pending-xt,xt)),E(mt),xt=bt.pending,bt.pending===bt.pending_buf_size));)O(bt,255&bt.gzhead.extra[bt.gzindex]),bt.gzindex++;bt.gzhead.hcrc&&bt.pending>xt&&(mt.adler=xe(mt.adler,bt.pending_buf,bt.pending-xt,xt)),bt.gzindex===bt.gzhead.extra.length&&(bt.gzindex=0,bt.status=at)}else bt.status=at;if(bt.status===at)if(bt.gzhead.name){xt=bt.pending;do{if(bt.pending===bt.pending_buf_size&&(bt.gzhead.hcrc&&bt.pending>xt&&(mt.adler=xe(mt.adler,bt.pending_buf,bt.pending-xt,xt)),E(mt),xt=bt.pending,bt.pending===bt.pending_buf_size)){yt=1;break}yt=bt.gzindex<bt.gzhead.name.length?255&bt.gzhead.name.charCodeAt(bt.gzindex++):0,O(bt,yt)}while(0!==yt);bt.gzhead.hcrc&&bt.pending>xt&&(mt.adler=xe(mt.adler,bt.pending_buf,bt.pending-xt,xt)),0===yt&&(bt.gzindex=0,bt.status=nt)}else bt.status=nt;if(bt.status===nt)if(bt.gzhead.comment){xt=bt.pending;do{if(bt.pending===bt.pending_buf_size&&(bt.gzhead.hcrc&&bt.pending>xt&&(mt.adler=xe(mt.adler,bt.pending_buf,bt.pending-xt,xt)),E(mt),xt=bt.pending,bt.pending===bt.pending_buf_size)){yt=1;break}yt=bt.gzindex<bt.gzhead.comment.length?255&bt.gzhead.comment.charCodeAt(bt.gzindex++):0,O(bt,yt)}while(0!==yt);bt.gzhead.hcrc&&bt.pending>xt&&(mt.adler=xe(mt.adler,bt.pending_buf,bt.pending-xt,xt)),0===yt&&(bt.status=ot)}else bt.status=ot;if(bt.status===ot&&(bt.gzhead.hcrc?(bt.pending+2>bt.pending_buf_size&&E(mt),bt.pending+2<=bt.pending_buf_size&&(O(bt,255&mt.adler),O(bt,255&mt.adler>>8),mt.adler=0,bt.status=lt)):bt.status=lt),0!==bt.pending){if(E(mt),0===mt.avail_out)return bt.last_flush=-1,De;}else if(0===mt.avail_in&&R(gt)<=R(_t)&&gt!==Me)return S(mt,Ce);if(bt.status===rt&&0!==mt.avail_in)return S(mt,Ce);if(0!==mt.avail_in||0!==bt.lookahead||gt!==we&&bt.status!==rt){var vt=bt.strategy===Be?ae(bt,gt):bt.strategy===3?te(bt,gt):pt[bt.level].func(bt,gt);if((vt===ht||vt===ut)&&(bt.status=rt),vt===st||vt===ht)return 0===mt.avail_out&&(bt.last_flush=-1),De;if(vt===dt&&(gt===1?_e._tr_align(bt):gt!==Pe&&(_e._tr_stored_block(bt,0,0,!1),gt===3&&(L(bt.head),0===bt.lookahead&&(bt.strstart=0,bt.block_start=0,bt.insert=0))),E(mt),0===mt.avail_out))return bt.last_flush=-1,De}return gt===Me?0>=bt.wrap?je:(2===bt.wrap?(O(bt,255&mt.adler),O(bt,255&mt.adler>>8),O(bt,255&mt.adler>>16),O(bt,255&mt.adler>>24),O(bt,255&mt.total_in),O(bt,255&mt.total_in>>8),O(bt,255&mt.total_in>>16),O(bt,255&mt.total_in>>24)):(G(bt,mt.adler>>>16),G(bt,65535&mt.adler)),E(mt),0<bt.wrap&&(bt.wrap=-bt.wrap),0===bt.pending?je:De):De},P.deflateEnd=function(mt){var gt;return mt&&mt.state?(gt=mt.state.status,gt!==$e&&gt!==et&&gt!==at&&gt!==nt&&gt!==ot&&gt!==lt&&gt!==rt)?S(mt,Ie):(mt.state=null,gt===lt?S(mt,-3):De):Ie},P.deflateSetDictionary=function(mt,gt){var _t=gt.length,bt,xt,yt,wt,kt,vt,Mt,Pt;if(!mt||!mt.state)return Ie;if(bt=mt.state,wt=bt.wrap,2===wt||1===wt&&bt.status!==$e||bt.lookahead)return Ie;for(1===wt&&(mt.adler=be(mt.adler,gt,_t,0)),bt.wrap=0,_t>=bt.w_size&&(0===wt&&(L(bt.head),bt.strstart=0,bt.block_start=0,bt.insert=0),Pt=new fe.Buf8(bt.w_size),fe.arraySet(Pt,gt,_t-bt.w_size,bt.w_size,0),gt=Pt,_t=bt.w_size),kt=mt.avail_in,vt=mt.next_in,Mt=mt.input,mt.avail_in=_t,mt.next_in=0,mt.input=gt,Q(bt);bt.lookahead>=Ze;){xt=bt.strstart,yt=bt.lookahead-(Ze-1);do bt.ins_h=(bt.ins_h<<bt.hash_shift^bt.window[xt+Ze-1])&bt.hash_mask,bt.prev[xt&bt.w_mask]=bt.head[bt.ins_h],bt.head[bt.ins_h]=xt,xt++;while(--yt);bt.strstart=xt,bt.lookahead=Ze-1,Q(bt)}return bt.strstart+=bt.lookahead,bt.block_start=bt.strstart,bt.insert=bt.lookahead,bt.lookahead=0,bt.match_length=bt.prev_length=Ze-1,bt.match_available=0,mt.next_in=vt,mt.input=Mt,mt.avail_in=kt,bt.wrap=wt,De},P.deflateInfo='pako deflate (from Nodeca project)'},function(_){'use strict';_.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name='',this.comment='',this.hcrc=0,this.done=!1}},function(_){'use strict';var S=30;_.exports=function(E,T){var O,G,W,Z,Q,J,$,ee,te,ae,ie,ne,oe,le,se,de,he,ue,ce,pe,ge,fe,_e,be,xe;O=E.state,G=E.next_in,be=E.input,W=G+(E.avail_in-5),Z=E.next_out,xe=E.output,Q=Z-(T-E.avail_out),J=Z+(E.avail_out-257),$=O.dmax,ee=O.wsize,te=O.whave,ae=O.wnext,ie=O.window,ne=O.hold,oe=O.bits,le=O.lencode,se=O.distcode,de=(1<<O.lenbits)-1,he=(1<<O.distbits)-1;top:do{15>oe&&(ne+=be[G++]<<oe,oe+=8,ne+=be[G++]<<oe,oe+=8),ue=le[ne&de];dolen:for(;;){if(ce=ue>>>24,ne>>>=ce,oe-=ce,ce=255&ue>>>16,0===ce)xe[Z++]=65535&ue;else if(16&ce){pe=65535&ue,ce&=15,ce&&(oe<ce&&(ne+=be[G++]<<oe,oe+=8),pe+=ne&(1<<ce)-1,ne>>>=ce,oe-=ce),15>oe&&(ne+=be[G++]<<oe,oe+=8,ne+=be[G++]<<oe,oe+=8),ue=se[ne&he];dodist:for(;;){if(ce=ue>>>24,ne>>>=ce,oe-=ce,ce=255&ue>>>16,16&ce){if(ge=65535&ue,ce&=15,oe<ce&&(ne+=be[G++]<<oe,oe+=8,oe<ce&&(ne+=be[G++]<<oe,oe+=8)),ge+=ne&(1<<ce)-1,ge>$){E.msg='invalid distance too far back',O.mode=S;break top}if(ne>>>=ce,oe-=ce,ce=Z-Q,ge>ce){if(ce=ge-ce,ce>te&&O.sane){E.msg='invalid distance too far back',O.mode=S;break top}if(fe=0,_e=ie,0===ae){if(fe+=ee-ce,ce<pe){pe-=ce;do xe[Z++]=ie[fe++];while(--ce);fe=Z-ge,_e=xe}}else if(ae<ce){if(fe+=ee+ae-ce,ce-=ae,ce<pe){pe-=ce;do xe[Z++]=ie[fe++];while(--ce);if(fe=0,ae<pe){ce=ae,pe-=ce;do xe[Z++]=ie[fe++];while(--ce);fe=Z-ge,_e=xe}}}else if(fe+=ae-ce,ce<pe){pe-=ce;do xe[Z++]=ie[fe++];while(--ce);fe=Z-ge,_e=xe}for(;2<pe;)xe[Z++]=_e[fe++],xe[Z++]=_e[fe++],xe[Z++]=_e[fe++],pe-=3;pe&&(xe[Z++]=_e[fe++],1<pe&&(xe[Z++]=_e[fe++]))}else{fe=Z-ge;do xe[Z++]=xe[fe++],xe[Z++]=xe[fe++],xe[Z++]=xe[fe++],pe-=3;while(2<pe);pe&&(xe[Z++]=xe[fe++],1<pe&&(xe[Z++]=xe[fe++]))}}else if(0==(64&ce)){ue=se[(65535&ue)+(ne&(1<<ce)-1)];continue dodist}else{E.msg='invalid distance code',O.mode=S;break top}break}}else if(0==(64&ce)){ue=le[(65535&ue)+(ne&(1<<ce)-1)];continue dolen}else if(32&ce){O.mode=12;break top}else{E.msg='invalid literal/length code',O.mode=S;break top}break}}while(G<W&&Z<J);return pe=oe>>3,G-=pe,oe-=pe<<3,ne&=(1<<oe)-1,E.next_in=G,E.next_out=Z,E.avail_in=G<W?5+(W-G):5-(G-W),E.avail_out=Z<J?257+(J-Z):257-(Z-J),O.hold=ne,void(O.bits=oe)}},function(_,P,I){'use strict';function S(dt){return(255&dt>>>24)+(65280&dt>>>8)+((65280&dt)<<8)+((255&dt)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new te.Buf16(320),this.work=new te.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L(dt){var ht;return dt&&dt.state?(ht=dt.state,dt.total_in=dt.total_out=ht.total=0,dt.msg='',ht.wrap&&(dt.adler=1&ht.wrap),ht.mode=ke,ht.last=0,ht.havedict=0,ht.dmax=32768,ht.head=null,ht.hold=0,ht.bits=0,ht.lencode=ht.lendyn=new te.Buf32(et),ht.distcode=ht.distdyn=new te.Buf32(at),ht.sane=1,ht.back=-1,pe):_e}function E(dt){var ht;return dt&&dt.state?(ht=dt.state,ht.wsize=0,ht.whave=0,ht.wnext=0,L(dt)):_e}function T(dt,ht){var ut,ct;return dt&&dt.state?(ct=dt.state,0>ht?(ut=0,ht=-ht):(ut=(ht>>4)+1,48>ht&&(ht&=15)),ht&&(8>ht||15<ht))?_e:(null!==ct.window&&ct.wbits!==ht&&(ct.window=null),ct.wrap=ut,ct.wbits=ht,E(dt)):_e}function O(dt,ht){var ut,ct;return dt?(ct=new R,dt.state=ct,ct.window=null,ut=T(dt,ht),ut!==pe&&(dt.state=null),ut):_e}function W(dt){if(lt){var ht;for(rt=new te.Buf32(512),st=new te.Buf32(32),ht=0;144>ht;)dt.lens[ht++]=8;for(;256>ht;)dt.lens[ht++]=9;for(;280>ht;)dt.lens[ht++]=7;for(;288>ht;)dt.lens[ht++]=8;for(oe(se,dt.lens,0,288,rt,0,dt.work,{bits:9}),ht=0;32>ht;)dt.lens[ht++]=5;oe(de,dt.lens,0,32,st,0,dt.work,{bits:5}),lt=!1}dt.lencode=rt,dt.lenbits=9,dt.distcode=st,dt.distbits=5}function Z(dt,ht,ut,ct){var mt=dt.state,pt;return null===mt.window&&(mt.wsize=1<<mt.wbits,mt.wnext=0,mt.whave=0,mt.window=new te.Buf8(mt.wsize)),ct>=mt.wsize?(te.arraySet(mt.window,ht,ut-mt.wsize,mt.wsize,0),mt.wnext=0,mt.whave=mt.wsize):(pt=mt.wsize-mt.wnext,pt>ct&&(pt=ct),te.arraySet(mt.window,ht,ut-ct,pt,mt.wnext),ct-=pt,ct?(te.arraySet(mt.window,ht,ut-ct,ct,0),mt.wnext=ct,mt.whave=mt.wsize):(mt.wnext+=pt,mt.wnext===mt.wsize&&(mt.wnext=0),mt.whave<mt.wsize&&(mt.whave+=pt))),0}var te=I(6),ae=I(50),ie=I(52),ne=I(241),oe=I(243),se=1,de=2,he=4,ce=6,pe=0,_e=-2,be=-3,xe=-4,we=8,ke=1,ve=2,Me=3,Pe=4,De=5,je=6,Ie=7,Se=8,Ce=9,Re=10,Ae=11,Be=12,ze=13,Le=14,Ee=15,Te=16,Ve=17,Ye=18,Fe=19,Ue=20,qe=21,Oe=22,Xe=23,Ne=24,Ge=25,He=26,We=27,Ze=28,Ke=29,Qe=30,Je=31,et=852,at=592,lt=!0,rt,st;P.inflateReset=E,P.inflateReset2=T,P.inflateResetKeep=L,P.inflateInit=function(dt){return O(dt,15)},P.inflateInit2=O,P.inflate=function(dt,ht){var Dt=0,Lt=new te.Buf8(4),Vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ut,ct,pt,mt,gt,_t,bt,xt,yt,wt,kt,vt,Mt,Pt,jt,It,St,Ct,Rt,At,Bt,zt,Et,Tt;if(!dt||!dt.state||!dt.output||!dt.input&&0!==dt.avail_in)return _e;ut=dt.state,ut.mode===Be&&(ut.mode=ze),gt=dt.next_out,pt=dt.output,bt=dt.avail_out,mt=dt.next_in,ct=dt.input,_t=dt.avail_in,xt=ut.hold,yt=ut.bits,wt=_t,kt=bt,zt=pe;inf_leave:for(;;)switch(ut.mode){case ke:if(0===ut.wrap){ut.mode=ze;break}for(;16>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(2&ut.wrap&&35615===xt){ut.check=0,Lt[0]=255&xt,Lt[1]=255&xt>>>8,ut.check=ie(ut.check,Lt,2,0),xt=0,yt=0,ut.mode=ve;break}if(ut.flags=0,ut.head&&(ut.head.done=!1),!(1&ut.wrap)||(((255&xt)<<8)+(xt>>8))%31){dt.msg='incorrect header check',ut.mode=Qe;break}if((15&xt)!=we){dt.msg='unknown compression method',ut.mode=Qe;break}if(xt>>>=4,yt-=4,Bt=(15&xt)+8,0===ut.wbits)ut.wbits=Bt;else if(Bt>ut.wbits){dt.msg='invalid window size',ut.mode=Qe;break}ut.dmax=1<<Bt,dt.adler=ut.check=1,ut.mode=512&xt?Re:Be,xt=0,yt=0;break;case ve:for(;16>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(ut.flags=xt,(255&ut.flags)!=we){dt.msg='unknown compression method',ut.mode=Qe;break}if(57344&ut.flags){dt.msg='unknown header flags set',ut.mode=Qe;break}ut.head&&(ut.head.text=1&xt>>8),512&ut.flags&&(Lt[0]=255&xt,Lt[1]=255&xt>>>8,ut.check=ie(ut.check,Lt,2,0)),xt=0,yt=0,ut.mode=Me;case Me:for(;32>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}ut.head&&(ut.head.time=xt),512&ut.flags&&(Lt[0]=255&xt,Lt[1]=255&xt>>>8,Lt[2]=255&xt>>>16,Lt[3]=255&xt>>>24,ut.check=ie(ut.check,Lt,4,0)),xt=0,yt=0,ut.mode=Pe;case Pe:for(;16>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}ut.head&&(ut.head.xflags=255&xt,ut.head.os=xt>>8),512&ut.flags&&(Lt[0]=255&xt,Lt[1]=255&xt>>>8,ut.check=ie(ut.check,Lt,2,0)),xt=0,yt=0,ut.mode=De;case De:if(1024&ut.flags){for(;16>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}ut.length=xt,ut.head&&(ut.head.extra_len=xt),512&ut.flags&&(Lt[0]=255&xt,Lt[1]=255&xt>>>8,ut.check=ie(ut.check,Lt,2,0)),xt=0,yt=0}else ut.head&&(ut.head.extra=null);ut.mode=je;case je:if(1024&ut.flags&&(vt=ut.length,vt>_t&&(vt=_t),vt&&(ut.head&&(Bt=ut.head.extra_len-ut.length,!ut.head.extra&&(ut.head.extra=Array(ut.head.extra_len)),te.arraySet(ut.head.extra,ct,mt,vt,Bt)),512&ut.flags&&(ut.check=ie(ut.check,ct,vt,mt)),_t-=vt,mt+=vt,ut.length-=vt),ut.length))break inf_leave;ut.length=0,ut.mode=Ie;case Ie:if(2048&ut.flags){if(0===_t)break inf_leave;vt=0;do Bt=ct[mt+vt++],ut.head&&Bt&&65536>ut.length&&(ut.head.name+=_StringfromCharCode(Bt));while(Bt&&vt<_t);if(512&ut.flags&&(ut.check=ie(ut.check,ct,vt,mt)),_t-=vt,mt+=vt,Bt)break inf_leave}else ut.head&&(ut.head.name=null);ut.length=0,ut.mode=Se;case Se:if(4096&ut.flags){if(0===_t)break inf_leave;vt=0;do Bt=ct[mt+vt++],ut.head&&Bt&&65536>ut.length&&(ut.head.comment+=_StringfromCharCode(Bt));while(Bt&&vt<_t);if(512&ut.flags&&(ut.check=ie(ut.check,ct,vt,mt)),_t-=vt,mt+=vt,Bt)break inf_leave}else ut.head&&(ut.head.comment=null);ut.mode=Ce;case Ce:if(512&ut.flags){for(;16>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(xt!==(65535&ut.check)){dt.msg='header crc mismatch',ut.mode=Qe;break}xt=0,yt=0}ut.head&&(ut.head.hcrc=1&ut.flags>>9,ut.head.done=!0),dt.adler=ut.check=0,ut.mode=Be;break;case Re:for(;32>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}dt.adler=ut.check=S(xt),xt=0,yt=0,ut.mode=Ae;case Ae:if(0===ut.havedict)return dt.next_out=gt,dt.avail_out=bt,dt.next_in=mt,dt.avail_in=_t,ut.hold=xt,ut.bits=yt,2;dt.adler=ut.check=1,ut.mode=Be;case Be:if(ht===5||ht===ce)break inf_leave;case ze:if(ut.last){xt>>>=7&yt,yt-=7&yt,ut.mode=We;break}for(;3>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}switch(ut.last=1&xt,xt>>>=1,yt-=1,3&xt){case 0:ut.mode=Le;break;case 1:if(W(ut),ut.mode=Ue,ht===ce){xt>>>=2,yt-=2;break inf_leave}break;case 2:ut.mode=Ve;break;case 3:dt.msg='invalid block type',ut.mode=Qe;}xt>>>=2,yt-=2;break;case Le:for(xt>>>=7&yt,yt-=7&yt;32>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if((65535&xt)!=(65535^xt>>>16)){dt.msg='invalid stored block lengths',ut.mode=Qe;break}if(ut.length=65535&xt,xt=0,yt=0,ut.mode=Ee,ht===ce)break inf_leave;case Ee:ut.mode=Te;case Te:if(vt=ut.length,vt){if(vt>_t&&(vt=_t),vt>bt&&(vt=bt),0===vt)break inf_leave;te.arraySet(pt,ct,mt,vt,gt),_t-=vt,mt+=vt,bt-=vt,gt+=vt,ut.length-=vt;break}ut.mode=Be;break;case Ve:for(;14>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(ut.nlen=(31&xt)+257,xt>>>=5,yt-=5,ut.ndist=(31&xt)+1,xt>>>=5,yt-=5,ut.ncode=(15&xt)+4,xt>>>=4,yt-=4,286<ut.nlen||30<ut.ndist){dt.msg='too many length or distance symbols',ut.mode=Qe;break}ut.have=0,ut.mode=Ye;case Ye:for(;ut.have<ut.ncode;){for(;3>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}ut.lens[Vt[ut.have++]]=7&xt,xt>>>=3,yt-=3}for(;19>ut.have;)ut.lens[Vt[ut.have++]]=0;if(ut.lencode=ut.lendyn,ut.lenbits=7,Et={bits:ut.lenbits},zt=oe(0,ut.lens,0,19,ut.lencode,0,ut.work,Et),ut.lenbits=Et.bits,zt){dt.msg='invalid code lengths set',ut.mode=Qe;break}ut.have=0,ut.mode=Fe;case Fe:for(;ut.have<ut.nlen+ut.ndist;){for(;;){if(Dt=ut.lencode[xt&(1<<ut.lenbits)-1],jt=Dt>>>24,It=255&Dt>>>16,St=65535&Dt,jt<=yt)break;if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(16>St)xt>>>=jt,yt-=jt,ut.lens[ut.have++]=St;else{if(16===St){for(Tt=jt+2;yt<Tt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(xt>>>=jt,yt-=jt,0===ut.have){dt.msg='invalid bit length repeat',ut.mode=Qe;break}Bt=ut.lens[ut.have-1],vt=3+(3&xt),xt>>>=2,yt-=2}else if(17===St){for(Tt=jt+3;yt<Tt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}xt>>>=jt,yt-=jt,Bt=0,vt=3+(7&xt),xt>>>=3,yt-=3}else{for(Tt=jt+7;yt<Tt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}xt>>>=jt,yt-=jt,Bt=0,vt=11+(127&xt),xt>>>=7,yt-=7}if(ut.have+vt>ut.nlen+ut.ndist){dt.msg='invalid bit length repeat',ut.mode=Qe;break}for(;vt--;)ut.lens[ut.have++]=Bt}}if(ut.mode===Qe)break;if(0===ut.lens[256]){dt.msg='invalid code -- missing end-of-block',ut.mode=Qe;break}if(ut.lenbits=9,Et={bits:ut.lenbits},zt=oe(se,ut.lens,0,ut.nlen,ut.lencode,0,ut.work,Et),ut.lenbits=Et.bits,zt){dt.msg='invalid literal/lengths set',ut.mode=Qe;break}if(ut.distbits=6,ut.distcode=ut.distdyn,Et={bits:ut.distbits},zt=oe(de,ut.lens,ut.nlen,ut.ndist,ut.distcode,0,ut.work,Et),ut.distbits=Et.bits,zt){dt.msg='invalid distances set',ut.mode=Qe;break}if(ut.mode=Ue,ht===ce)break inf_leave;case Ue:ut.mode=qe;case qe:if(6<=_t&&258<=bt){dt.next_out=gt,dt.avail_out=bt,dt.next_in=mt,dt.avail_in=_t,ut.hold=xt,ut.bits=yt,ne(dt,kt),gt=dt.next_out,pt=dt.output,bt=dt.avail_out,mt=dt.next_in,ct=dt.input,_t=dt.avail_in,xt=ut.hold,yt=ut.bits,ut.mode===Be&&(ut.back=-1);break}for(ut.back=0;;){if(Dt=ut.lencode[xt&(1<<ut.lenbits)-1],jt=Dt>>>24,It=255&Dt>>>16,St=65535&Dt,jt<=yt)break;if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(It&&0==(240&It)){for(Ct=jt,Rt=It,At=St;;){if(Dt=ut.lencode[At+((xt&(1<<Ct+Rt)-1)>>Ct)],jt=Dt>>>24,It=255&Dt>>>16,St=65535&Dt,Ct+jt<=yt)break;if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}xt>>>=Ct,yt-=Ct,ut.back+=Ct}if(xt>>>=jt,yt-=jt,ut.back+=jt,ut.length=St,0===It){ut.mode=He;break}if(32&It){ut.back=-1,ut.mode=Be;break}if(64&It){dt.msg='invalid literal/length code',ut.mode=Qe;break}ut.extra=15&It,ut.mode=Oe;case Oe:if(ut.extra){for(Tt=ut.extra;yt<Tt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}ut.length+=xt&(1<<ut.extra)-1,xt>>>=ut.extra,yt-=ut.extra,ut.back+=ut.extra}ut.was=ut.length,ut.mode=Xe;case Xe:for(;;){if(Dt=ut.distcode[xt&(1<<ut.distbits)-1],jt=Dt>>>24,It=255&Dt>>>16,St=65535&Dt,jt<=yt)break;if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(0==(240&It)){for(Ct=jt,Rt=It,At=St;;){if(Dt=ut.distcode[At+((xt&(1<<Ct+Rt)-1)>>Ct)],jt=Dt>>>24,It=255&Dt>>>16,St=65535&Dt,Ct+jt<=yt)break;if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}xt>>>=Ct,yt-=Ct,ut.back+=Ct}if(xt>>>=jt,yt-=jt,ut.back+=jt,64&It){dt.msg='invalid distance code',ut.mode=Qe;break}ut.offset=St,ut.extra=15&It,ut.mode=Ne;case Ne:if(ut.extra){for(Tt=ut.extra;yt<Tt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}ut.offset+=xt&(1<<ut.extra)-1,xt>>>=ut.extra,yt-=ut.extra,ut.back+=ut.extra}if(ut.offset>ut.dmax){dt.msg='invalid distance too far back',ut.mode=Qe;break}ut.mode=Ge;case Ge:if(0===bt)break inf_leave;if(vt=kt-bt,ut.offset>vt){if(vt=ut.offset-vt,vt>ut.whave&&ut.sane){dt.msg='invalid distance too far back',ut.mode=Qe;break}vt>ut.wnext?(vt-=ut.wnext,Mt=ut.wsize-vt):Mt=ut.wnext-vt,vt>ut.length&&(vt=ut.length),Pt=ut.window}else Pt=pt,Mt=gt-ut.offset,vt=ut.length;vt>bt&&(vt=bt),bt-=vt,ut.length-=vt;do pt[gt++]=Pt[Mt++];while(--vt);0===ut.length&&(ut.mode=qe);break;case He:if(0===bt)break inf_leave;pt[gt++]=ut.length,bt--,ut.mode=qe;break;case We:if(ut.wrap){for(;32>yt;){if(0===_t)break inf_leave;_t--,xt|=ct[mt++]<<yt,yt+=8}if(kt-=bt,dt.total_out+=kt,ut.total+=kt,kt&&(dt.adler=ut.check=ut.flags?ie(ut.check,pt,kt,gt-kt):ae(ut.check,pt,kt,gt-kt)),kt=bt,(ut.flags?xt:S(xt))!==ut.check){dt.msg='incorrect data check',ut.mode=Qe;break}xt=0,yt=0}ut.mode=Ze;case Ze:if(ut.wrap&&ut.flags){for(;32>yt;){if(0===_t)break inf_leave;_t--,xt+=ct[mt++]<<yt,yt+=8}if(xt!==(4294967295&ut.total)){dt.msg='incorrect length check',ut.mode=Qe;break}xt=0,yt=0}ut.mode=Ke;case Ke:zt=1;break inf_leave;case Qe:zt=be;break inf_leave;case Je:return xe;case 32:default:return _e;}return(dt.next_out=gt,dt.avail_out=bt,dt.next_in=mt,dt.avail_in=_t,ut.hold=xt,ut.bits=yt,(ut.wsize||kt!==dt.avail_out&&ut.mode<Qe&&(ut.mode<We||ht!==he))&&Z(dt,dt.output,dt.next_out,kt-dt.avail_out))?(ut.mode=Je,xe):(wt-=dt.avail_in,kt-=dt.avail_out,dt.total_in+=wt,dt.total_out+=kt,ut.total+=kt,ut.wrap&&kt&&(dt.adler=ut.check=ut.flags?ie(ut.check,pt,kt,dt.next_out-kt):ae(ut.check,pt,kt,dt.next_out-kt)),dt.data_type=ut.bits+(ut.last?64:0)+(ut.mode===Be?128:0)+(ut.mode===Ue||ut.mode===Ee?256:0),(0===wt&&0===kt||ht===he)&&zt===pe&&(zt=-5),zt)},P.inflateEnd=function(dt){if(!dt||!dt.state)return _e;var ht=dt.state;return ht.window&&(ht.window=null),dt.state=null,pe},P.inflateGetHeader=function(dt,ht){var ut;return dt&&dt.state?(ut=dt.state,0==(2&ut.wrap))?_e:(ut.head=ht,ht.done=!1,pe):_e},P.inflateSetDictionary=function(dt,ht){var ut=ht.length,ct,pt,mt;return dt&&dt.state?(ct=dt.state,0!==ct.wrap&&ct.mode!==Ae)?_e:ct.mode===Ae&&(pt=1,pt=ae(pt,ht,ut,0),pt!==ct.check)?be:(mt=Z(dt,ht,ut,ut),mt)?(ct.mode=Je,xe):(ct.havedict=1,pe):_e},P.inflateInfo='pako inflate (from Nodeca project)'},function(_,P,I){'use strict';var S=I(6),R=15,L=852,E=592,T=0,O=1,G=2,W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Z=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],J=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];_.exports=function(ee,te,ae,ie,ne,oe,le,se){var de=se.bits,he=0,ue=0,ce=0,pe=0,ge=0,fe=0,_e=0,be=0,xe=0,ye=0,De=null,je=0,Se=new S.Buf16(R+1),Ce=new S.Buf16(R+1),Re=null,Ae=0,we,ke,ve,Me,Pe,Ie,Be,ze,Le;for(he=0;he<=R;he++)Se[he]=0;for(ue=0;ue<ie;ue++)Se[te[ae+ue]]++;for(ge=de,pe=R;1<=pe&&0===Se[pe];pe--);if(ge>pe&&(ge=pe),0==pe)return ne[oe++]=20971520,ne[oe++]=20971520,se.bits=1,0;for(ce=1;ce<pe&&0===Se[ce];ce++);for(ge<ce&&(ge=ce),be=1,he=1;he<=R;he++)if(be<<=1,be-=Se[he],0>be)return-1;if(0<be&&(ee===T||1!=pe))return-1;for(Ce[1]=0,he=1;he<R;he++)Ce[he+1]=Ce[he]+Se[he];for(ue=0;ue<ie;ue++)0!==te[ae+ue]&&(le[Ce[te[ae+ue]]++]=ue);if(ee===T?(De=Re=le,Ie=19):ee===O?(De=W,je-=257,Re=Z,Ae-=257,Ie=256):(De=Q,Re=J,Ie=-1),ye=0,ue=0,he=ce,Pe=oe,fe=ge,_e=0,ve=-1,xe=1<<ge,Me=xe-1,ee===O&&xe>L||ee===G&&xe>E)return 1;for(;;){Be=he-_e,le[ue]<Ie?(ze=0,Le=le[ue]):le[ue]>Ie?(ze=Re[Ae+le[ue]],Le=De[je+le[ue]]):(ze=96,Le=0),we=1<<he-_e,ke=1<<fe,ce=ke;do ke-=we,ne[Pe+(ye>>_e)+ke]=0|(Be<<24|ze<<16|Le);while(0!==ke);for(we=1<<he-1;ye&we;)we>>=1;if(0===we?ye=0:(ye&=we-1,ye+=we),ue++,0==--Se[he]){if(he==pe)break;he=te[ae+le[ue]]}if(he>ge&&(ye&Me)!==ve){for(0==_e&&(_e=ge),Pe+=ce,fe=he-_e,be=1<<fe;fe+_e<pe&&(be-=Se[fe+_e],!(0>=be));)fe++,be<<=1;if(xe+=1<<fe,ee===O&&xe>L||ee===G&&xe>E)return 1;ve=ye&Me,ne[ve]=0|(ge<<24|fe<<16|Pe-oe)}}return 0!==ye&&(ne[Pe+ye]=0|(4194304|he-_e<<24)),se.bits=ge,0}},function(_,P,I){'use strict';function S(ot){for(var lt=ot.length;0<=--lt;)ot[lt]=0}function R(ot,lt,rt,st,dt){this.static_tree=ot,this.extra_bits=lt,this.extra_base=rt,this.elems=st,this.max_length=dt,this.has_stree=ot&&ot.length}function L(ot,lt){this.dyn_tree=ot,this.max_code=0,this.stat_desc=lt}function E(ot){return 256>ot?Ze[ot]:Ze[256+(ot>>>7)]}function T(ot,lt){ot.pending_buf[ot.pending++]=255&lt,ot.pending_buf[ot.pending++]=255&lt>>>8}function O(ot,lt,rt){ot.bi_valid>Ee-rt?(ot.bi_buf|=65535&lt<<ot.bi_valid,T(ot,ot.bi_buf),ot.bi_buf=lt>>Ee-ot.bi_valid,ot.bi_valid+=rt-Ee):(ot.bi_buf|=65535&lt<<ot.bi_valid,ot.bi_valid+=rt)}function G(ot,lt,rt){O(ot,rt[2*lt],rt[2*lt+1])}function W(ot,lt){var rt=0;do rt|=1&ot,ot>>>=1,rt<<=1;while(0<--lt);return rt>>>1}function Z(ot){16===ot.bi_valid?(T(ot,ot.bi_buf),ot.bi_buf=0,ot.bi_valid=0):8<=ot.bi_valid&&(ot.pending_buf[ot.pending++]=255&ot.bi_buf,ot.bi_buf>>=8,ot.bi_valid-=8)}function Q(ot,lt){var rt=lt.dyn_tree,st=lt.max_code,dt=lt.stat_desc.static_tree,ht=lt.stat_desc.has_stree,ut=lt.stat_desc.extra_bits,ct=lt.stat_desc.extra_base,pt=lt.stat_desc.max_length,mt,gt,_t,bt,xt,yt,wt=0;for(bt=0;bt<=Le;bt++)ot.bl_count[bt]=0;for(rt[2*ot.heap[ot.heap_max]+1]=0,mt=ot.heap_max+1;mt<ze;mt++)(gt=ot.heap[mt],bt=rt[2*rt[2*gt+1]+1]+1,bt>pt&&(bt=pt,wt++),rt[2*gt+1]=bt,!(gt>st))&&(ot.bl_count[bt]++,xt=0,gt>=ct&&(xt=ut[gt-ct]),yt=rt[2*gt],ot.opt_len+=yt*(bt+xt),ht&&(ot.static_len+=yt*(dt[2*gt+1]+xt)));if(0!=wt){do{for(bt=pt-1;0===ot.bl_count[bt];)bt--;ot.bl_count[bt]--,ot.bl_count[bt+1]+=2,ot.bl_count[pt]--,wt-=2}while(0<wt);for(bt=pt;0!==bt;bt--)for(gt=ot.bl_count[bt];0!==gt;)(_t=ot.heap[--mt],!(_t>st))&&(rt[2*_t+1]!==bt&&(ot.opt_len+=(bt-rt[2*_t+1])*rt[2*_t],rt[2*_t+1]=bt),gt--)}}function J(ot,lt,rt){var st=Array(Le+1),dt=0,ht,ut;for(ht=1;ht<=Le;ht++)st[ht]=dt=dt+rt[ht-1]<<1;for(ut=0;ut<=lt;ut++){var ct=ot[2*ut+1];0!==ct&&(ot[2*ut]=W(st[ct]++,ct))}}function $(){var ot,lt,rt,st,dt,ht=Array(Le+1);for(rt=0,st=0;st<Se-1;st++)for(Qe[st]=rt,ot=0;ot<1<<qe[st];ot++)Ke[rt++]=st;for(Ke[rt-1]=st,dt=0,st=0;16>st;st++)for(Je[st]=dt,ot=0;ot<1<<Oe[st];ot++)Ze[dt++]=st;for(dt>>=7;st<Ae;st++)for(Je[st]=dt<<7,ot=0;ot<1<<Oe[st]-7;ot++)Ze[256+dt++]=st;for(lt=0;lt<=Le;lt++)ht[lt]=0;for(ot=0;143>=ot;)He[2*ot+1]=8,ot++,ht[8]++;for(;255>=ot;)He[2*ot+1]=9,ot++,ht[9]++;for(;279>=ot;)He[2*ot+1]=7,ot++,ht[7]++;for(;287>=ot;)He[2*ot+1]=8,ot++,ht[8]++;for(J(He,Re+1,ht),ot=0;ot<Ae;ot++)We[2*ot+1]=5,We[2*ot]=W(ot,5);$e=new R(He,qe,Ce+1,Re,Le),et=new R(We,Oe,0,Ae,Le),at=new R([],Xe,0,Be,Te)}function ee(ot){var lt;for(lt=0;lt<Re;lt++)ot.dyn_ltree[2*lt]=0;for(lt=0;lt<Ae;lt++)ot.dyn_dtree[2*lt]=0;for(lt=0;lt<Be;lt++)ot.bl_tree[2*lt]=0;ot.dyn_ltree[2*Ve]=1,ot.opt_len=ot.static_len=0,ot.last_lit=ot.matches=0}function te(ot){8<ot.bi_valid?T(ot,ot.bi_buf):0<ot.bi_valid&&(ot.pending_buf[ot.pending++]=ot.bi_buf),ot.bi_buf=0,ot.bi_valid=0}function ae(ot,lt,rt,st){te(ot),st&&(T(ot,rt),T(ot,~rt)),xe.arraySet(ot.pending_buf,ot.window,lt,rt,ot.pending),ot.pending+=rt}function ie(ot,lt,rt,st){var dt=2*lt,ht=2*rt;return ot[dt]<ot[ht]||ot[dt]===ot[ht]&&st[lt]<=st[rt]}function ne(ot,lt,rt){for(var st=ot.heap[rt],dt=rt<<1;dt<=ot.heap_len&&(dt<ot.heap_len&&ie(lt,ot.heap[dt+1],ot.heap[dt],ot.depth)&&dt++,!ie(lt,st,ot.heap[dt],ot.depth));)ot.heap[rt]=ot.heap[dt],rt=dt,dt<<=1;ot.heap[rt]=st}function oe(ot,lt,rt){var st,dt,ht=0,ut,ct;if(0!==ot.last_lit)do st=ot.pending_buf[ot.d_buf+2*ht]<<8|ot.pending_buf[ot.d_buf+2*ht+1],dt=ot.pending_buf[ot.l_buf+ht],ht++,0===st?G(ot,dt,lt):(ut=Ke[dt],G(ot,ut+Ce+1,lt),ct=qe[ut],0!==ct&&(dt-=Qe[ut],O(ot,dt,ct)),st--,ut=E(st),G(ot,ut,rt),ct=Oe[ut],0!==ct&&(st-=Je[ut],O(ot,st,ct)));while(ht<ot.last_lit);G(ot,Ve,lt)}function le(ot,lt){var rt=lt.dyn_tree,st=lt.stat_desc.static_tree,dt=lt.stat_desc.has_stree,ht=lt.stat_desc.elems,ut,ct,pt=-1,mt;for(ot.heap_len=0,ot.heap_max=ze,ut=0;ut<ht;ut++)0===rt[2*ut]?rt[2*ut+1]=0:(ot.heap[++ot.heap_len]=pt=ut,ot.depth[ut]=0);for(;2>ot.heap_len;)mt=ot.heap[++ot.heap_len]=2>pt?++pt:0,rt[2*mt]=1,ot.depth[mt]=0,ot.opt_len--,dt&&(ot.static_len-=st[2*mt+1]);for(lt.max_code=pt,ut=ot.heap_len>>1;1<=ut;ut--)ne(ot,rt,ut);mt=ht;do ut=ot.heap[1],ot.heap[1]=ot.heap[ot.heap_len--],ne(ot,rt,1),ct=ot.heap[1],ot.heap[--ot.heap_max]=ut,ot.heap[--ot.heap_max]=ct,rt[2*mt]=rt[2*ut]+rt[2*ct],ot.depth[mt]=(ot.depth[ut]>=ot.depth[ct]?ot.depth[ut]:ot.depth[ct])+1,rt[2*ut+1]=rt[2*ct+1]=mt,ot.heap[1]=mt++,ne(ot,rt,1);while(2<=ot.heap_len);ot.heap[--ot.heap_max]=ot.heap[1],Q(ot,lt),J(rt,pt,ot.bl_count)}function se(ot,lt,rt){var st,dt=-1,ht,ut=lt[1],ct=0,pt=7,mt=4;for(0===ut&&(pt=138,mt=3),lt[2*(rt+1)+1]=65535,st=0;st<=rt;st++){if(ht=ut,ut=lt[2*(st+1)+1],++ct<pt&&ht===ut)continue;else ct<mt?ot.bl_tree[2*ht]+=ct:0===ht?10>=ct?ot.bl_tree[2*Fe]++:ot.bl_tree[2*Ue]++:(ht!==dt&&ot.bl_tree[2*ht]++,ot.bl_tree[2*Ye]++);ct=0,dt=ht,0===ut?(pt=138,mt=3):ht===ut?(pt=6,mt=3):(pt=7,mt=4)}}function de(ot,lt,rt){var st,dt=-1,ht,ut=lt[1],ct=0,pt=7,mt=4;for(0===ut&&(pt=138,mt=3),st=0;st<=rt;st++){if(ht=ut,ut=lt[2*(st+1)+1],++ct<pt&&ht===ut)continue;else if(ct<mt)do G(ot,ht,ot.bl_tree);while(0!=--ct);else 0===ht?10>=ct?(G(ot,Fe,ot.bl_tree),O(ot,ct-3,3)):(G(ot,Ue,ot.bl_tree),O(ot,ct-11,7)):(ht!==dt&&(G(ot,ht,ot.bl_tree),ct--),G(ot,Ye,ot.bl_tree),O(ot,ct-3,2));ct=0,dt=ht,0===ut?(pt=138,mt=3):ht===ut?(pt=6,mt=3):(pt=7,mt=4)}}function he(ot){var lt;for(se(ot,ot.dyn_ltree,ot.l_desc.max_code),se(ot,ot.dyn_dtree,ot.d_desc.max_code),le(ot,ot.bl_desc),lt=Be-1;3<=lt&&0===ot.bl_tree[2*Ne[lt]+1];lt--);return ot.opt_len+=3*(lt+1)+5+5+4,lt}function ue(ot,lt,rt,st){var dt;for(O(ot,lt-257,5),O(ot,rt-1,5),O(ot,st-4,4),dt=0;dt<st;dt++)O(ot,ot.bl_tree[2*Ne[dt]+1],3);de(ot,ot.dyn_ltree,lt-1),de(ot,ot.dyn_dtree,rt-1)}function ce(ot){var lt=4093624447,rt;for(rt=0;31>=rt;rt++,lt>>>=1)if(1&lt&&0!==ot.dyn_ltree[2*rt])return we;if(0!==ot.dyn_ltree[18]||0!==ot.dyn_ltree[20]||0!==ot.dyn_ltree[26])return ke;for(rt=32;rt<Ce;rt++)if(0!==ot.dyn_ltree[2*rt])return ke;return we}function ge(ot,lt,rt,st){O(ot,(Me<<1)+(st?1:0),3),ae(ot,lt,rt,!0)}var xe=I(6),we=0,ke=1,Me=0,Pe=1,Se=29,Ce=256,Re=Ce+1+Se,Ae=30,Be=19,ze=2*Re+1,Le=15,Ee=16,Te=7,Ve=256,Ye=16,Fe=17,Ue=18,qe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Oe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],He=Array(2*(Re+2));S(He);var We=Array(2*Ae);S(We);var Ze=Array(512);S(Ze);var Ke=Array(258-3+1);S(Ke);var Qe=Array(Se);S(Qe);var Je=Array(Ae);S(Je);var $e,et,at,nt=!1;P._tr_init=function(ot){nt||($(),nt=!0),ot.l_desc=new L(ot.dyn_ltree,$e),ot.d_desc=new L(ot.dyn_dtree,et),ot.bl_desc=new L(ot.bl_tree,at),ot.bi_buf=0,ot.bi_valid=0,ee(ot)},P._tr_stored_block=ge,P._tr_flush_block=function(ot,lt,rt,st){var dt,ht,ut=0;0<ot.level?(ot.strm.data_type===2&&(ot.strm.data_type=ce(ot)),le(ot,ot.l_desc),le(ot,ot.d_desc),ut=he(ot),dt=ot.opt_len+3+7>>>3,ht=ot.static_len+3+7>>>3,ht<=dt&&(dt=ht)):dt=ht=rt+5,rt+4<=dt&&-1!==lt?ge(ot,lt,rt,st):ot.strategy===4||ht===dt?(O(ot,(Pe<<1)+(st?1:0),3),oe(ot,He,We)):(O(ot,(2<<1)+(st?1:0),3),ue(ot,ot.l_desc.max_code+1,ot.d_desc.max_code+1,ut+1),oe(ot,ot.dyn_ltree,ot.dyn_dtree)),ee(ot),st&&te(ot)},P._tr_tally=function(ot,lt,rt){return ot.pending_buf[ot.d_buf+2*ot.last_lit]=255&lt>>>8,ot.pending_buf[ot.d_buf+2*ot.last_lit+1]=255&lt,ot.pending_buf[ot.l_buf+ot.last_lit]=255&rt,ot.last_lit++,0===lt?ot.dyn_ltree[2*rt]++:(ot.matches++,lt--,ot.dyn_ltree[2*(Ke[rt]+Ce+1)]++,ot.dyn_dtree[2*E(lt)]++),ot.last_lit===ot.lit_bufsize-1},P._tr_align=function(ot){O(ot,Pe<<1,3),G(ot,Ve,He),Z(ot)}},function(_,P,I){'use strict';const S=I(250);_.exports=function(L,E){const T=new S(L,E);return T.decode(E)}},function(_,P){'use strict';function S(ee,te){if(1===te)return ee.readUint8();for(var ae=new Uint8Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readUint8();return ae}var $=new Map([[1,[1,S]],[2,[1,function(ee,te){for(var ae=[],ie='',ne=0,oe;ne<te;ne++)oe=_StringfromCharCode(ee.readUint8()),'\0'===oe?(ae.push(ie),ie=''):ie+=oe;return 1===ae.length?ae[0]:ae}]],[3,[2,function(ee,te){if(1===te)return ee.readUint16();for(var ae=new Uint16Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readUint16();return ae}]],[4,[4,function(ee,te){if(1===te)return ee.readUint32();for(var ae=new Uint32Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readUint32();return ae}]],[5,[8,function(ee,te){if(1===te)return ee.readUint32()/ee.readUint32();for(var ae=Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readUint32()/ee.readUint32();return ae}]],[6,[1,function(ee,te){if(1===te)return ee.readInt8();for(var ae=new Int8Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readInt8();return ae}]],[7,[1,S]],[8,[2,function(ee,te){if(1===te)return ee.readInt16();for(var ae=new Int16Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readInt16();return ae}]],[9,[4,function(ee,te){if(1===te)return ee.readInt32();for(var ae=new Int32Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readInt32();return ae}]],[10,[8,function(ee,te){if(1===te)return ee.readInt32()/ee.readInt32();for(var ae=Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readInt32()/ee.readInt32();return ae}]],[11,[4,function(ee,te){if(1===te)return ee.readFloat32();for(var ae=new Float32Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readFloat32();return ae}]],[12,[8,function(ee,te){if(1===te)return ee.readFloat64();for(var ae=new Float64Array(te),ie=0;ie<te;ie++)ae[ie]=ee.readFloat64();return ae}]]]);P.getByteLength=function(ee,te){return $.get(ee)[0]*te},P.readData=function(ee,te,ae){return $.get(te)[1](ee,ae)}},function(_){'use strict';const S={33434:'ExposureTime',33437:'FNumber',34850:'ExposureProgram',34852:'SpectralSensitivity',34855:'ISOSpeedRatings',34856:'OECF',34864:'SensitivityType',34865:'StandardOutputSensitivity',34866:'RecommendedExposureIndex',34867:'ISOSpeed',34868:'ISOSpeedLatitudeyyy',34869:'ISOSpeedLatitudezzz',36864:'ExifVersion',36867:'DateTimeOriginal',36868:'DateTimeDigitized',37121:'ComponentsConfiguration',37122:'CompressedBitsPerPixel',37377:'ShutterSpeedValue',37378:'ApertureValue',37379:'BrightnessValue',37380:'ExposureBiasValue',37381:'MaxApertureValue',37382:'SubjectDistance',37383:'MeteringMode',37384:'LightSource',37385:'Flash',37386:'FocalLength',37396:'SubjectArea',37500:'MakerNote',37510:'UserComment',37520:'SubsecTime',37521:'SubsecTimeOriginal',37522:'SubsecTimeDigitized',40960:'FlashpixVersion',40961:'ColorSpace',40962:'PixelXDimension',40963:'PixelYDimension',40964:'RelatedSoundFile',41483:'FlashEnergy',41484:'SpatialFrequencyResponse',41486:'FocalPlaneXResolution',41487:'FocalPlaneYResolution',41488:'FocalPlaneResolutionUnit',41492:'SubjectLocation',41493:'ExposureIndex',41495:'SensingMethod',41728:'FileSource',41729:'SceneType',41730:'CFAPattern',41985:'CustomRendered',41986:'ExposureMode',41987:'WhiteBalance',41988:'DigitalZoomRatio',41989:'FocalLengthIn35mmFilm',41990:'SceneCaptureType',41991:'GainControl',41992:'Contrast',41993:'Saturation',41994:'Sharpness',41995:'DeviceSettingDescription',41996:'SubjectDistanceRange',42016:'ImageUniqueID',42032:'CameraOwnerName',42033:'BodySerialNumber',42034:'LensSpecification',42035:'LensMake',42036:'LensModel',42037:'LensSerialNumber',42240:'Gamma'},R={};for(var L in S)R[S[L]]=L;_.exports={tagsById:S,tagsByName:R}},function(_){'use strict';const S={0:'GPSVersionID',1:'GPSLatitudeRef',2:'GPSLatitude',3:'GPSLongitudeRef',4:'GPSLongitude',5:'GPSAltitudeRef',6:'GPSAltitude',7:'GPSTimeStamp',8:'GPSSatellites',9:'GPSStatus',10:'GPSMeasureMode',11:'GPSDOP',12:'GPSSpeedRef',13:'GPSSpeed',14:'GPSTrackRef',15:'GPSTrack',16:'GPSImgDirectionRef',17:'GPSImgDirection',18:'GPSMapDatum',19:'GPSDestLatitudeRef',20:'GPSDestLatitude',21:'GPSDestLongitudeRef',22:'GPSDestLongitude',23:'GPSDestBearingRef',24:'GPSDestBearing',25:'GPSDestDistanceRef',26:'GPSDestDistance',27:'GPSProcessingMethod',28:'GPSAreaInformation',29:'GPSDateStamp',30:'GPSDifferential',31:'GPSHPositioningError'},R={};for(var L in S)R[S[L]]=L;_.exports={tagsById:S,tagsByName:R}},function(_){'use strict';const S={254:'NewSubfileType',255:'SubfileType',256:'ImageWidth',257:'ImageLength',258:'BitsPerSample',259:'Compression',262:'PhotometricInterpretation',263:'Threshholding',264:'CellWidth',265:'CellLength',266:'FillOrder',269:'DocumentName',270:'ImageDescription',271:'Make',272:'Model',273:'StripOffsets',274:'Orientation',277:'SamplesPerPixel',278:'RowsPerStrip',279:'StripByteCounts',280:'MinSampleValue',281:'MaxSampleValue',282:'XResolution',283:'YResolution',284:'PlanarConfiguration',285:'PageName',286:'XPosition',287:'YPosition',288:'FreeOffsets',289:'FreeByteCounts',290:'GrayResponseUnit',291:'GrayResponseCurve',292:'T4Options',293:'T6Options',296:'ResolutionUnit',297:'PageNumber',301:'TransferFunction',305:'Software',306:'DateTime',315:'Artist',316:'HostComputer',317:'Predictor',318:'WhitePoint',319:'PrimaryChromaticities',320:'ColorMap',321:'HalftoneHints',322:'TileWidth',323:'TileLength',324:'TileOffsets',325:'TileByteCounts',326:'BadFaxLines',327:'CleanFaxData',328:'ConsecutiveBadFaxLines',330:'SubIFDs',332:'InkSet',333:'InkNames',334:'NumberOfInks',336:'DotRange',337:'TargetPrinter',338:'ExtraSamples',339:'SampleFormat',340:'SMinSampleValue',341:'SMaxSampleValue',342:'TransferRange',343:'ClipPath',344:'XClipPathUnits',345:'YClipPathUnits',346:'Indexed',347:'JPEGTables',351:'OPIProxy',400:'GlobalParametersIFD',401:'ProfileType',402:'FaxProfile',403:'CodingMethods',404:'VersionYear',405:'ModeNumber',433:'Decode',434:'DefaultImageColor',512:'JPEGProc',513:'JPEGInterchangeFormat',514:'JPEGInterchangeFormatLength',515:'JPEGRestartInterval',517:'JPEGLosslessPredictors',518:'JPEGPointTransforms',519:'JPEGQTables',520:'JPEGDCTables',521:'JPEGACTables',529:'YCbCrCoefficients',530:'YCbCrSubSampling',531:'YCbCrPositioning',532:'ReferenceBlackWhite',559:'StripRowCounts',700:'XMP',32781:'ImageID',32932:'WangAnnotatio',33432:'Copyright',33445:'MDFileTag',33446:'MDScalePixel',33447:'MDColorTable',33448:'MDLabName',33449:'MDSampleInfo',33450:'MDPrepDate',33451:'MDPrepTime',33452:'MDFileUnits',33550:'ModelPixelScaleTag',33723:'IPTC',33918:'INGRPacketDataTag',33919:'INGRFlagRegisters',33920:'IrasBTransformationMatrix',33922:'ModelTiepointTag',34264:'ModelTransformationTag',34377:'Photoshop',34665:'ExifIFD',34675:'ICCProfile',34732:'ImageLayer',34735:'GeoKeyDirectoryTag',34736:'GeoDoubleParamsTag',34737:'GeoAsciiParamsTag',34853:'GPSIFD',34908:'HylaFAXFaxRecvParams',34909:'HylaFAXFaxSubAddress',34910:'HylaFAXFaxRecvTime',37724:'ImageSourceData',40965:'InteroperabilityIFD',42112:'GDAL_METADATA',42113:'GDAL_NODATA',50215:'OceScanjobDescription',50216:'OceApplicationSelector',50217:'OceIdentificationNumber',50218:'OceImageLogicCharacteristics',50706:'DNGVersion',50707:'DNGBackwardVersion',50708:'UniqueCameraModel',50709:'LocalizedCameraModel',50710:'CFAPlaneColor',50711:'CFALayout',50712:'LinearizationTable',50713:'BlackLevelRepeatDim',50714:'BlackLevel',50715:'BlackLevelDeltaH',50716:'BlackLevelDeltaV',50717:'WhiteLevel',50718:'DefaultScale',50719:'DefaultCropOrigin',50720:'DefaultCropSize',50721:'ColorMatrix1',50722:'ColorMatrix2',50723:'CameraCalibration1',50724:'CameraCalibration2',50725:'ReductionMatrix1',50726:'ReductionMatrix2',50727:'AnalogBalance',50728:'AsShotNeutral',50729:'AsShotWhiteXY',50730:'BaselineExposure',50731:'BaselineNoise',50732:'BaselineSharpness',50733:'BayerGreenSplit',50734:'LinearResponseLimit',50735:'CameraSerialNumber',50736:'LensInfo',50737:'ChromaBlurRadius',50738:'AntiAliasStrength',50740:'DNGPrivateData',50741:'MakerNoteSafety',50778:'CalibrationIlluminant1',50779:'CalibrationIlluminant2',50780:'BestQualityScale',50784:'AliasLayerMetadata'},R={};for(var L in S)R[S[L]]=L;_.exports={tagsById:S,tagsByName:R}},function(_,P,I){'use strict';function S(ee,te,ae,ie){return 8===ae?new Uint8Array(ee*te):16===ae?new Uint16Array(ee*te):32===ae&&3===ie?new Float32Array(ee*te):T('bit depth / sample format',ae+' / '+ie)}function R(ee,te,ae,ie){for(var ne=0;ne<ie;ne++)ee[ae++]=te.getUint8(ne);return ae}function L(ee,te,ae,ie,ne){for(var oe=0;oe<2*ie;oe+=2)ee[ae++]=te.getUint16(oe,ne);return ae}function E(ee,te,ae,ie,ne){for(var oe=0;oe<4*ie;oe+=4)ee[ae++]=te.getFloat32(oe,ne);return ae}function T(ee,te){throw new Error('Unsupported '+ee+': '+te)}function O(ee){if(ee.length){const ae=ee;ee=ae[0];for(var te=0;te<ae.length;te++)ae[te]!==ee&&T('bit depth',ae)}return ee}const G=I(23),W=I(54),Z=I(251),Q=I(246),J={ignoreImageData:!1,onlyFirst:!1};_.exports=class extends G{constructor(ee,te){super(ee,te),this._nextIFD=0}decode(ee){ee=Object.assign({},J,ee);const te=[];for(this.decodeHeader();this._nextIFD;)if(te.push(this.decodeIFD(ee)),ee.onlyFirst)return te[0];return te}decodeHeader(){let ee=this.readUint16();if(18761===ee)this.setLittleEndian();else if(19789===ee)this.setBigEndian();else throw new Error('invalid byte order: 0x'+ee.toString(16));if(ee=this.readUint16(),42!==ee)throw new Error('not a TIFF file');this._nextIFD=this.readUint32()}decodeIFD(ee){this.seek(this._nextIFD);var te=ee.kind?new W(ee.kind):new Z;const ae=this.readUint16();for(var ie=0;ie<ae;ie++)this.decodeIFDEntry(te);return ee.ignoreImageData||this.decodeImageData(te),this._nextIFD=this.readUint32(),te}decodeIFDEntry(ee){const te=this.offset,ae=this.readUint16(),ie=this.readUint16(),ne=this.readUint32();if(1>ie||12<ie)return void this.skip(4);const oe=Q.getByteLength(ie,ne);4<oe&&this.seek(this.readUint32());const le=Q.readData(this,ie,ne);if(ee.fields.set(ae,le),34665===ae||34853===ae){let se=this.offset,de;34665===ae?de='exif':34853===ae&&(de='gps'),this._nextIFD=le,ee[de]=this.decodeIFD({kind:de,ignoreImageData:!0}),this.offset=se}this.seek(te),this.skip(12)}decodeImageData(ee){const te=ee.orientation;switch(te&&1!==te&&T('orientation',te),ee.type){case 1:case 2:this.readStripData(ee);break;default:T('image type',ee.type);}}readStripData(ee){const te=ee.width,ae=ee.height,ie=O(ee.bitsPerSample),ne=ee.sampleFormat;let oe=te*ae;const le=S(oe,1,ie,ne),se=ee.compression,de=ee.rowsPerStrip,he=de*te,ue=ee.stripOffsets,ce=ee.stripByteCounts;for(var pe=0,ge=0;ge<ue.length;ge++){var fe=this.getStripData(se,ue[ge],ce[ge]),_e=oe>he?he:oe;oe-=_e,8===ie?pe=R(le,fe,pe,_e):16===ie?pe=L(le,fe,pe,_e,this.isLittleEndian()):32===ie&&3===ne?pe=E(le,fe,pe,_e,this.isLittleEndian()):T('bitDepth',ie)}ee.data=le}getStripData(ee,te,ae){switch(ee){case 1:return new DataView(this.buffer,te,ae);case 2:case 32773:return T('Compression',ee);default:throw new Error('invalid compression: '+ee);}}}},function(_,P,I){'use strict';function S(T){return'number'==typeof T?[T]:T}const R=I(54),L=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class E extends R{constructor(){super('standard')}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var T=new Date,O=L.exec(this.dateTime);return T.setFullYear(O[1],O[2]-1,O[3]),T.setHours(O[4],O[5],O[6]),T}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return S(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return S(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||_Mathpow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}_.exports=E},function(_,P,I){(function(S,R){var L;(function(E){function T(pe){for(var ge=[],fe=0,_e=pe.length,be,xe;fe<_e;)be=pe.charCodeAt(fe++),55296<=be&&56319>=be&&fe<_e?(xe=pe.charCodeAt(fe++),56320==(64512&xe)?ge.push(((1023&be)<<10)+(1023&xe)+65536):(ge.push(be),fe--)):ge.push(be);return ge}function O(pe){for(var ge=pe.length,fe=-1,be='',_e;++fe<ge;)_e=pe[fe],65535<_e&&(_e-=65536,be+=ne(55296|1023&_e>>>10),_e=56320|1023&_e),be+=ne(_e);return be}function G(pe){if(55296<=pe&&57343>=pe)throw Error('Lone surrogate U+'+pe.toString(16).toUpperCase()+' is not a scalar value')}function W(pe,ge){return ne(128|63&pe>>ge)}function Z(pe){if(0==(4294967168&pe))return ne(pe);var ge='';return 0==(4294965248&pe)?ge=ne(192|31&pe>>6):0==(4294901760&pe)?(G(pe),ge=ne(224|15&pe>>12),ge+=W(pe,6)):0==(4292870144&pe)&&(ge=ne(240|7&pe>>18),ge+=W(pe,12),ge+=W(pe,6)),ge+=ne(128|63&pe),ge}function J(){if(se>=le)throw Error('Invalid byte index');var pe=255&oe[se];if(se++,128==(192&pe))return 63&pe;throw Error('Invalid continuation byte')}function $(){var pe,ge,fe,_e,be;if(se>le)throw Error('Invalid byte index');if(se==le)return!1;if(pe=255&oe[se],se++,0==(128&pe))return pe;if(192==(224&pe)){if(ge=J(),be=(31&pe)<<6|ge,128<=be)return be;throw Error('Invalid continuation byte')}if(224==(240&pe)){if(ge=J(),fe=J(),be=(15&pe)<<12|ge<<6|fe,2048<=be)return G(be),be;throw Error('Invalid continuation byte')}if(240==(248&pe)&&(ge=J(),fe=J(),_e=J(),be=(7&pe)<<18|ge<<12|fe<<6|_e,65536<=be&&1114111>=be))return be;throw Error('Invalid UTF-8 detected')}var ae='object'==typeof S&&S&&S.exports==('object'==typeof P&&P)&&S,ie='object'==typeof R&&R;(ie.global===ie||ie.window===ie)&&(E=ie);var ne=_StringfromCharCode,oe,le,se,de={version:'2.1.2',encode:function(pe){for(var ge=T(pe),fe=ge.length,_e=-1,xe='',be;++_e<fe;)be=ge[_e],xe+=Z(be);return xe},decode:function(pe){oe=T(pe),le=oe.length,se=0;for(var ge=[],fe;!1!==(fe=$());)ge.push(fe);return O(ge)}};L=function(){return de}.call(P,I,P,S),!(void 0!==L&&(S.exports=L))})(this)}).call(P,I(255)(_),I(28))},function(_,P,I){'use strict';function S(T,O){if('string'!=typeof T&&'function'!=typeof T)throw new TypeError('func argument must be a function');if(void 0===O&&(O={}),'object'!=typeof O||null===O)throw new TypeError('options argument must be an object');this._workerCode=T.toString(),this._numWorkers=void 0===O.maxWorkers||'auto'===O.maxWorkers?_Mathmin(L-1,1):0<O.maxWorkers?_Mathmin(O.maxWorkers,L):L,this._workers=new Map,this._timeout=O.timeout||0,this._terminateOnError=!!O.terminateOnError;var G=O.deps;'string'==typeof G&&(G=[G]),Array.isArray(G)||(G=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(G)}var R=I(254),L=navigator.hardwareConcurrency||1,E=Function.prototype;S.prototype._init=function(T){for(var O=R.newWorkerURL(this._workerCode,T),G=0,W;G<this._numWorkers;G++)W=new Worker(O),W.onmessage=this._onmessage.bind(this,W),W.onerror=this._onerror.bind(this,W),W.running=!1,W.id=G,this._workers.set(W,null);URL.revokeObjectURL(O)},S.prototype._onerror=function(T,O){if(!this._terminated){this._working--,T.running=!1;var G=this._workers.get(T);G&&G[1](O.message),this._workers.set(T,null),this._terminateOnError?this.terminate():this._exec()}},S.prototype._onmessage=function(T,O){if(!this._terminated){this._working--,T.running=!1;var G=this._workers.get(T);G&&G[0](O.data.data),this._workers.set(T,null),this._exec()}},S.prototype._exec=function(){for(var T of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!T.running)for(var O=0,G;O<this._waiting.length;O++)if(G=this._waiting[O],'number'!=typeof G[4]||G[4]===T.id){this._waiting.splice(O,1),T.postMessage({action:'exec',event:G[0],args:G[1]},G[2]),T.running=!0,T.time=Date.now(),this._workers.set(T,G[3]),this._working++;break}}},S.prototype.terminate=function(){if(!this._terminated){for(var T of this._workers)T[0].terminate(),T[1]&&T[1][1](new Error('Terminated'));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},S.prototype.postAll=function(T,O){if(this._terminated)throw new Error('Cannot post (terminated)');var G=[];for(var W of this._workers.keys())G.push(this.post(T,O,[],W.id));return Promise.all(G)},S.prototype.post=function(T,O,G,W){O===void 0&&(O=[]),G===void 0&&(G=[]),Array.isArray(O)||(O=[O]),Array.isArray(G)||(G=[G]);var Z=this;return new Promise(function(Q,J){if(Z._terminated)throw new Error('Cannot post (terminated)');Z._waiting.push([T,O,G,[Q,J],W]),Z._exec()})},_.exports=S},function(_,P){'use strict';var R=function(){function L(){this._listeners={}}self.window=self;L.prototype.on=function(O,G){if(this._listeners[O])throw new RangeError('there is already a listener for '+O);if('function'!=typeof G)throw new TypeError('callback argument must be a function');this._listeners[O]=G},L.prototype._send=function(O,G,W){W===void 0?W=[]:!Array.isArray(W)&&(W=[W]),self.postMessage({id:O,data:G},W)},L.prototype._trigger=function(O,G){if(!this._listeners[O])throw new Error('event '+O+' is not defined');this._listeners[O].apply(null,G)};var T=new L;self.onmessage=function(O){switch(O.data.action){case'exec':O.data.args.unshift(function(G,W){T._send(O.data.id,G,W)}),T._trigger(O.data.event,O.data.args);break;case'ping':T._send(O.data.id,'pong');break;default:throw new Error('unexpected action: '+O.data.action);}},'CODE'}.toString().split('"CODE";');P.newWorkerURL=function(E,T){var O=new Blob(['(',R[0],'importScripts.apply(self, '+JSON.stringify(T)+');\n','(',E,')();',R[1],')();'],{type:'application/javascript'});return URL.createObjectURL(O)}},function(_){_.exports=function(I){return I.webpackPolyfill||(I.deprecate=function(){},I.paths=[],!I.children&&(I.children=[]),Object.defineProperty(I,'loaded',{enumerable:!0,get:function(){return I.l}}),Object.defineProperty(I,'id',{enumerable:!0,get:function(){return I.i}}),I.webpackPolyfill=1),I}},function(){}])});

//# sourceMappingURL=image.min.js.map